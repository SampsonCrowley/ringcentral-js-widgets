{"version":3,"sources":["components/CallListV2/index.js"],"names":["CallListV2","props","_resizeAll","index","extended","_resizeAllFlag","_renderIndex","_cellExtended","_list","current","recomputeRowHeights","forceUpdateGrid","_renderRowHeight","params","undefined","_rowHeight","_rowRender","key","style","className","brand","currentLocale","calls","areaCode","countryCode","onViewContact","onCreateContact","createEntityTypes","onLogCall","onClickToDial","onClickToSms","isLoggedContact","disableLinks","disableClickToDial","outboundSmsPermission","internalSmsPermission","active","dateTimeFormatter","loggingMap","webphoneAnswer","webphoneReject","webphoneHangup","webphoneResume","enableContactFallback","autoLog","showContactDisplayPlaceholder","sourceIcons","renderContactName","renderExtraButton","contactDisplayStyle","externalViewEntity","externalHasEntity","readTextPermission","content","length","call","id","sessionId","React","createRef","_mostRecentWidth","prevProps","width","height","outline","PureComponent","propTypes","PropTypes","string","number","isRequired","arrayOf","CallItem","bool","func","array","object","defaultProps"],"mappings":"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","file":"index.js","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport CallItem from '../CallItem';\nimport NoCalls from '../NoCalls';\nimport { List } from 'react-virtualized';\n\nexport default class CallListV2 extends React.PureComponent {\n  constructor(props) {\n    super(props);\n    this._rowHeight = 65;\n    this._list = React.createRef();\n\n    this._mostRecentWidth = 0;\n    this._resizeAllFlag = false;\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.props.calls !== prevProps.calls) {\n      if (this._list && this._list.current) {\n        this._list.current.forceUpdateGrid();\n      }\n    }\n\n    if (this._resizeAllFlag) {\n      this._resizeAllFlag = false;\n\n      if (this._list) {\n        this._list.current.recomputeRowHeights();\n      }\n    } else if (this.props.calls !== prevProps.calls) {\n      const index = prevProps.calls.length;\n      if (this._list) {\n        this._list.current.recomputeRowHeights(index);\n      }\n    }\n  }\n\n  _resizeAll = (index, extended) => {\n    this._resizeAllFlag = false;\n    this._renderIndex = index;\n    this._cellExtended = extended;\n    if (this._list && this._list.current) {\n      this._list.current.recomputeRowHeights();\n      this._list.current.forceUpdateGrid();\n    }\n  };\n\n  _renderRowHeight = (params) => {\n    if (\n      this._renderIndex !== undefined &&\n      this._renderIndex === params.index &&\n      this._cellExtended\n    ) {\n      return this._rowHeight * 2;\n    }\n    return this._rowHeight;\n  };\n\n  _rowRender = ({ index, key, style }) => {\n    const {\n      className,\n      brand,\n      currentLocale,\n      calls,\n      areaCode,\n      countryCode,\n      onViewContact,\n      onCreateContact,\n      createEntityTypes,\n      onLogCall,\n      onClickToDial,\n      onClickToSms,\n      isLoggedContact,\n      disableLinks,\n      disableClickToDial,\n      outboundSmsPermission,\n      internalSmsPermission,\n      active,\n      dateTimeFormatter,\n      loggingMap,\n      webphoneAnswer,\n      webphoneReject,\n      webphoneHangup,\n      webphoneResume,\n      enableContactFallback,\n      autoLog,\n      showContactDisplayPlaceholder,\n      sourceIcons,\n      renderContactName,\n      renderExtraButton,\n      contactDisplayStyle,\n      externalViewEntity,\n      externalHasEntity,\n      readTextPermission,\n    } = this.props;\n\n    let content;\n    if (index >= calls.length) {\n      content = (\n        <div className={className}>\n          <NoCalls currentLocale={currentLocale} active={active} />\n        </div>\n      );\n    } else {\n      const call = calls[index];\n      content = (\n        <CallItem\n          key={call.id}\n          renderIndex={index}\n          extended={\n            (this._renderIndex === index && this._cellExtended) || false\n          }\n          style={style}\n          call={call}\n          currentLocale={currentLocale}\n          brand={brand}\n          areaCode={areaCode}\n          countryCode={countryCode}\n          onViewContact={onViewContact}\n          onCreateContact={onCreateContact}\n          createEntityTypes={createEntityTypes}\n          onLogCall={onLogCall}\n          onClickToDial={onClickToDial}\n          onClickToSms={onClickToSms}\n          isLoggedContact={isLoggedContact}\n          disableLinks={disableLinks}\n          disableClickToDial={disableClickToDial}\n          outboundSmsPermission={outboundSmsPermission}\n          internalSmsPermission={internalSmsPermission}\n          active={active}\n          dateTimeFormatter={dateTimeFormatter}\n          isLogging={!!loggingMap[call.sessionId]}\n          webphoneAnswer={webphoneAnswer}\n          webphoneReject={webphoneReject}\n          webphoneHangup={webphoneHangup}\n          webphoneResume={webphoneResume}\n          enableContactFallback={enableContactFallback}\n          autoLog={autoLog}\n          showContactDisplayPlaceholder={showContactDisplayPlaceholder}\n          sourceIcons={sourceIcons}\n          renderContactName={renderContactName}\n          renderExtraButton={renderExtraButton}\n          contactDisplayStyle={contactDisplayStyle}\n          externalViewEntity={externalViewEntity}\n          externalHasEntity={externalHasEntity}\n          readTextPermission={readTextPermission}\n          onSizeChanged={this._resizeAll}\n        />\n      );\n    }\n\n    return (\n      <div key={key} style={style}>\n        {content}\n      </div>\n    );\n  };\n\n  render() {\n    const { calls, className, width = 300, height = 315 } = this.props;\n\n    return (\n      <List\n        style={{ outline: 'none' }}\n        ref={this._list}\n        width={width}\n        height={height}\n        overscanRowCount={15}\n        className={className}\n        rowCount={calls.length}\n        rowHeight={this._renderRowHeight}\n        rowRenderer={this._rowRender}\n      />\n    );\n  }\n}\n\nCallListV2.propTypes = {\n  className: PropTypes.string,\n  width: PropTypes.number.isRequired,\n  height: PropTypes.number.isRequired,\n  brand: PropTypes.string.isRequired,\n  currentLocale: PropTypes.string.isRequired,\n  calls: PropTypes.arrayOf(CallItem.propTypes.call).isRequired,\n  active: PropTypes.bool,\n  areaCode: PropTypes.string.isRequired,\n  countryCode: PropTypes.string.isRequired,\n  onViewContact: PropTypes.func,\n  onCreateContact: PropTypes.func,\n  createEntityTypes: PropTypes.array,\n  onLogCall: PropTypes.func,\n  onClickToDial: PropTypes.func,\n  onClickToSms: PropTypes.func,\n  isLoggedContact: PropTypes.func,\n  loggingMap: PropTypes.object,\n  disableLinks: PropTypes.bool,\n  disableClickToDial: PropTypes.bool,\n  outboundSmsPermission: PropTypes.bool,\n  internalSmsPermission: PropTypes.bool,\n  dateTimeFormatter: PropTypes.func.isRequired,\n  webphoneAnswer: PropTypes.func,\n  webphoneReject: PropTypes.func,\n  webphoneHangup: PropTypes.func,\n  webphoneResume: PropTypes.func,\n  enableContactFallback: PropTypes.bool,\n  autoLog: PropTypes.bool,\n  showContactDisplayPlaceholder: PropTypes.bool,\n  sourceIcons: PropTypes.object,\n  renderContactName: PropTypes.func,\n  renderExtraButton: PropTypes.func,\n  contactDisplayStyle: PropTypes.string,\n  externalViewEntity: PropTypes.func,\n  externalHasEntity: PropTypes.func,\n  readTextPermission: PropTypes.bool,\n};\n\nCallListV2.defaultProps = {\n  className: null,\n  active: false,\n  disableLinks: false,\n  disableClickToDial: false,\n  outboundSmsPermission: false,\n  internalSmsPermission: false,\n  onViewContact: undefined,\n  onCreateContact: undefined,\n  createEntityTypes: undefined,\n  onLogCall: undefined,\n  isLoggedContact: undefined,\n  onClickToDial: undefined,\n  onClickToSms: undefined,\n  loggingMap: {},\n  webphoneAnswer: undefined,\n  webphoneReject: undefined,\n  webphoneHangup: undefined,\n  webphoneResume: undefined,\n  enableContactFallback: undefined,\n  showContactDisplayPlaceholder: true,\n  autoLog: false,\n  sourceIcons: undefined,\n  renderContactName: undefined,\n  renderExtraButton: undefined,\n  contactDisplayStyle: undefined,\n  externalViewEntity: undefined,\n  externalHasEntity: undefined,\n  readTextPermission: true,\n};\n"]}