{"version":3,"sources":["components/CallListV2/index.js"],"names":["CallListV2","props","_setExtendedIndex","extendedIndex","setState","_list","current","recomputeRowHeights","_onSizeChanged","index","state","_renderRowHeight","margin","calls","length","rowHeight","extendedRowHeight","_rowRender","key","style","className","brand","currentLocale","areaCode","countryCode","onViewContact","onCreateContact","createEntityTypes","onLogCall","onClickToDial","onClickToSms","isLoggedContact","disableLinks","disableClickToDial","outboundSmsPermission","internalSmsPermission","active","dateTimeFormatter","loggingMap","webphoneAnswer","webphoneReject","webphoneHangup","webphoneResume","enableContactFallback","autoLog","showContactDisplayPlaceholder","sourceIcons","phoneTypeRenderer","phoneSourceNameRenderer","renderContactName","renderExtraButton","contactDisplayStyle","externalViewEntity","externalHasEntity","readTextPermission","content","call","id","sessionId","React","createRef","nextProps","width","height","outline","PureComponent","propTypes","PropTypes","string","number","isRequired","arrayOf","CallItem","bool","func","array","object","defaultProps","undefined"],"mappings":"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","file":"index.js","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport { List } from 'react-virtualized';\nimport CallItem from '../CallItem';\nimport NoCalls from '../NoCalls';\n\nexport default class CallListV2 extends React.PureComponent {\n  constructor(props) {\n    super(props);\n    this.state = {\n      extendedIndex: null,\n    };\n    this._list = React.createRef();\n  }\n\n  componentWillReceiveProps(nextProps) {\n    const {\n      extendedIndex\n    } = this.state;\n    if (\n      extendedIndex !== null &&\n      this.props.calls[extendedIndex] !== nextProps.calls[extendedIndex]\n    ) {\n      this._setExtendedIndex(null);\n    }\n  }\n\n  _setExtendedIndex = (extendedIndex) => {\n    this.setState({\n      extendedIndex,\n    }, () => {\n      if (this._list && this._list.current) {\n        this._list.current.recomputeRowHeights(0);\n      }\n    });\n  }\n\n  _onSizeChanged = (index) => {\n    if (this.state.extendedIndex === index) {\n      this._setExtendedIndex(null);\n    } else {\n      this._setExtendedIndex(index);\n    }\n  }\n\n  _renderRowHeight = ({ index }) => {\n    // If we don't add extra height for the last item\n    // the toggle button will be cut off\n    const margin = index === this.props.calls.length - 1 ?\n      15 :\n      0;\n    const rowHeight = index === this.state.extendedIndex ?\n      this.props.extendedRowHeight :\n      this.props.rowHeight;\n    return rowHeight + margin;\n  }\n\n  _rowRender = ({ index, key, style }) => {\n    const {\n      className,\n      brand,\n      currentLocale,\n      calls,\n      areaCode,\n      countryCode,\n      onViewContact,\n      onCreateContact,\n      createEntityTypes,\n      onLogCall,\n      onClickToDial,\n      onClickToSms,\n      isLoggedContact,\n      disableLinks,\n      disableClickToDial,\n      outboundSmsPermission,\n      internalSmsPermission,\n      active,\n      dateTimeFormatter,\n      loggingMap,\n      webphoneAnswer,\n      webphoneReject,\n      webphoneHangup,\n      webphoneResume,\n      enableContactFallback,\n      autoLog,\n      showContactDisplayPlaceholder,\n      sourceIcons,\n      phoneTypeRenderer,\n      phoneSourceNameRenderer,\n      renderContactName,\n      renderExtraButton,\n      contactDisplayStyle,\n      externalViewEntity,\n      externalHasEntity,\n      readTextPermission,\n    } = this.props;\n\n    let content;\n    if (index >= calls.length) {\n      content = (\n        <div className={className}>\n          <NoCalls currentLocale={currentLocale} active={active} />\n        </div>\n      );\n    } else {\n      const call = calls[index];\n      content = (\n        <CallItem\n          key={call.id}\n          renderIndex={index}\n          extended={this.state.extendedIndex === index}\n          style={style}\n          call={call}\n          currentLocale={currentLocale}\n          brand={brand}\n          areaCode={areaCode}\n          countryCode={countryCode}\n          onViewContact={onViewContact}\n          onCreateContact={onCreateContact}\n          createEntityTypes={createEntityTypes}\n          onLogCall={onLogCall}\n          onClickToDial={onClickToDial}\n          onClickToSms={onClickToSms}\n          isLoggedContact={isLoggedContact}\n          disableLinks={disableLinks}\n          disableClickToDial={disableClickToDial}\n          outboundSmsPermission={outboundSmsPermission}\n          internalSmsPermission={internalSmsPermission}\n          active={active}\n          dateTimeFormatter={dateTimeFormatter}\n          isLogging={!!loggingMap[call.sessionId]}\n          webphoneAnswer={webphoneAnswer}\n          webphoneReject={webphoneReject}\n          webphoneHangup={webphoneHangup}\n          webphoneResume={webphoneResume}\n          enableContactFallback={enableContactFallback}\n          autoLog={autoLog}\n          showContactDisplayPlaceholder={showContactDisplayPlaceholder}\n          sourceIcons={sourceIcons}\n          phoneTypeRenderer={phoneTypeRenderer}\n          phoneSourceNameRenderer={phoneSourceNameRenderer}\n          renderContactName={renderContactName}\n          renderExtraButton={renderExtraButton}\n          contactDisplayStyle={contactDisplayStyle}\n          externalViewEntity={externalViewEntity}\n          externalHasEntity={externalHasEntity}\n          readTextPermission={readTextPermission}\n          onSizeChanged={this._onSizeChanged}\n          // disable animation when rendered with react-virtualized\n          withAnimation={false}\n        />\n      );\n    }\n\n    return (\n      <div key={key} style={style}>\n        {content}\n      </div>\n    );\n  };\n\n  render() {\n    const {\n      width,\n      height,\n      calls,\n      className,\n    } = this.props;\n\n    return (\n      <div>\n        <List\n          style={{ outline: 'none' }}\n          ref={this._list}\n          width={width}\n          height={height}\n          overscanRowCount={15}\n          className={className}\n          rowCount={calls.length}\n          rowHeight={this._renderRowHeight}\n          rowRenderer={this._rowRender}\n      />\n      </div>\n    );\n  }\n}\n\nCallListV2.propTypes = {\n  className: PropTypes.string,\n  width: PropTypes.number.isRequired,\n  height: PropTypes.number.isRequired,\n  brand: PropTypes.string.isRequired,\n  currentLocale: PropTypes.string.isRequired,\n  calls: PropTypes.arrayOf(CallItem.propTypes.call).isRequired,\n  active: PropTypes.bool,\n  areaCode: PropTypes.string.isRequired,\n  countryCode: PropTypes.string.isRequired,\n  onViewContact: PropTypes.func,\n  onCreateContact: PropTypes.func,\n  createEntityTypes: PropTypes.array,\n  onLogCall: PropTypes.func,\n  onClickToDial: PropTypes.func,\n  onClickToSms: PropTypes.func,\n  isLoggedContact: PropTypes.func,\n  loggingMap: PropTypes.object,\n  disableLinks: PropTypes.bool,\n  disableClickToDial: PropTypes.bool,\n  outboundSmsPermission: PropTypes.bool,\n  internalSmsPermission: PropTypes.bool,\n  dateTimeFormatter: PropTypes.func.isRequired,\n  webphoneAnswer: PropTypes.func,\n  webphoneReject: PropTypes.func,\n  webphoneHangup: PropTypes.func,\n  webphoneResume: PropTypes.func,\n  enableContactFallback: PropTypes.bool,\n  autoLog: PropTypes.bool,\n  showContactDisplayPlaceholder: PropTypes.bool,\n  sourceIcons: PropTypes.object,\n  phoneTypeRenderer: PropTypes.func,\n  phoneSourceNameRenderer: PropTypes.func,\n  renderContactName: PropTypes.func,\n  renderExtraButton: PropTypes.func,\n  contactDisplayStyle: PropTypes.string,\n  externalViewEntity: PropTypes.func,\n  externalHasEntity: PropTypes.func,\n  readTextPermission: PropTypes.bool,\n  rowHeight: PropTypes.number,\n  extendedRowHeight: PropTypes.number,\n};\n\nCallListV2.defaultProps = {\n  className: null,\n  active: false,\n  disableLinks: false,\n  disableClickToDial: false,\n  outboundSmsPermission: false,\n  internalSmsPermission: false,\n  onViewContact: undefined,\n  onCreateContact: undefined,\n  createEntityTypes: undefined,\n  onLogCall: undefined,\n  isLoggedContact: undefined,\n  onClickToDial: undefined,\n  onClickToSms: undefined,\n  loggingMap: {},\n  webphoneAnswer: undefined,\n  webphoneReject: undefined,\n  webphoneHangup: undefined,\n  webphoneResume: undefined,\n  enableContactFallback: undefined,\n  showContactDisplayPlaceholder: true,\n  autoLog: false,\n  sourceIcons: undefined,\n  phoneTypeRenderer: undefined,\n  phoneSourceNameRenderer: undefined,\n  renderContactName: undefined,\n  renderExtraButton: undefined,\n  contactDisplayStyle: undefined,\n  externalViewEntity: undefined,\n  externalHasEntity: undefined,\n  readTextPermission: true,\n  rowHeight: 65,\n  extendedRowHeight: 130,\n};\n"]}