{"version":3,"sources":["components/ConversationList/index.js"],"names":["NoMessages","props","styles","noMessages","placeholder","propTypes","PropTypes","string","isRequired","ConversationList","onScroll","totalScrollHeight","messagesListBody","scrollHeight","clientHeight","currentScrollTop","scrollTop","_scrollTop","loadNextPage","prevProps","typeFilter","className","currentLocale","conversations","perPage","disableLinks","loadingNextPage","childProps","content","length","map","item","id","loading","root","list","Component","brand","arrayOf","shape","number","conversationId","subject","bool","showConversationDetail","func","readMessage","markMessage","unmarkMessage","dateTimeFormatter","showContactDisplayPlaceholder","sourceIcons","object","showGroupNumberName","renderExtraButton","defaultProps","undefined"],"mappings":"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","file":"index.js","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport classnames from 'classnames';\nimport MessageItem from '../MessageItem';\nimport styles from './styles.scss';\n\nfunction NoMessages(props) {\n  return (\n    <p className={styles.noMessages}>{props.placeholder}</p>\n  );\n}\n\nNoMessages.propTypes = {\n  placeholder: PropTypes.string.isRequired,\n};\n\nexport default class ConversationList extends Component {\n  constructor(props) {\n    super(props);\n    this._scrollTop = 0;\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.props.typeFilter === prevProps.typeFilter) {\n      return;\n    }\n    if (this.messagesListBody) {\n      this.messagesListBody.scrollTop = 0;\n    }\n  }\n\n  onScroll = () => {\n    const totalScrollHeight = this.messagesListBody.scrollHeight;\n    const { clientHeight } = this.messagesListBody;\n    const currentScrollTop = this.messagesListBody.scrollTop;\n    // load next page if scroll near buttom\n    if (\n      (totalScrollHeight - this._scrollTop) > (clientHeight + 10) &&\n      (totalScrollHeight - currentScrollTop) <= (clientHeight + 10)\n    ) {\n      if (typeof this.props.loadNextPage === 'function') {\n        this.props.loadNextPage();\n      }\n    }\n    this._scrollTop = currentScrollTop;\n  }\n\n  render() {\n    const {\n      className,\n      currentLocale,\n      conversations,\n      perPage,\n      disableLinks,\n      placeholder,\n      loadingNextPage,\n      ...childProps\n    } = this.props;\n    let content;\n    if (conversations && conversations.length) {\n      content = conversations.map(item => (\n        <MessageItem\n          {...childProps}\n          conversation={item}\n          currentLocale={currentLocale}\n          key={item.id}\n          disableLinks={disableLinks}\n        />\n      ));\n    } else if (!loadingNextPage) {\n      content = (<NoMessages placeholder={placeholder} />);\n    }\n    const loading = loadingNextPage ? (\n      <div className={styles.loading}>\n        Loading...\n      </div>\n    ) : null;\n    return (\n      <div\n        className={classnames(styles.root, className)}\n        onScroll={this.onScroll}\n        ref={(list) => { this.messagesListBody = list; }}\n        >\n        {content}\n        {loading}\n      </div>\n    );\n  }\n}\n\nConversationList.propTypes = {\n  brand: PropTypes.string.isRequired,\n  currentLocale: PropTypes.string.isRequired,\n  conversations: PropTypes.arrayOf(PropTypes.shape({\n    id: PropTypes.number,\n    conversationId: PropTypes.string.isRequired,\n    subject: PropTypes.string,\n  })).isRequired,\n  disableLinks: PropTypes.bool,\n  perPage: PropTypes.number,\n  className: PropTypes.string,\n  showConversationDetail: PropTypes.func.isRequired,\n  readMessage: PropTypes.func.isRequired,\n  markMessage: PropTypes.func.isRequired,\n  unmarkMessage: PropTypes.func.isRequired,\n  dateTimeFormatter: PropTypes.func,\n  showContactDisplayPlaceholder: PropTypes.bool,\n  sourceIcons: PropTypes.object,\n  showGroupNumberName: PropTypes.bool,\n  placeholder: PropTypes.string,\n  typeFilter: PropTypes.string,\n  loadNextPage: PropTypes.func,\n  loadingNextPage: PropTypes.bool,\n  renderExtraButton: PropTypes.func,\n};\nConversationList.defaultProps = {\n  perPage: 20,\n  className: undefined,\n  disableLinks: false,\n  dateTimeFormatter: undefined,\n  showContactDisplayPlaceholder: true,\n  sourceIcons: undefined,\n  showGroupNumberName: false,\n  placeholder: undefined,\n  loadNextPage: undefined,\n  loadingNextPage: false,\n  typeFilter: undefined,\n  renderExtraButton: undefined,\n};\n"]}