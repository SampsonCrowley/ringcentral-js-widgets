{"version":3,"sources":["lib/transformLoader/index.js"],"names":["transformLoader","noChunk","through","obj","file","enc","done","content","contents","toString","folderPath","path","dirname","fs","readdir","isLocaleFile","files","filter","loader","Buffer","from","push","transform"],"mappings":";;;;;;;;;;;;;;kBAOwBA,e;;AAPxB;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;AACA;;;;AAEe,SAASA,eAAT,GAEP;AAAA,iFAAJ,EAAI;AAAA,0BADNC,OACM;AAAA,MADNA,OACM,gCADI,KACJ;;AACN,SAAOC,kBAAQC,GAAR;AAAA,yFAAY,iBAAyBC,IAAzB,EAA+BC,GAA/B,EAAoCC,IAApC;AAAA;AAAA;AAAA;AAAA;AAAA;AACXC,qBADW,GACDH,KAAKI,QAAL,CAAcC,QAAd,CAAuBJ,GAAvB,CADC;;AAAA,mBAEb,gCAAaE,OAAb,CAFa;AAAA;AAAA;AAAA;;AAGTG,wBAHS,GAGIC,eAAKC,OAAL,CAAaR,KAAKO,IAAlB,CAHJ;AAAA;AAAA,qBAIME,kBAAGC,OAAH,CAAWJ,UAAX,CAJN;;AAAA;AAAA,4BAIqCK,0BAJrC;AAITC,mBAJS,iBAI8BC,MAJ9B;AAKTC,oBALS,GAKA,qCAAsB;AACnCF,4BADmC;AAEnCf,yBAASA,WAAW,4BAASM,OAAT;AAFe,eAAtB,CALA;;AASfH,mBAAKI,QAAL,GAAgBW,OAAOC,IAAP,CAAYF,MAAZ,EAAoB,MAApB,CAAhB;;AATe;AAWjB,mBAAKG,IAAL,CAAUjB,IAAV;AACAE;;AAZiB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAZ;;AAAA,aAA2BgB,SAA3B;AAAA;AAAA;;AAAA,WAA2BA,SAA3B;AAAA,MAAP;AAcD","file":"index.js","sourcesContent":["import through from 'through2';\nimport fs from 'fs-extra';\nimport path from 'path';\nimport generateLoaderContent from '../generateLoaderContent';\nimport { isLocaleFile } from '../isLocaleFile';\nimport { isLoaderFile, noChunks } from '../isLoaderFile';\n\nexport default function transformLoader({\n  noChunk = false\n} = {}) {\n  return through.obj(async function transform(file, enc, done) {\n    const content = file.contents.toString(enc);\n    if (isLoaderFile(content)) {\n      const folderPath = path.dirname(file.path);\n      const files = (await fs.readdir(folderPath)).filter(isLocaleFile);\n      const loader = generateLoaderContent({\n        files,\n        noChunk: noChunk || noChunks(content),\n      });\n      file.contents = Buffer.from(loader, 'utf8');\n    }\n    this.push(file);\n    done();\n  });\n}\n"]}