{"version":3,"sources":["integration-test/utils/WaitUtil.js"],"names":["isTimeOut","startTime","timeoutInSeconds","Date","now","waitUntilNotNull","source","checkItem","Promise","resolve","timer","setInterval","clearInterval","console","error","checkValue","undefined","e","waitUntilEqual","expect","retryTtl","waitUntilObjectSizeGreaterThan","compareSize","log","length","waitInSeconds","seconds","setTimeout"],"mappings":";;;;;;;;;;;;;;;;;;AAAA,SAASA,SAAT,CAAmBC,SAAnB,EAA8BC,gBAA9B,EAAgD;AAC9C,SAAOC,IAAI,CAACC,GAAL,KAAaH,SAAb,GAAyBC,gBAAgB,GAAG,IAAnD;AACD;;AAEM,SAASG,gBAAT,CAA0BC,MAA1B,EAAkCC,SAAlC,EAA6CL,gBAA7C,EAA+D;AACpE,MAAMD,SAAS,GAAGE,IAAI,CAACC,GAAL,EAAlB;AACA,SAAO,IAAII,OAAJ,CAAY,UAACC,OAAD,EAAa;AAC9B,QAAMC,KAAK,GAAGC,WAAW,CAAC,YAAM;AAC9B,UAAIX,SAAS,CAACC,SAAD,EAAYC,gBAAZ,CAAb,EAA4C;AAC1CU,QAAAA,aAAa,CAACF,KAAD,CAAb;AACAD,QAAAA,OAAO,CAAC,KAAD,CAAP;AACAI,QAAAA,OAAO,CAACC,KAAR,4BAAkCP,SAAlC;AACD;;AACD,UAAI;AACF,YAAMQ,UAAU,GAAGT,MAAM,EAAzB;;AACA,YAAIS,UAAU,KAAK,IAAf,IAAuBA,UAAU,KAAKC,SAA1C,EAAqD;AACnDJ,UAAAA,aAAa,CAACF,KAAD,CAAb;AACAD,UAAAA,OAAO,CAAC,IAAD,CAAP;AACD;AACF,OAND,CAME,OAAOQ,CAAP,EAAU;AACVJ,QAAAA,OAAO,CAACC,KAAR,CAAcG,CAAd;AACD;AACF,KAfwB,EAetB,GAfsB,CAAzB;AAgBD,GAjBM,CAAP;AAkBD;;AAEM,SAASC,cAAT,CACLZ,MADK,EAELC,SAFK,EAGLY,MAHK,EAILjB,gBAJK,EAML;AAAA,MADAkB,QACA,uEADW,GACX;AACA,MAAMnB,SAAS,GAAGE,IAAI,CAACC,GAAL,EAAlB;AACA,SAAO,IAAII,OAAJ,CAAY,UAACC,OAAD,EAAa;AAC9B,QAAMC,KAAK,GAAGC,WAAW,CAAC,YAAM;AAC9B,UAAIX,SAAS,CAACC,SAAD,EAAYC,gBAAZ,CAAb,EAA4C;AAC1CU,QAAAA,aAAa,CAACF,KAAD,CAAb;AACAD,QAAAA,OAAO,CAAC,KAAD,CAAP;AACAI,QAAAA,OAAO,CAACC,KAAR,4BAAkCP,SAAlC,qBAAsDY,MAAtD;AACD;;AACD,UAAI;AACF,YAAMJ,UAAU,GAAGT,MAAM,EAAzB;;AACA,YAAIS,UAAU,KAAKI,MAAnB,EAA2B;AACzBP,UAAAA,aAAa,CAACF,KAAD,CAAb;AACAD,UAAAA,OAAO,CAAC,IAAD,CAAP;AACD;AACF,OAND,CAME,OAAOQ,CAAP,EAAU;AACVJ,QAAAA,OAAO,CAACC,KAAR,CAAcG,CAAd;AACD;AACF,KAfwB,EAetBG,QAfsB,CAAzB;AAgBD,GAjBM,CAAP;AAkBD;;AAEM,SAASC,8BAAT,CACLf,MADK,EAELC,SAFK,EAGLe,WAHK,EAILpB,gBAJK,EAKL;AACA,MAAMD,SAAS,GAAGE,IAAI,CAACC,GAAL,EAAlB;AACA,SAAO,IAAII,OAAJ,CAAY,UAACC,OAAD,EAAa;AAC9B,QAAMC,KAAK,GAAGC,WAAW,CAAC,YAAM;AAC9B,UAAIX,SAAS,CAACC,SAAD,EAAYC,gBAAZ,CAAb,EAA4C;AAC1CU,QAAAA,aAAa,CAACF,KAAD,CAAb;AACAD,QAAAA,OAAO,CAAC,KAAD,CAAP;AACAI,QAAAA,OAAO,CAACU,GAAR,4BAAgChB,SAAhC;AACD;;AACD,UAAI;AACF,YAAMQ,UAAU,GAAGT,MAAM,EAAzB;;AACA,YAAIS,UAAU,KAAK,IAAf,IAAuBA,UAAU,CAACS,MAAX,GAAoBF,WAA/C,EAA4D;AAC1DV,UAAAA,aAAa,CAACF,KAAD,CAAb;AACAD,UAAAA,OAAO,CAAC,IAAD,CAAP;AACD;AACF,OAND,CAME,OAAOQ,CAAP,EAAU;AACVJ,QAAAA,OAAO,CAACU,GAAR,CAAYN,CAAZ;AACD;AACF,KAfwB,EAetB,GAfsB,CAAzB;AAgBD,GAjBM,CAAP;AAkBD;;AAEM,SAASQ,aAAT,CAAuBC,OAAvB,EAAgC;AACrC,SAAO,IAAIlB,OAAJ,CAAY,UAACC,OAAD,EAAa;AAC9BkB,IAAAA,UAAU,CAAC,YAAM;AACflB,MAAAA,OAAO,CAAC,IAAD,CAAP;AACD,KAFS,EAEPiB,OAAO,GAAG,IAFH,CAAV;AAGD,GAJM,CAAP;AAKD","sourcesContent":["function isTimeOut(startTime, timeoutInSeconds) {\n  return Date.now() - startTime > timeoutInSeconds * 1000;\n}\n\nexport function waitUntilNotNull(source, checkItem, timeoutInSeconds) {\n  const startTime = Date.now();\n  return new Promise((resolve) => {\n    const timer = setInterval(() => {\n      if (isTimeOut(startTime, timeoutInSeconds)) {\n        clearInterval(timer);\n        resolve(false);\n        console.error(`Timeout wait for ${checkItem}  to be not null`);\n      }\n      try {\n        const checkValue = source();\n        if (checkValue !== null && checkValue !== undefined) {\n          clearInterval(timer);\n          resolve(true);\n        }\n      } catch (e) {\n        console.error(e);\n      }\n    }, 500);\n  });\n}\n\nexport function waitUntilEqual(\n  source,\n  checkItem,\n  expect,\n  timeoutInSeconds,\n  retryTtl = 500,\n) {\n  const startTime = Date.now();\n  return new Promise((resolve) => {\n    const timer = setInterval(() => {\n      if (isTimeOut(startTime, timeoutInSeconds)) {\n        clearInterval(timer);\n        resolve(false);\n        console.error(`Timeout wait for ${checkItem}  to be ${expect}`);\n      }\n      try {\n        const checkValue = source();\n        if (checkValue === expect) {\n          clearInterval(timer);\n          resolve(true);\n        }\n      } catch (e) {\n        console.error(e);\n      }\n    }, retryTtl);\n  });\n}\n\nexport function waitUntilObjectSizeGreaterThan(\n  source,\n  checkItem,\n  compareSize,\n  timeoutInSeconds,\n) {\n  const startTime = Date.now();\n  return new Promise((resolve) => {\n    const timer = setInterval(() => {\n      if (isTimeOut(startTime, timeoutInSeconds)) {\n        clearInterval(timer);\n        resolve(false);\n        console.log(`Timeout wait for ${checkItem} to be not null`);\n      }\n      try {\n        const checkValue = source();\n        if (checkValue !== null && checkValue.length > compareSize) {\n          clearInterval(timer);\n          resolve(true);\n        }\n      } catch (e) {\n        console.log(e);\n      }\n    }, 500);\n  });\n}\n\nexport function waitInSeconds(seconds) {\n  return new Promise((resolve) => {\n    setTimeout(() => {\n      resolve(null);\n    }, seconds * 1000);\n  });\n}\n"],"file":"WaitUtil.js"}