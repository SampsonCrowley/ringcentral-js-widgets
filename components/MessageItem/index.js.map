{"version":3,"sources":["components/MessageItem/index.js"],"names":["ConversationIcon","group","type","currentLocale","direction","title","icon","messageTypes","voiceMail","i18n","getString","styles","fax","messageDirection","inbound","conversationIcon","propTypes","PropTypes","bool","string","defaultProps","undefined","MessageItem","props","preventEventPropogation","e","target","currentTarget","stopPropagation","onSelectContact","value","idx","selected","showContactDisplayPlaceholder","parseInt","_userSelection","setState","autoLog","logConversation","redirect","prefill","getSelectedContact","state","contactMatches","conversation","correspondentMatches","length","viewSelectedContact","onViewContact","contact","phoneNumber","getPhoneNumber","matchEntitiesIds","getMatchEntitiesIds","createSelectedContact","bind","clickToDial","onClickToDial","fromType","onClickToSms","updateTypeFilter","text","onClickItem","contactDisplay","contains","toggleExtended","onClickWrapper","showConversationDetail","conversationId","onPlayVoicemail","unreadCounts","readMessage","onMarkMessage","markMessage","onUnmarkMessage","unmarkMessage","onPreviewFax","uri","previewFaxMessages","onDeleteMessage","deleteMessage","getDisableClickToSms","areaCode","countryCode","internalSmsPermission","outboundSmsPermission","disableClickToSms","parsedInfo","isExtension","hasPlus","number","getInitialContactIndex","isLogging","isCreating","extended","preState","_mounted","nextProps","conversationMatches","lastMatchedCorrespondentEntity","index","findIndex","id","map","item","correspondents","extensionNumber","groupNumbers","correspondent","name","entityType","onCreateContact","enableContactFallback","getFallbackContactName","onLogConversation","correspondentEntity","mmsAttachment","contentType","indexOf","subject","voicemailAttachment","duration","pageCount","faxPageCount","creationTime","dateTimeFormatter","utcTimestamp","console","error","brand","faxAttachment","parentDisableLinks","disableLinks","disableClickToDial","createEntityTypes","sourceIcons","phoneTypeRenderer","phoneSourceNameRenderer","showGroupNumberName","renderExtraButton","isVoicemail","isFax","getGroupPhoneNumbers","fallbackName","detail","getDetail","player","slideMenuHeight","extraButton","root","wrapper","unread","infoWrapper","embellishInfoWrapper","ref","selectedValue","dropdownSelect","detailsWithTime","details","separatrix","extendIcon","slideMenu","playContainer","actionMenuList","Component","shape","isRequired","arrayOf","func","array","object"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport classnames from 'classnames';\nimport messageTypes from 'ringcentral-integration/enums/messageTypes';\nimport messageDirection from 'ringcentral-integration/enums/messageDirection';\nimport parseNumber from 'ringcentral-integration/lib/parseNumber';\nimport {\n  messageIsTextMessage,\n  messageIsFax\n} from 'ringcentral-integration/lib/messageHelper';\n\nimport formatDuration from '../../lib/formatDuration';\n\nimport ContactDisplay from '../ContactDisplay';\nimport ActionMenuList from '../ActionMenuList';\nimport VoicemailPlayer from '../VoicemailPlayer';\nimport SlideMenu from '../SlideMenu';\n\nimport VoicemailIcon from '../../assets/images/VoicemailIcon.svg';\nimport FaxInboundIcon from '../../assets/images/FaxInbound.svg';\nimport FaxOutboundIcon from '../../assets/images/FaxOutbound.svg';\n\n\nimport ComposeTextIcon from '../../assets/images/ComposeText.svg';\nimport GroupConversationIcon from '../../assets/images/GroupConversation.svg';\n\nimport styles from './styles.scss';\nimport i18n from './i18n';\n\nfunction ConversationIcon({\n  group,\n  type,\n  currentLocale,\n  direction,\n}) {\n  let title;\n  let icon;\n  switch (type) {\n    case messageTypes.voiceMail:\n      title = i18n.getString(messageTypes.voiceMail, currentLocale);\n      icon = <VoicemailIcon width={23} className={styles.icon} />;\n      break;\n    case messageTypes.fax:\n      title = i18n.getString(messageTypes.fax, currentLocale);\n      icon = direction === messageDirection.inbound ?\n        <FaxInboundIcon width={21} className={styles.icon} /> :\n        <FaxOutboundIcon width={21} className={styles.icon} />;\n      break;\n    default:\n      title = group ?\n        i18n.getString('groupConversation', currentLocale) :\n        i18n.getString('conversation', currentLocale);\n      icon = group ?\n        <GroupConversationIcon width={19} className={styles.icon} /> :\n        <ComposeTextIcon width={18} className={styles.icon} />;\n  }\n  return (\n    <div className={styles.conversationIcon}>\n      <span title={title}>\n        {icon}\n      </span>\n    </div>\n  );\n}\nConversationIcon.propTypes = {\n  group: PropTypes.bool,\n  type: PropTypes.string,\n  currentLocale: PropTypes.string,\n  direction: PropTypes.string,\n};\nConversationIcon.defaultProps = {\n  group: false,\n  type: undefined,\n  currentLocale: undefined,\n  direction: undefined,\n};\n\nexport default class MessageItem extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      selected: this.getInitialContactIndex(),\n      isLogging: false,\n      isCreating: false,\n      extended: false,\n    };\n\n    this.toggleExtended = () => {\n      this.setState(preState => ({\n        extended: !preState.extended,\n      }));\n    };\n    this._userSelection = false;\n    /* [RCINT-4301] onSelection would trigger some state changes that would push new\n     * properties before the state has been changed. Which would reset the selected value.\n     */\n  }\n  componentDidMount() {\n    this._mounted = true;\n  }\n  componentWillReceiveProps(nextProps) {\n    if (\n      !this._userSelection &&\n      (\n        nextProps.conversation.conversationMatches !==\n        this.props.conversation.conversationMatches ||\n        nextProps.conversation.correspondentMatches !==\n        this.props.conversation.correspondentMatches\n      )\n    ) {\n      this.setState({\n        selected: this.getInitialContactIndex(nextProps),\n      });\n    }\n  }\n  componentWillUnmount() {\n    this._mounted = false;\n  }\n\n  preventEventPropogation = (e) => {\n    if (e.target !== e.currentTarget) {\n      e.stopPropagation();\n    }\n  }\n\n  onSelectContact = (value, idx) => {\n    const selected = this.props.showContactDisplayPlaceholder\n      ? parseInt(idx, 10) - 1 : parseInt(idx, 10);\n    this._userSelection = true;\n    this.setState({\n      selected,\n    });\n    if (this.props.autoLog) {\n      this.logConversation({ redirect: false, selected, prefill: false });\n    }\n  }\n  getInitialContactIndex(nextProps = this.props) {\n    const {\n      correspondentMatches,\n      lastMatchedCorrespondentEntity,\n    } = nextProps.conversation;\n    if (lastMatchedCorrespondentEntity) {\n      const index = correspondentMatches.findIndex(contact => (\n        contact.id === lastMatchedCorrespondentEntity.id\n      ));\n      if (index > -1) return index;\n    }\n    return this.props.showContactDisplayPlaceholder ? -1 : 0;\n  }\n  getSelectedContact = (selected = this.state.selected) => {\n    const contactMatches = this.props.conversation.correspondentMatches;\n    return (selected > -1 && contactMatches[selected]) ||\n      (contactMatches.length === 1 && contactMatches[0]) ||\n      null;\n  }\n  getMatchEntitiesIds() {\n    const contactMatches = this.props.conversation.correspondentMatches || [];\n    return contactMatches.map(item => item.id);\n  }\n  getPhoneNumber() {\n    const { correspondents } = this.props.conversation;\n    return (correspondents.length === 1 && correspondents[0] &&\n      (correspondents[0].phoneNumber || correspondents[0].extensionNumber)) || undefined;\n  }\n  getGroupPhoneNumbers() {\n    const { correspondents } = this.props.conversation;\n    const groupNumbers = correspondents.length > 1 ?\n      correspondents.map(correspondent =>\n        correspondent.extensionNumber || correspondent.phoneNumber || undefined\n      )\n      : null;\n    return groupNumbers;\n  }\n  getFallbackContactName() {\n    const { correspondents } = this.props.conversation;\n    return (correspondents.length === 1 &&\n      (correspondents[0].name)) || undefined;\n  }\n  viewSelectedContact = () => {\n    if (typeof this.props.onViewContact === 'function') {\n      this.props.onViewContact({\n        contact: this.getSelectedContact(),\n        phoneNumber: this.getPhoneNumber(),\n        matchEntitiesIds: this.getMatchEntitiesIds()\n      });\n    }\n  }\n  async createSelectedContact(entityType) {\n    // console.log('click createSelectedContact!!', entityType);\n    if (typeof this.props.onCreateContact === 'function' &&\n      this._mounted &&\n      !this.state.isCreating) {\n      this.setState({\n        isCreating: true,\n      });\n      // console.log('start to create: isCreating...', this.state.isCreating);\n      const phoneNumber = this.getPhoneNumber();\n      await this.props.onCreateContact({\n        phoneNumber,\n        name: this.props.enableContactFallback ? this.getFallbackContactName() : '',\n        entityType,\n      });\n\n      if (this._mounted) {\n        this.setState({\n          isCreating: false,\n        });\n        // console.log('created: isCreating...', this.state.isCreating);\n      }\n    }\n  }\n  createSelectedContact = this.createSelectedContact.bind(this);\n\n  async logConversation({ redirect = true, selected, prefill = true } = {}) {\n    if (typeof this.props.onLogConversation === 'function' &&\n      this._mounted &&\n      !this.state.isLogging\n    ) {\n      this.setState({\n        isLogging: true,\n      });\n      await this.props.onLogConversation({\n        correspondentEntity: this.getSelectedContact(selected),\n        conversationId: this.props.conversation.conversationId,\n        redirect,\n        prefill,\n      });\n      if (this._mounted) {\n        this.setState({\n          isLogging: false,\n        });\n      }\n    }\n  }\n  logConversation = this.logConversation.bind(this)\n\n  clickToDial = () => {\n    if (this.props.onClickToDial) {\n      const contact = this.getSelectedContact() || {};\n      const phoneNumber = this.getPhoneNumber();\n\n      if (phoneNumber) {\n        this.props.onClickToDial({\n          ...contact,\n          phoneNumber,\n          fromType: this.props.conversation.type\n        });\n      }\n    }\n  }\n  onClickToSms = () => {\n    if (this.props.onClickToSms) {\n      const contact = this.getSelectedContact() || {};\n      const phoneNumber = this.getPhoneNumber();\n\n      if (phoneNumber) {\n        this.props.updateTypeFilter(messageTypes.text);\n        this.props.onClickToSms({\n          ...contact,\n          phoneNumber,\n        });\n      }\n    }\n  }\n  onClickItem = (e) => {\n    if (\n      this.contactDisplay &&\n      this.contactDisplay.contains(e.target)\n    ) {\n      return;\n    }\n\n    this.toggleExtended();\n  }\n  onClickWrapper = (e) => {\n    if (\n      this.contactDisplay &&\n      this.contactDisplay.contains(e.target)\n    ) {\n      return;\n    }\n    if (messageIsTextMessage(this.props.conversation)) {\n      this.props.showConversationDetail(this.props.conversation.conversationId);\n    }\n  }\n\n  onPlayVoicemail = () => {\n    if (\n      this.props.conversation.unreadCounts > 0\n    ) {\n      this.props.readMessage(this.props.conversation.conversationId);\n    }\n  }\n\n  onMarkMessage = () => {\n    if (\n      this.props.conversation.unreadCounts === 0\n    ) {\n      this.props.markMessage(this.props.conversation.conversationId);\n    }\n  }\n\n  onUnmarkMessage = () => {\n    if (\n      this.props.conversation.unreadCounts > 0\n    ) {\n      this.props.unmarkMessage(this.props.conversation.conversationId);\n    }\n  }\n  onPreviewFax = (uri) => {\n    this.props.previewFaxMessages(uri, this.props.conversation.conversationId);\n  }\n  getDetail() {\n    const {\n      conversation,\n      currentLocale,\n    } = this.props;\n    if (messageIsTextMessage(conversation)) {\n      if (conversation.mmsAttachment && conversation.mmsAttachment.contentType.indexOf('image') > -1) {\n        return i18n.getString('imageAttachment', currentLocale);\n      }\n      return conversation.subject;\n    }\n    if (conversation.voicemailAttachment) {\n      const { duration } = conversation.voicemailAttachment;\n      return `${i18n.getString('voiceMessage', currentLocale)} (${formatDuration(duration)})`;\n    }\n    if (messageIsFax(conversation)) {\n      const pageCount = parseInt(conversation.faxPageCount, 10);\n      if (conversation.direction === messageDirection.inbound) {\n        return `${i18n.getString('faxReceived', currentLocale)}(${pageCount} ${i18n.getString('pages', currentLocale)})`;\n      }\n      return `${i18n.getString('faxSent', currentLocale)}(${pageCount} ${i18n.getString('pages', currentLocale)})`;\n    }\n    return '';\n  }\n\n  onDeleteMessage = () => {\n    this.props.deleteMessage(this.props.conversation.conversationId);\n  }\n\n  dateTimeFormatter(creationTime) {\n    try {\n      return this.props.dateTimeFormatter({ utcTimestamp: creationTime });\n    } catch (e) {\n      console.error('Format date time error', creationTime);\n      return creationTime;\n    }\n  }\n\n  getDisableClickToSms = () => {\n    const {\n      areaCode,\n      countryCode,\n      onClickToSms,\n      internalSmsPermission,\n      outboundSmsPermission,\n    } = this.props;\n    const phoneNumber = this.getPhoneNumber();\n    let disableClickToSms = false;\n    if (phoneNumber) {\n      const parsedInfo = parseNumber({\n        phoneNumber,\n        countryCode,\n        areaCode,\n      });\n      const isExtension = !parsedInfo.hasPlus &&\n        parsedInfo.number && parsedInfo.number.length <= 6;\n      disableClickToSms = !(\n        onClickToSms &&\n        (\n          isExtension ?\n            internalSmsPermission :\n            outboundSmsPermission\n        )\n      );\n    }\n    return disableClickToSms;\n  }\n\n  render() {\n    const {\n      areaCode,\n      brand,\n      countryCode,\n      currentLocale,\n      conversation: {\n        unreadCounts,\n        correspondents,\n        correspondentMatches,\n        creationTime,\n        isLogging,\n        conversationMatches,\n        type,\n        direction,\n        voicemailAttachment,\n        faxAttachment,\n      },\n      disableLinks: parentDisableLinks,\n      disableClickToDial,\n      onClickToDial,\n      onClickToSms,\n      onLogConversation,\n      onViewContact,\n      onCreateContact,\n      createEntityTypes,\n      enableContactFallback,\n      showContactDisplayPlaceholder,\n      sourceIcons,\n      phoneTypeRenderer,\n      phoneSourceNameRenderer,\n      showGroupNumberName,\n      renderExtraButton,\n    } = this.props;\n    let disableLinks = parentDisableLinks;\n    const isVoicemail = type === messageTypes.voiceMail;\n    const isFax = type === messageTypes.fax;\n    if (isVoicemail && !voicemailAttachment) {\n      disableLinks = true;\n    }\n    if (isFax && !faxAttachment) {\n      disableLinks = true;\n    }\n    const groupNumbers = this.getGroupPhoneNumbers();\n    const phoneNumber = this.getPhoneNumber();\n    const fallbackName = this.getFallbackContactName();\n    const detail = this.getDetail();\n    const disableClickToSms = this.getDisableClickToSms();\n    let player;\n    let slideMenuHeight = 60;\n    if (isVoicemail) {\n      player = (\n        <VoicemailPlayer\n          className={styles.player}\n          uri={voicemailAttachment.uri}\n          duration={voicemailAttachment.duration}\n          onPlay={this.onPlayVoicemail}\n          disabled={disableLinks}\n          currentLocale={currentLocale}\n        />\n      );\n      slideMenuHeight = 88;\n    }\n    const extraButton = renderExtraButton ?\n      renderExtraButton(\n        this.props.conversation,\n        {\n          logConversation: this.logConversation,\n          isLogging: isLogging || this.state.isLogging,\n        }\n      )\n      : null;\n    return (\n      <div data-sign=\"messageItem\" className={styles.root} onClick={this.onClickItem}>\n        <div\n          className={classnames(\n            styles.wrapper,\n            unreadCounts && styles.unread\n          )}\n          onClick={this.onClickWrapper}\n        >\n          <ConversationIcon\n            group={correspondents.length > 1}\n            type={type}\n            currentLocale={currentLocale}\n            direction={direction}\n          />\n          <div className={classnames(\n            styles.infoWrapper,\n            !extraButton && styles.embellishInfoWrapper\n          )}>\n            <ContactDisplay\n              reference={(ref) => { this.contactDisplay = ref; }}\n              className={classnames(\n                styles.contactDisplay,\n                unreadCounts && styles.unread\n              )}\n              selectedClassName={styles.selectedValue}\n              selectClassName={styles.dropdownSelect}\n              brand={brand}\n              contactMatches={correspondentMatches}\n              selected={this.state.selected}\n              onSelectContact={this.onSelectContact}\n              disabled={disableLinks}\n              isLogging={isLogging || this.state.isLogging}\n              fallBackName={fallbackName}\n              areaCode={areaCode}\n              countryCode={countryCode}\n              phoneNumber={phoneNumber}\n              groupNumbers={groupNumbers}\n              showGroupNumberName={showGroupNumberName}\n              currentLocale={currentLocale}\n              enableContactFallback={enableContactFallback}\n              stopPropagation={false}\n              showType={false}\n              showPlaceholder={showContactDisplayPlaceholder}\n              sourceIcons={sourceIcons}\n              phoneTypeRenderer={phoneTypeRenderer}\n              phoneSourceNameRenderer={phoneSourceNameRenderer}\n            />\n            <div className={styles.detailsWithTime}>\n              <div className={styles.details} title={detail}>\n                {detail}\n              </div>\n              <div className={styles.separatrix}>|</div>\n              <div className={styles.creationTime}>\n                {this.dateTimeFormatter(creationTime)}\n              </div>\n            </div>\n          </div>\n          {extraButton}\n        </div>\n        <SlideMenu\n          extended={this.state.extended}\n          onToggle={this.toggleExtended}\n          extendIconClassName={styles.extendIcon}\n          className={styles.slideMenu}\n          minHeight={0}\n          maxHeight={slideMenuHeight}\n        >\n          <div className={styles.playContainer} onClick={this.preventEventPropogation}>\n            {player}\n          </div>\n          <ActionMenuList\n            className={styles.actionMenuList}\n            currentLocale={currentLocale}\n            onLog={\n              isVoicemail || isFax || renderExtraButton ?\n                undefined : (onLogConversation && this.logConversation)\n            }\n            onViewEntity={onViewContact && this.viewSelectedContact}\n            onCreateEntity={onCreateContact && this.createSelectedContact}\n            createEntityTypes={createEntityTypes}\n            hasEntity={correspondents.length === 1 && !!correspondentMatches.length}\n            onClickToDial={!isFax ? (onClickToDial && this.clickToDial) : undefined}\n            onClickToSms={isVoicemail ? (onClickToSms && this.onClickToSms) : undefined}\n            disableClickToSms={disableClickToSms}\n            phoneNumber={phoneNumber}\n            disableLinks={disableLinks}\n            disableClickToDial={disableClickToDial}\n            isLogging={isLogging || this.state.isLogging}\n            isLogged={conversationMatches.length > 0}\n            isCreating={this.state.isCreating}\n            addLogTitle={i18n.getString('addLog', currentLocale)}\n            editLogTitle={i18n.getString('editLog', currentLocale)}\n            callTitle={i18n.getString('call', currentLocale)}\n            textTitle={i18n.getString('text', currentLocale)}\n            createEntityTitle={i18n.getString('addEntity', currentLocale)}\n            viewEntityTitle={i18n.getString('viewDetails', currentLocale)}\n            stopPropagation={false}\n            onDelete={isVoicemail ? this.onDeleteMessage : undefined}\n            deleteTitle={i18n.getString('delete', currentLocale)}\n            marked={unreadCounts > 0}\n            onMark={(isVoicemail || (isFax && direction === messageDirection.inbound)) ?\n              this.onMarkMessage : undefined}\n            onUnmark={(isVoicemail || (isFax && direction === messageDirection.inbound)) ?\n              this.onUnmarkMessage : undefined}\n            onPreview={isFax ? this.onPreviewFax : undefined}\n            markTitle={i18n.getString('mark', currentLocale)}\n            unmarkTitle={i18n.getString('unmark', currentLocale)}\n            faxAttachment={faxAttachment}\n            previewTitle={i18n.getString('preview', currentLocale)}\n            downloadTitle={i18n.getString('download', currentLocale)}\n          />\n        </SlideMenu>\n      </div>\n    );\n  }\n}\n\nMessageItem.propTypes = {\n  conversation: PropTypes.shape({\n    conversationId: PropTypes.string.isRequired,\n    isLogging: PropTypes.bool,\n    correspondents: PropTypes.arrayOf(PropTypes.shape({\n      name: PropTypes.string,\n      phoneNumber: PropTypes.string,\n      extensionNumber: PropTypes.string,\n    })),\n    correspondentMatches: PropTypes.arrayOf(PropTypes.shape({\n      name: PropTypes.string,\n      entityType: PropTypes.string,\n    })),\n    conversationMatches: PropTypes.arrayOf(PropTypes.shape({\n      id: PropTypes.string,\n    })),\n    unreadCounts: PropTypes.number.isRequired,\n    type: PropTypes.string.isRequired,\n    uri: PropTypes.string,\n  }).isRequired,\n  areaCode: PropTypes.string.isRequired,\n  brand: PropTypes.string.isRequired,\n  countryCode: PropTypes.string.isRequired,\n  currentLocale: PropTypes.string.isRequired,\n  onLogConversation: PropTypes.func,\n  onViewContact: PropTypes.func,\n  onCreateContact: PropTypes.func,\n  createEntityTypes: PropTypes.array,\n  onClickToDial: PropTypes.func,\n  onClickToSms: PropTypes.func,\n  disableLinks: PropTypes.bool,\n  disableClickToDial: PropTypes.bool,\n  dateTimeFormatter: PropTypes.func.isRequired,\n  showConversationDetail: PropTypes.func.isRequired,\n  readMessage: PropTypes.func.isRequired,\n  markMessage: PropTypes.func.isRequired,\n  unmarkMessage: PropTypes.func.isRequired,\n  autoLog: PropTypes.bool,\n  enableContactFallback: PropTypes.bool,\n  showContactDisplayPlaceholder: PropTypes.bool,\n  sourceIcons: PropTypes.object,\n  phoneTypeRenderer: PropTypes.func,\n  phoneSourceNameRenderer: PropTypes.func,\n  showGroupNumberName: PropTypes.bool,\n  deleteMessage: PropTypes.func,\n  previewFaxMessages: PropTypes.func,\n  renderExtraButton: PropTypes.func,\n  internalSmsPermission: PropTypes.bool,\n  outboundSmsPermission: PropTypes.bool,\n  updateTypeFilter: PropTypes.func,\n};\n\nMessageItem.defaultProps = {\n  onLogConversation: undefined,\n  onClickToDial: undefined,\n  onViewContact: undefined,\n  onCreateContact: undefined,\n  createEntityTypes: undefined,\n  disableClickToDial: false,\n  onClickToSms: undefined,\n  disableLinks: false,\n  autoLog: false,\n  enableContactFallback: undefined,\n  showContactDisplayPlaceholder: true,\n  sourceIcons: undefined,\n  phoneTypeRenderer: undefined,\n  phoneSourceNameRenderer: undefined,\n  showGroupNumberName: false,\n  deleteMessage() { },\n  previewFaxMessages: undefined,\n  renderExtraButton: undefined,\n  internalSmsPermission: true,\n  outboundSmsPermission: true,\n  updateTypeFilter: undefined,\n};\n"],"file":"index.js"}