{"version":3,"sources":["containers/DialerAndCallsTabContainer/index.js"],"names":["TabContentView","props","getTabs","currentLocale","currentPath","path","label","i18n","getString","isActive","showSpinner","styles","nav","content","Component","propTypes","applicable","PropTypes","bool","isRequired","string","goTo","func","mapToProps","_","phone","locale","callMonitor","callMonitorUI","callingSettings","routerInteraction","conferenceCall","webphone","conferenceCallEquipped","isWebphoneMode","callingMode","callingModes","calls","length","sessions","cachedActive","ready","mapToFunctions","push","DialerAndCallsTabContainer","default"],"mappings":"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","file":"index.js","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { createSelector } from 'reselect';\nimport callingModes from 'ringcentral-integration/modules/CallingSettings/callingModes';\n\nimport TabContentPanel from '../../components/TabContentPanel';\nimport SpinnerOverlay from '../../components/SpinnerOverlay';\nimport withPhone from '../../lib/withPhone';\nimport i18n from './i18n';\nimport styles from './styles.scss';\n\nclass TabContentView extends Component {\n  static propTypes = {\n    applicable: PropTypes.bool.isRequired,\n    showSpinner: PropTypes.bool.isRequired,\n    currentLocale: PropTypes.string.isRequired,\n    currentPath: PropTypes.string.isRequired,\n    goTo: PropTypes.func.isRequired,\n  };\n\n  constructor(props) {\n    super(props);\n    this.getTabs = createSelector(\n      () => this.props.currentLocale,\n      () => this.props.currentPath,\n      (currentLocale, currentPath) => ([\n        {\n          path: '/dialer',\n          label: i18n.getString('dialer', currentLocale),\n          isActive() { return currentPath === '/dialer'; },\n        },\n        {\n          path: '/calls',\n          label: i18n.getString('allCalls', currentLocale),\n          isActive() { return currentPath === '/calls'; }\n        },\n      ]),\n    );\n  }\n  render() {\n    if (this.props.showSpinner) {\n      return <SpinnerOverlay />;\n    }\n    return (\n      <TabContentPanel\n        {...this.props}\n        tabs={this.getTabs()}\n        navClassName={styles.nav}\n        tabContentClassName={styles.content}\n      />\n    );\n  }\n}\n\nfunction mapToProps(_, {\n  phone: {\n    locale,\n    callMonitor,\n    callMonitorUI,\n    // callLogSection,\n    callingSettings,\n    routerInteraction,\n    conferenceCall,\n    webphone,\n  }\n}) {\n  const conferenceCallEquipped = !!conferenceCall;\n  const isWebphoneMode = (callingSettings.callingMode === callingModes.webphone);\n  const applicable = isWebphoneMode && !!(\n    conferenceCallEquipped &&\n    callMonitor.calls.length &&\n    webphone.sessions.length\n  )\n  || !isWebphoneMode && (\n    callMonitor.calls.length > 0 ||\n    // (callLogSection && callLogSection.show) ||\n    (callMonitorUI && callMonitorUI.cachedActive)\n  );\n  return {\n    applicable,\n    currentLocale: locale.currentLocale,\n    showSpinner: !locale.ready,\n    currentPath: routerInteraction.currentPath,\n  };\n}\n\nfunction mapToFunctions(_, {\n  phone: {\n    routerInteraction,\n  },\n}) {\n  return {\n    goTo(path) {\n      routerInteraction.push(path);\n    },\n  };\n}\n\nconst DialerAndCallsTabContainer = withPhone(connect(\n  mapToProps,\n  mapToFunctions,\n)(TabContentView));\n\nexport {\n  mapToProps,\n  mapToFunctions,\n  DialerAndCallsTabContainer as default,\n};\n"]}