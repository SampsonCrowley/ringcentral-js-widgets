{"version":3,"sources":["components/CallAvatar/index.js"],"names":["REGEXP_BLOB_URL","REGEXP_BASE64_URL","isBlobURL","value","test","isBase64","CallAvatar","props","state","avatarUrl","_mounted","setState","$img","document","createElement","src","onload","onerror","loadImg","nextProps","extraNum","isOnConferenceCall","spinnerMode","className","onClick","initialSize","margin","avatarCircleRadius","extraNumCircleRadius","extraNumCircleBorder","circleBorder","$snow","$blueLight","$blue","$dark","$transparency","defaultAvatarStyle","opacity","hash","uuid","v4","portraitChar","iconFont","textId","clipId","avatarStyle","stroke","strokeWidth","showingSpinner","aspectRatio","xmlns","svgCls","styles","callAvatar","autoPointerEvents","disabledPointerEvents","spinnerId","spinnerScaleSize","spinnerSize","spinnerTranslateTo","isOnConferenceCallWithExtraNum","spinnerTransform","fontSize","fill","fontWeight","Component","propTypes","PropTypes","bool","string","number","func","defaultProps"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport uuid from 'uuid';\nimport classnames from 'classnames';\nimport styles from './styles.scss';\nimport SpinnerIcon from '../../assets/images/Spinner.svg';\n\nconst REGEXP_BLOB_URL = /^blob:.+\\/[\\w-]{36,}(?:#.+)?$/;\nconst REGEXP_BASE64_URL = /^(data:\\w+\\/[a-zA-Z\\+\\-\\.]+;base64,)?(?:[A-Za-z0-9+\\/]{4})*(?:[A-Za-z0-9+\\/]{2}==|[A-Za-z0-9+\\/]{3}=)?$/gi;\n\nfunction isBlobURL(value) {\n  return REGEXP_BLOB_URL.test(value);\n}\n\nfunction isBase64(value) {\n  return REGEXP_BASE64_URL.test(value);\n}\n\nclass CallAvatar extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      avatarUrl: null\n    };\n    this._mounted = false;\n  }\n\n  loadImg(props = this.props) {\n    const { avatarUrl } = props;\n\n    if (isBase64(avatarUrl)) {\n      this.setState({\n        avatarUrl\n      });\n      return;\n    }\n\n    // means we have to load it\n    if (!this._mounted) {\n      return;\n    }\n    if (avatarUrl) {\n      const $img = document.createElement('img');\n      $img.src = avatarUrl;\n      $img.onload = () => {\n        if (!this._mounted) {\n          return;\n        }\n        this.setState({\n          avatarUrl\n        });\n      };\n      $img.onerror = () => {\n        if (!this._mounted) {\n          return;\n        }\n        this.setState({\n          avatarUrl: null\n        });\n      };\n    }\n  }\n\n  componentWillMount() {\n    this.loadImg();\n  }\n\n  componentDidMount() {\n    this._mounted = true;\n    if (!this.state.avatarUrl) {\n      this.loadImg();\n    }\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.avatarUrl !== this.props.avatarUrl) {\n      this.loadImg(nextProps);\n    }\n  }\n\n  componentWillUnmount() {\n    this._mounted = false;\n  }\n\n  render() {\n    const {\n      extraNum, isOnConferenceCall, spinnerMode, className, onClick\n    } = this.props;\n    const { avatarUrl } = this.state;\n    const initialSize = 38;\n    const margin = 4;\n    const avatarCircleRadius = 15;\n    const extraNumCircleRadius = 8.5;\n    const extraNumCircleBorder = 1;\n    const circleBorder = 1;\n    const $snow = '#fff';\n    const $blueLight = '#cee7f2';\n    const $blue = '#0684bd';\n    const $dark = '#e2e2e2';\n    const $transparency = '0.8';\n    const defaultAvatarStyle = { opacity: +$transparency };\n    const hash = uuid.v4();\n    const portraitChar = '\\ue904'; // HACK: &#xe904; is the font code for the portrait icon\n    const iconFont = 'dynamics_icon';// Hard coding this for firefox to load iconfont\n    const textId = `text-${hash}`;\n    const clipId = `circleClip-${hash}`;\n    const avatarStyle = { stroke: $dark, strokeWidth: `${circleBorder}px` };\n    const showingSpinner = spinnerMode;\n    const aspectRatio = 'xMidYMid meet';\n    const xmlns = 'http://www.w3.org/2000/svg';\n    const svgCls = classnames(\n      styles.callAvatar,\n      onClick ? styles.autoPointerEvents : styles.disabledPointerEvents,\n      className\n    );\n    // spinner sizing\n    const spinnerId = `spinner-${hash}`;\n    const spinnerScaleSize = 1.5;\n    const spinnerSize = 12;\n    const spinnerTranslateTo = (initialSize - (spinnerSize * spinnerScaleSize)) / 2;\n    const isOnConferenceCallWithExtraNum = isOnConferenceCall && extraNum > 0;\n    const spinnerTransform = `translate(${spinnerTranslateTo\n      - (isOnConferenceCallWithExtraNum ? margin : 0)},${spinnerTranslateTo}) scale(${\n      spinnerScaleSize\n    }, ${spinnerScaleSize})`;\n\n    if (isOnConferenceCallWithExtraNum) {\n      return (\n        <svg\n          onClick={onClick ? () => onClick() : null}\n          className={svgCls}\n          style={avatarUrl ? avatarStyle : null}\n          viewBox={`0 0 ${initialSize} ${initialSize}`}\n          preserveAspectRatio={aspectRatio}\n          xmlns={xmlns}\n        >\n          <defs>\n            <g id={textId}>\n              <text\n                x=\"0\"\n                y=\"0\"\n                dy={`${initialSize - 10}px`}\n                style={{\n                      fontSize: `${avatarCircleRadius * 2}px`,\n                      fill: $blue,\n                      opacity: '.5'\n                    }}\n                fontFamily={iconFont}\n              >\n                {portraitChar}\n              </text>\n            </g>\n            <SpinnerIcon id={spinnerId} />\n          </defs>\n          <circle\n            cx={avatarCircleRadius}\n            cy={margin + avatarCircleRadius}\n            r={avatarCircleRadius}\n            fill={$snow}\n            stroke={showingSpinner ? $dark : 'inherit'}\n            strokeOpacity={showingSpinner ? $transparency : '1'}\n          />\n          <g>\n            <clipPath id={clipId}>\n              <circle\n                cx={avatarCircleRadius}\n                cy={margin + avatarCircleRadius}\n                r={avatarCircleRadius}\n                fill={$snow} />\n            </clipPath>\n          </g>\n          {\n            showingSpinner && (\n              <g transform={spinnerTransform}>\n                <use xlinkHref={`#${spinnerId}`} />\n              </g>\n            )\n          }\n          {\n            avatarUrl && (\n              <image clipPath={`url(#${clipId})`} height=\"100%\" width=\"100%\" xlinkHref={avatarUrl} />\n            )\n          }\n          {\n            (!avatarUrl && !showingSpinner) &&\n            <use\n              xlinkHref={`#${textId}`}\n              clipPath={`url(#${clipId})`}\n              style={defaultAvatarStyle}\n            />\n          }\n          <circle\n            cx={initialSize - extraNumCircleRadius}\n            cy={extraNumCircleRadius}\n            r={extraNumCircleRadius}\n            fill={$snow} />\n          <circle\n            cx={initialSize - extraNumCircleRadius}\n            cy={extraNumCircleRadius}\n            r={extraNumCircleRadius - extraNumCircleBorder}\n            fill={$blueLight} />\n\n          <text\n            x={initialSize - extraNumCircleRadius}\n            y={extraNumCircleRadius}\n            dy=\"3px\"\n            textAnchor=\"middle\"\n            style={{\n              fontSize: '9px',\n              stroke: 'none',\n              fill: $blue,\n              fontWeight: 'bolder',\n              opacity: '.5'\n            }}>\n            {`+${extraNum}`}\n          </text>\n        </svg>\n      );\n    }\n    return (\n      <svg\n        className={svgCls}\n        onClick={onClick ? () => onClick() : null}\n        style={avatarUrl ? avatarStyle : null}\n        viewBox={`0 0 ${initialSize} ${initialSize}`}\n        preserveAspectRatio={aspectRatio}\n        xmlns={xmlns}\n          >\n        <defs>\n          <g id={textId}>\n            <text\n              x=\"0\"\n              y=\"0\"\n              dy={`${initialSize - 10}px`}\n              dx=\"2\"\n              style={{\n                      fontSize: `${(initialSize / 2 - 2) * 2}px`,\n                      fill: $blue,\n                      opacity: '.5'\n                    }}\n              fontFamily={iconFont}\n            >\n              {portraitChar}\n            </text>\n          </g>\n          <SpinnerIcon id={spinnerId} />\n        </defs>\n        <circle\n          cx={initialSize / 2}\n          cy={initialSize / 2}\n          r={initialSize / 2 - circleBorder}\n          fill={$snow}\n          stroke={showingSpinner ? $dark : 'inherit'}\n          strokeOpacity={showingSpinner ? $transparency : '1'}\n          />\n        <g>\n          <clipPath id={clipId}>\n            <circle\n              cx={initialSize / 2}\n              cy={initialSize / 2}\n              r={initialSize / 2 - 1}\n              />\n          </clipPath>\n        </g>\n        {\n            showingSpinner && (\n              <g transform={spinnerTransform} >\n                <use xlinkHref={`#${spinnerId}`} />\n              </g>\n            )\n          }\n        {\n            showingSpinner && (\n              <g transform={spinnerTransform} >\n                <use xlinkHref={`#${spinnerId}`} />\n              </g>\n            )\n          }\n        {\n            avatarUrl && (<image\n              clipPath={`url(#${clipId})`}\n              height=\"100%\"\n              width=\"100%\"\n              xlinkHref={avatarUrl}\n              preserveAspectRatio=\"xMinYMin slice\" />\n            )\n          }\n        {\n            (!avatarUrl && !showingSpinner) &&\n            <use\n              xlinkHref={`#${textId}`}\n              clipPath={`url(#${clipId})`}\n              style={defaultAvatarStyle}\n            />\n          }\n      </svg>\n    );\n  }\n}\n\n\nCallAvatar.propTypes = {\n  isOnConferenceCall: PropTypes.bool,\n  avatarUrl: PropTypes.string,\n  extraNum: PropTypes.number,\n  /**\n   * Set to true to make it always show the loading spinner.\n   */\n  spinnerMode: PropTypes.bool,\n  className: PropTypes.string,\n  onClick: PropTypes.func,\n};\n\nCallAvatar.defaultProps = {\n  isOnConferenceCall: false,\n  avatarUrl: null,\n  extraNum: 0,\n  spinnerMode: false,\n  className: null,\n  onClick: null,\n};\n\n\nexport default CallAvatar;\n"],"file":"index.js"}