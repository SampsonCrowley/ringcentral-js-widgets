{"version":3,"sources":["components/CallsPanel/index.js"],"names":["HEADER_HEIGHT","CallsPanel","props","_onResize","_mounted","_calculateContentSize","state","contentHeight","contentWidth","_listWrapper","React","createRef","window","addEventListener","removeEventListener","current","getBoundingClientRect","react","setState","bottom","top","right","left","brand","currentLocale","calls","areaCode","countryCode","onViewContact","onCreateContact","onLogCall","onClickToDial","onClickToSms","isLoggedContact","disableLinks","disableClickToDial","outboundSmsPermission","internalSmsPermission","dateTimeFormatter","showSpinner","title","active","loggingMap","webphoneAnswer","webphoneReject","webphoneHangup","webphoneResume","enableContactFallback","autoLog","showContactDisplayPlaceholder","sourceIcons","phoneTypeRenderer","phoneSourceNameRenderer","useNewList","callsListView","content","styles","root","PureComponent","propTypes","PropTypes","string","isRequired","arrayOf","any","func","bool","object","defaultProps","undefined"],"mappings":"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","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport debounce from 'ringcentral-integration/lib/debounce';\nimport 'core-js/fn/array/find';\nimport Header from '../Header';\nimport Panel from '../Panel';\nimport SpinnerOverlay from '../SpinnerOverlay';\nimport CallList from '../CallList';\nimport CallListV2 from '../CallListV2';\n\nimport styles from './styles.scss';\n\nconst HEADER_HEIGHT = 38;\n\nexport default class CallsPanel extends React.PureComponent {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      contentHeight: 0,\n      contentWidth: 0,\n    };\n\n    this._mounted = false;\n    this._listWrapper = React.createRef();\n  }\n\n  componentDidMount() {\n    this._mounted = true;\n    this._calculateContentSize();\n    window.addEventListener('resize', this._onResize);\n  }\n\n  componentWillUnmount() {\n    this._mounted = false;\n    window.removeEventListener('resize', this._onResize);\n  }\n\n  _onResize = debounce(() => {\n    if (this._mounted) {\n      this._calculateContentSize();\n    }\n  }, 300);\n\n  _calculateContentSize() {\n    if (this._listWrapper\n      && this._listWrapper.current\n      && this._listWrapper.current.getBoundingClientRect\n    ) {\n      const react = this._listWrapper.current.getBoundingClientRect();\n\n      this.setState({\n        contentHeight: react.bottom - react.top - HEADER_HEIGHT,\n        contentWidth: react.right - react.left,\n      });\n\n      return;\n    }\n\n    this.setState({\n      contentHeight: 0,\n      contentWidth: 0,\n    });\n  }\n\n  render() {\n    const {\n      brand,\n      currentLocale,\n      calls,\n      areaCode,\n      countryCode,\n      onViewContact,\n      onCreateContact,\n      onLogCall,\n      onClickToDial,\n      onClickToSms,\n      isLoggedContact,\n      disableLinks,\n      disableClickToDial,\n      outboundSmsPermission,\n      internalSmsPermission,\n      dateTimeFormatter,\n      showSpinner,\n      title,\n      active,\n      loggingMap,\n      webphoneAnswer,\n      webphoneReject,\n      webphoneHangup,\n      webphoneResume,\n      enableContactFallback,\n      autoLog,\n      showContactDisplayPlaceholder,\n      sourceIcons,\n      phoneTypeRenderer,\n      phoneSourceNameRenderer,\n      useNewList,\n    } = this.props;\n\n    const callsListView = useNewList ?\n      (\n        <CallListV2\n          brand={brand}\n          currentLocale={currentLocale}\n          calls={calls}\n          areaCode={areaCode}\n          countryCode={countryCode}\n          onViewContact={onViewContact}\n          onCreateContact={onCreateContact}\n          onLogCall={onLogCall}\n          onClickToDial={onClickToDial}\n          onClickToSms={onClickToSms}\n          isLoggedContact={isLoggedContact}\n          disableLinks={disableLinks}\n          disableClickToDial={disableClickToDial}\n          outboundSmsPermission={outboundSmsPermission}\n          internalSmsPermission={internalSmsPermission}\n          dateTimeFormatter={dateTimeFormatter}\n          active={active}\n          loggingMap={loggingMap}\n          webphoneAnswer={webphoneAnswer}\n          webphoneReject={webphoneReject}\n          webphoneHangup={webphoneHangup}\n          webphoneResume={webphoneResume}\n          enableContactFallback={enableContactFallback}\n          autoLog={autoLog}\n          showContactDisplayPlaceholder={showContactDisplayPlaceholder}\n          sourceIcons={sourceIcons}\n          phoneTypeRenderer={phoneTypeRenderer}\n          phoneSourceNameRenderer={phoneSourceNameRenderer}\n          width={this.state.contentWidth}\n          height={this.state.contentHeight}\n          useNewList={useNewList}\n        />\n      ) :\n      (\n        <CallList\n          brand={brand}\n          currentLocale={currentLocale}\n          calls={calls}\n          areaCode={areaCode}\n          countryCode={countryCode}\n          onViewContact={onViewContact}\n          onCreateContact={onCreateContact}\n          onLogCall={onLogCall}\n          onClickToDial={onClickToDial}\n          onClickToSms={onClickToSms}\n          isLoggedContact={isLoggedContact}\n          disableLinks={disableLinks}\n          disableClickToDial={disableClickToDial}\n          outboundSmsPermission={outboundSmsPermission}\n          internalSmsPermission={internalSmsPermission}\n          dateTimeFormatter={dateTimeFormatter}\n          active={active}\n          loggingMap={loggingMap}\n          webphoneAnswer={webphoneAnswer}\n          webphoneReject={webphoneReject}\n          webphoneHangup={webphoneHangup}\n          webphoneResume={webphoneResume}\n          enableContactFallback={enableContactFallback}\n          autoLog={autoLog}\n          showContactDisplayPlaceholder={showContactDisplayPlaceholder}\n          sourceIcons={sourceIcons}\n          phoneTypeRenderer={phoneTypeRenderer}\n          phoneSourceNameRenderer={phoneSourceNameRenderer}\n        />\n      );\n\n    const content = showSpinner ? <SpinnerOverlay /> : callsListView;\n\n    return (\n      <div className={styles.root} ref={this._listWrapper}>\n        <Header>\n          {title}\n        </Header>\n        <Panel className={styles.content} >\n          {content}\n        </Panel>\n      </div>\n    );\n  }\n}\n\nCallsPanel.propTypes = {\n  brand: PropTypes.string.isRequired,\n  currentLocale: PropTypes.string.isRequired,\n  calls: PropTypes.arrayOf(PropTypes.any).isRequired,\n  areaCode: PropTypes.string.isRequired,\n  countryCode: PropTypes.string.isRequired,\n  onViewContact: PropTypes.func,\n  onCreateContact: PropTypes.func,\n  onClickToDial: PropTypes.func,\n  onClickToSms: PropTypes.func,\n  onLogCall: PropTypes.func,\n  isLoggedContact: PropTypes.func,\n  disableLinks: PropTypes.bool.isRequired,\n  disableClickToDial: PropTypes.bool,\n  outboundSmsPermission: PropTypes.bool,\n  internalSmsPermission: PropTypes.bool,\n  dateTimeFormatter: PropTypes.func.isRequired,\n  showSpinner: PropTypes.bool,\n  title: PropTypes.string,\n  active: PropTypes.bool,\n  loggingMap: PropTypes.object,\n  webphoneAnswer: PropTypes.func,\n  webphoneReject: PropTypes.func,\n  webphoneHangup: PropTypes.func,\n  webphoneResume: PropTypes.func,\n  enableContactFallback: PropTypes.bool,\n  autoLog: PropTypes.bool,\n  showContactDisplayPlaceholder: PropTypes.bool,\n  sourceIcons: PropTypes.object,\n  phoneTypeRenderer: PropTypes.func,\n  phoneSourceNameRenderer: PropTypes.func,\n  useNewList: PropTypes.bool,\n};\n\nCallsPanel.defaultProps = {\n  onViewContact: undefined,\n  onCreateContact: undefined,\n  onLogCall: undefined,\n  onClickToDial: undefined,\n  onClickToSms: undefined,\n  disableClickToDial: false,\n  outboundSmsPermission: false,\n  internalSmsPermission: false,\n  showSpinner: false,\n  title: '',\n  active: false,\n  isLoggedContact: undefined,\n  loggingMap: {},\n  webphoneAnswer: undefined,\n  webphoneReject: undefined,\n  webphoneHangup: undefined,\n  webphoneResume: undefined,\n  enableContactFallback: undefined,\n  autoLog: false,\n  showContactDisplayPlaceholder: true,\n  sourceIcons: undefined,\n  phoneTypeRenderer: undefined,\n  phoneSourceNameRenderer: undefined,\n  useNewList: false,\n};\n"],"file":"index.js"}