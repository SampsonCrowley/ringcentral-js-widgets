{"version":3,"sources":["modules/ActiveCallControl/helpers.js"],"names":["isHangUp","isReject","normalizeSession","requestURI","code","callResults","disconnected","direction","callDirections","inbound","activeCallControlStatus","setUp","proceeding","call","activeSessionStatus","telephonySessionId","partyId","from","to","result","startTime","sessionId","muted","isOnRecording","phoneNumber","fromNumber","fromUserName","name","toNumber","toUserName","id","callStatus","creationTime","isOnMute","isForwarded","isOnFlip","isOnHold","hold","isOnTransfer","isReplied","isToVoicemail","lastHoldingTime","minimized","recordStatus","recording","idle","removed","activeSession","recordingId","prefix","hangUp","reject","unHold","transfer","flip","getPartyData","mute","record","stopRecord"],"mappings":"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","file":"helpers.js","sourcesContent":["import recordStatus from 'ringcentral-integration/modules/Webphone/recordStatus';\nimport callResults from '../../enums/callResults';\nimport callDirections from '../../enums/callDirections';\nimport activeCallControlStatus from '../../enums/activeCallControlStatus';\n\n\nexport function isHangUp(code) {\n  return (code === callResults.disconnected);\n}\nexport function isReject({ direction, code }) {\n  return (direction === callDirections.inbound) &&\n  (code === activeCallControlStatus.setUp || code === activeCallControlStatus.proceeding);\n}\nexport function normalizeSession({\n  call,\n  activeSessionStatus = {}\n}) {\n  const {\n    telephonySessionId,\n    partyId,\n    direction,\n    from,\n    to,\n    result,\n    startTime,\n    sessionId,\n  } = call;\n  const {\n    muted,\n    code,\n    isReject,\n    isOnRecording,\n  } = activeSessionStatus;\n  return {\n    telephonySessionId,\n    partyId,\n    direction,\n    from: from && from.phoneNumber,\n    fromNumber: from && from.phoneNumber,\n    fromUserName: from && from.name,\n    to: to && to.phoneNumber,\n    toNumber: to && to.phoneNumber,\n    toUserName: to && to.name,\n    id: sessionId,\n    callStatus: result,\n    startTime,\n    creationTime: startTime,\n    isOnMute: muted,\n    isForwarded: false,\n    isOnFlip: false,\n    isOnHold: code === activeCallControlStatus.hold,\n    isOnTransfer: false,\n    isReplied: false,\n    isToVoicemail: false,\n    lastHoldingTime: 0,\n    minimized: false,\n    recordStatus: isOnRecording ? recordStatus.recording : recordStatus.idle,\n    removed: false,\n    isReject,\n  };\n}\nexport function requestURI(activeSession) {\n  const {\n    telephonySessionId,\n    partyId,\n    recordingId\n  } = activeSession;\n  const prefix = `/account/~/telephony/sessions/${telephonySessionId}`;\n  return {\n    hangUp: `${prefix}`,\n    reject: `${prefix}/parties/${partyId}/reject`,\n    hold: `${prefix}/parties/${partyId}/hold`,\n    unHold: `${prefix}/parties/${partyId}/unhold`,\n    transfer: `${prefix}/parties/${partyId}/transfer`,\n    flip: `${prefix}/parties/${partyId}/flip`,\n    getPartyData: `${prefix}/parties/${partyId}`,\n    mute: `${prefix}/parties/${partyId}`,\n    record: `${prefix}/parties/${partyId}/recordings`,\n    stopRecord: `${prefix}/parties/${partyId}/recordings/${recordingId}`\n  };\n}\n"]}