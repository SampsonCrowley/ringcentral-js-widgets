{"version":3,"sources":["components/TransferPanel/index.js"],"names":["TransferPanel","props","onButtonOutput","key","state","recipient","setState","preState","value","toNumber","onTransfer","_getTransferNumber","sessionId","onToNumberChange","clearToNumber","setRecipient","clearRecipient","load","nextProps","session","onCallEnd","setActiveSessionId","phoneNumber","isOnTransfer","styles","root","onBack","i18n","getString","currentLocale","dialInput","searchContact","searchContactList","formatPhone","phoneTypeRenderer","phoneSourceNameRenderer","recipientsContactInfoRenderer","recipientsContactPhoneRenderer","autoFocus","padContainer","dialPad","buttonRow","button","disabled","undefined","TransferIcon","PureComponent","propTypes","PropTypes","func","isRequired","string","array","bool","object","defaultProps"],"mappings":"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","sourcesContent":["import React, { PureComponent } from 'react';\nimport PropTypes from 'prop-types';\nimport DialPad from '../DialPad';\nimport RecipientsInput from '../RecipientsInput';\nimport BackHeader from '../BackHeader';\nimport CircleButton from '../CircleButton';\nimport TransferIcon from '../../assets/images/Transfer.svg';\nimport styles from './styles.scss';\nimport i18n from './i18n';\n\nexport default class TransferPanel extends PureComponent {\n  static propTypes = {\n    setActiveSessionId: PropTypes.func,\n    onTransfer: PropTypes.func.isRequired,\n    currentLocale: PropTypes.string.isRequired,\n    onBack: PropTypes.func.isRequired,\n    onCallEnd: PropTypes.func.isRequired,\n    searchContactList: PropTypes.array,\n    searchContact: PropTypes.func.isRequired,\n    formatPhone: PropTypes.func.isRequired,\n    phoneTypeRenderer: PropTypes.func,\n    phoneSourceNameRenderer: PropTypes.func,\n    recipientsContactInfoRenderer: PropTypes.func,\n    recipientsContactPhoneRenderer: PropTypes.func,\n    autoFocus: PropTypes.bool,\n    sessionId: PropTypes.string.isRequired,\n    session: PropTypes.object,\n  };\n\n  static defaultProps = {\n    setActiveSessionId: null,\n    phoneTypeRenderer: undefined,\n    phoneSourceNameRenderer: undefined,\n    recipientsContactInfoRenderer: undefined,\n    recipientsContactPhoneRenderer: undefined,\n    autoFocus: true,\n    session: null,\n    searchContactList: [],\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      toNumber: '',\n      recipient: null,\n    };\n  }\n\n  componentDidMount() {\n    this.load();\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (this.props.session && !nextProps.session) {\n      this.props.onCallEnd();\n    }\n  }\n\n  load() {\n    this.props.setActiveSessionId(this.props.sessionId);\n  }\n\n  _getTransferNumber() {\n    return (\n      (this.state.recipient && this.state.recipient.phoneNumber) ||\n      this.state.toNumber\n    );\n  }\n\n  onButtonOutput = (key) => {\n    if (this.state.recipient) {\n      return;\n    }\n    this.setState((preState) => {\n      const value = preState.toNumber + key;\n      return { toNumber: value };\n    });\n  }\n\n  onTransfer = () => {\n    this.props.onTransfer(this._getTransferNumber(), this.props.sessionId);\n  }\n\n  onToNumberChange = (toNumber) => {\n    this.setState({\n      toNumber\n    });\n  }\n\n  clearToNumber = () => {\n    this.setState({\n      toNumber: '',\n    });\n  }\n\n  setRecipient = (recipient) => {\n    this.setState({\n      recipient,\n      toNumber: '',\n    });\n  }\n\n  clearRecipient = () => {\n    this.setState({ recipient: null });\n  }\n\n  render() {\n    if (!this.props.session) {\n      return null;\n    }\n    const isOnTransfer = !!this.props.session.isOnTransfer;\n    return (\n      <div className={styles.root}>\n        <BackHeader\n          onBackClick={this.props.onBack}>\n          {i18n.getString('transferTo', this.props.currentLocale)}\n        </BackHeader>\n        <RecipientsInput\n          className={styles.dialInput}\n          value={this.state.toNumber}\n          onChange={this.onToNumberChange}\n          onClean={this.clearToNumber}\n          recipient={this.state.recipient}\n          addToRecipients={this.setRecipient}\n          removeFromRecipients={this.clearRecipient}\n          searchContact={this.props.searchContact}\n          searchContactList={this.props.searchContactList}\n          formatContactPhone={this.props.formatPhone}\n          currentLocale={this.props.currentLocale}\n          phoneTypeRenderer={this.props.phoneTypeRenderer}\n          phoneSourceNameRenderer={this.props.phoneSourceNameRenderer}\n          contactInfoRenderer={this.props.recipientsContactInfoRenderer}\n          contactPhoneRenderer={this.props.recipientsContactPhoneRenderer}\n          titleEnabled\n          autoFocus={this.props.autoFocus}\n        />\n        <div className={styles.padContainer}>\n          <DialPad\n            className={styles.dialPad}\n            onButtonOutput={this.onButtonOutput}\n          />\n          <div className={styles.buttonRow}>\n            <div className={styles.button}>\n              <CircleButton\n                className={isOnTransfer ? styles.disabled : undefined}\n                onClick={this.onTransfer}\n                icon={TransferIcon}\n                disabled={isOnTransfer}\n              />\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n"],"file":"index.js"}