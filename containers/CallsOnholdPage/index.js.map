{"version":3,"sources":["containers/CallsOnholdPage/index.js"],"names":["CallsOnholdContainer","props","getCalls","activeOnHoldCalls","call","direction","callDirections","inbound","Component","propTypes","PropTypes","arrayOf","object","isRequired","mapToProps","_","phone","callMonitor","baseProps","mapToFunctions","params","conferenceCall","routerInteraction","getAvatarUrl","onBackButtonClick","goBack","onMerge","sessionId","onMergeOnhold","callback","onAdd","push","fromNumber","CallsOnholdPage"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;;;AACA;;;;AACA;;AACA;;;;AACA;;AACA;;AAEA;;;;AACA;;;;AAEA;;;;IAMMA,oB;;;AAKJ,gCAAYC,KAAZ,EAAmB;AAAA;;AAAA,kKACXA,KADW;;AAGjB,UAAKC,QAAL,GAAgB,8BACd;AAAA,aAAM,MAAKD,KAAL,CAAWE,iBAAjB;AAAA,KADc,EAEd;AAAA,aAAqB,mBACnB;AAAA,eAAQC,KAAKC,SAAL,KAAmBC,yBAAeC,OAA1C;AAAA,OADmB,EAEnBJ,iBAFmB,CAArB;AAAA,KAFc,CAAhB;AAHiB;AAUlB;;;;6BAEQ;AACP,aAAO,8BAAC,0BAAD,6BAAsB,KAAKF,KAA3B,IAAkC,OAAO,KAAKC,QAAL,EAAzC,IAAP;AACD;;;EAnBgCM,gB,UAC1BC,S,GAAY;AACjBN,qBAAmBO,oBAAUC,OAAV,CAAkBD,oBAAUE,MAA5B,EAAoCC;AADtC,C;;;AAqBrB,SAASC,UAAT,CAAoBC,CAApB,QAMG;AAAA,MALDC,KAKC,QALDA,KAKC;AAAA,MAHCC,WAGD,QAJDD,KAIC,CAHCC,WAGD;AAAA,MADEhB,KACF;;AACD,MAAMiB,YAAY,iCAAeH,CAAf;AAChBC;AADgB,KAEbf,KAFa,EAAlB;;AAKA,oCACKiB,SADL;AAEEf,uBAAmBc,YAAYd;AAFjC;AAID;;AAED,SAASgB,cAAT,CAAwBJ,CAAxB,SASG;AAAA,MARDK,MAQC,SARDA,MAQC;AAAA,MAPDJ,KAOC,SAPDA,KAOC;AAAA,0BANDA,KAMC;AAAA,MALCK,cAKD,eALCA,cAKD;AAAA,MAJCC,iBAID,eAJCA,iBAID;AAAA,MAFDC,YAEC,SAFDA,YAEC;AAAA,MADEtB,KACF;;AACD,MAAMiB,YAAY,qCAAmBH,CAAnB;AAChBK,kBADgB;AAEhBJ;AAFgB,KAGbf,KAHa,EAAlB;AAKA,MAAMuB,oBAAoB,SAApBA,iBAAoB,GAAM;AAC9BF,sBAAkBG,MAAlB;AACD,GAFD;AAGA,oCACKP,SADL;AAEQQ,WAFR;AAAA,4GAEgBC,SAFhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAGUN,eAAeO,aAAf,CAA6B,EAAED,oBAAF,EAAaE,UAAgBL,iBAAhB,MAAU,IAAV,CAAb,EAA7B,CAHV;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAKEA,qBALF,+BAKsB;AAClBF,wBAAkBG,MAAlB;AACD,KAPH;AAQEK,SARF,mBAQU;AACNR,wBAAkBS,IAAlB,6BAAiDX,OAAOY,UAAxD;AACD,KAVH;;AAWET;AAXF;AAaD;;AAED,IAAMU,kBAAkB,yBAAU,yBAChCnB,UADgC,EAEhCK,cAFgC,EAGhCnB,oBAHgC,CAAV,CAAxB;;kBAKeiC,e","file":"index.js","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport callDirections from 'ringcentral-integration/enums/callDirections';\nimport { createSelector } from 'reselect';\nimport { filter } from 'ramda';\n\nimport withPhone from '../../lib/withPhone';\nimport CallsOnholdPanel from '../../components/CallsOnholdPanel';\n\nimport {\n  mapToProps as mapToBaseProps,\n  mapToFunctions as mapToBaseFunctions,\n} from '../ActiveCallsPage';\n\n\nclass CallsOnholdContainer extends Component {\n  static propTypes = {\n    activeOnHoldCalls: PropTypes.arrayOf(PropTypes.object).isRequired,\n  }\n\n  constructor(props) {\n    super(props);\n\n    this.getCalls = createSelector(\n      () => this.props.activeOnHoldCalls,\n      activeOnHoldCalls => filter(\n        call => call.direction !== callDirections.inbound,\n        activeOnHoldCalls\n      ),\n    );\n  }\n\n  render() {\n    return <CallsOnholdPanel {...this.props} calls={this.getCalls()} />;\n  }\n}\n\nfunction mapToProps(_, {\n  phone,\n  phone: {\n    callMonitor,\n  },\n  ...props\n}) {\n  const baseProps = mapToBaseProps(_, {\n    phone,\n    ...props,\n  });\n\n  return {\n    ...baseProps,\n    activeOnHoldCalls: callMonitor.activeOnHoldCalls,\n  };\n}\n\nfunction mapToFunctions(_, {\n  params,\n  phone,\n  phone: {\n    conferenceCall,\n    routerInteraction,\n  },\n  getAvatarUrl,\n  ...props\n}) {\n  const baseProps = mapToBaseFunctions(_, {\n    params,\n    phone,\n    ...props,\n  });\n  const onBackButtonClick = () => {\n    routerInteraction.goBack();\n  };\n  return {\n    ...baseProps,\n    async onMerge(sessionId) {\n      await conferenceCall.onMergeOnhold({ sessionId, callback: this::onBackButtonClick });\n    },\n    onBackButtonClick() {\n      routerInteraction.goBack();\n    },\n    onAdd() {\n      routerInteraction.push(`/conferenceCall/dialer/${params.fromNumber}`);\n    },\n    getAvatarUrl,\n  };\n}\n\nconst CallsOnholdPage = withPhone(connect(\n  mapToProps,\n  mapToFunctions,\n)(CallsOnholdContainer));\n\nexport default CallsOnholdPage;\n"]}