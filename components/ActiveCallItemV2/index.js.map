{"version":3,"sources":["components/ActiveCallItemV2/index.js"],"names":["WebphoneButtons","currentLocale","session","webphoneReject","webphoneHangup","webphoneResume","webphoneHold","showMergeCall","showHold","disableMerge","onMergeCall","hangupFunc","endIcon","EndIcon","rejectTitle","i18n","getString","holdTitle","unholdTitle","callStatus","sessionStatus","connecting","VoicemailIcon","holdBtn","mergeBtn","styles","webphoneButton","holdButton","active","e","stopPropagation","id","HoldIcon","mergeTitle","mergeButton","disabled","MergeIntoConferenceIcon","webphoneButtons","rejectButton","propTypes","PropTypes","string","isRequired","object","func","bool","defaultProps","undefined","i","ActiveCallItem","props","onSelectContact","value","nameMatches","getContactMatches","selectedMatcherIndex","findIndex","match","_userSelection","setState","selected","contact","getAvatarUrl","then","avatarUrl","call","webphoneSession","updateSessionMatchedContact","getSelectedContact","state","contactMatches","length","isLogging","extraNum","contactDisplay","webphoneToVoicemail","sessionId","toVoicemailTimeout","setTimeout","isOnConferenceCall","conferenceCallParties","map","profile","_mounted","setContact","clearTimeout","telephonyStatus","startTime","offset","disableLinks","showCallDetail","telephonyStatusInfo","callDetail","split","from","name","to","nextProps","fromMatches","toMatches","phoneNumber","extensionNumber","areaCode","countryCode","enableContactFallback","brand","showContactDisplayPlaceholder","sourceIcons","renderContactName","renderExtraButton","contactDisplayStyle","onClick","getPhoneNumber","fallbackContactName","getFallbackContactName","contactName","extraButton","callItemContainer","pointer","wrapper","callIcon","avatar","content","conferenceContactDisplay","getCallInfo","Component","shape","direction","number","activityMatches","array","arrayOf"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;AACA;;AAEA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AAEA;;;;AACA;;;;;;AAA0C;;AAE1C,SAASA,eAAT,OAWG;AAAA,MAVDC,aAUC,QAVDA,aAUC;AAAA,MATDC,OASC,QATDA,OASC;AAAA,MARDC,cAQC,QARDA,cAQC;AAAA,MAPDC,cAOC,QAPDA,cAOC;AAAA,MANDC,cAMC,QANDA,cAMC;AAAA,MALDC,YAKC,QALDA,YAKC;AAAA,MAJDC,aAIC,QAJDA,aAIC;AAAA,MAHDC,QAGC,QAHDA,QAGC;AAAA,MAFDC,YAEC,QAFDA,YAEC;AAAA,MADDC,WACC,QADDA,WACC;;AACD,MAAI,CAACR,OAAL,EAAc;AACZ,WAAO,IAAP;AACD;AACD,MAAIS,aAAaP,cAAjB;;AAEA,MAAIQ,UAAUC,aAAd;AACA,MAAIC,cAAcC,eAAKC,SAAL,CAAe,QAAf,EAAyBf,aAAzB,CAAlB;AACA,MAAMgB,YAAYF,eAAKC,SAAL,CAAe,MAAf,EAAuBf,aAAvB,CAAlB;AACA,MAAMiB,cAAcH,eAAKC,SAAL,CAAe,QAAf,EAAyBf,aAAzB,CAApB;;AAEA,MACE,+BAAUC,OAAV,KACAA,QAAQiB,UAAR,KAAuBC,wBAAcC,UAFvC,EAGE;AACAV,iBAAaR,cAAb;AACAS,cAAUU,mBAAV;AACAR,kBAAcC,eAAKC,SAAL,CAAe,aAAf,EAA8Bf,aAA9B,CAAd;AACD;;AAED,MAAIsB,gBAAJ;AACA,MAAIC,iBAAJ;;AAEA,MAAIhB,QAAJ,EAAc;AACZ,QAAI,8BAASN,OAAT,CAAJ,EAAuB;AACrBqB,gBACE;AAAA;AAAA,UAAM,OAAOL,WAAb,EAA0B,WAAWO,iBAAOC,cAA5C;AACE,sCAAC,sBAAD;AACE,qBAAW,0BAAWD,iBAAOE,UAAlB,EAA8BF,iBAAOG,MAArC,CADb;AAEE,mBAAS,iBAACC,CAAD,EAAO;AACdA,cAAEC,eAAF;AACAzB,2BAAeH,QAAQ6B,EAAvB;AACD,WALH;AAME,qBAAW,GANb;AAOE,iBAAO,GAPT;AAQE,gBAAMC,cARR;AASE;AATF;AADF,OADF;AAeD,KAhBD,MAgBO;AACLT,gBACE;AAAA;AAAA,UAAM,OAAON,SAAb,EAAwB,WAAWQ,iBAAOC,cAA1C;AACE,sCAAC,sBAAD;AACE,qBAAWD,iBAAOE,UADpB;AAEE,mBAAS,iBAACE,CAAD,EAAO;AACdA,cAAEC,eAAF;AACAxB,yBAAaJ,QAAQ6B,EAArB;AACD,WALH;AAME,qBAAW,GANb;AAOE,iBAAO,GAPT;AAQE,gBAAMC,cARR;AASE;AATF;AADF,OADF;AAeD;AACF;;AAED,MAAIzB,aAAJ,EAAmB;AAAA;;AACjB,QAAM0B,aAAalB,eAAKC,SAAL,CAAe,mBAAf,EAAoCf,aAApC,CAAnB;;AAEAuB,eACE;AAAA;AAAA,QAAM,OAAOS,UAAb,EAAyB,WAAWR,iBAAOC,cAA3C;AACE,oCAAC,sBAAD;AACE,mBACE,wFACGD,iBAAOS,WADV,EACwB,IADxB,8CAEGT,iBAAOU,QAFV,EAEqB1B,YAFrB,gBAFJ;AAOE,iBAAS,iBAACoB,CAAD,EAAO;AACdA,YAAEC,eAAF;AACApB,sBAAYR,QAAQ6B,EAApB;AACD,SAVH;AAWE,mBAAW,GAXb;AAYE,eAAO,GAZT;AAaE,cAAMK,iCAbR;AAcE,wBAdF;AAeE,kBAAU3B;AAfZ;AADF,KADF;AAqBD;;AAED,SACE;AAAA;AAAA,MAAK,WAAWgB,iBAAOY,eAAvB;AACGb,YADH;AAEGD,WAFH;AAGE;AAAA;AAAA,QAAM,OAAOT,WAAb,EAA0B,WAAWW,iBAAOC,cAA5C;AACE,oCAAC,sBAAD;AACE,mBAAWD,iBAAOa,YADpB;AAEE,iBAAS,iBAACT,CAAD,EAAO;AACdA,YAAEC,eAAF;AACAnB,qBAAWT,QAAQ6B,EAAnB;AACD,SALH;AAME,mBAAW,GANb;AAOE,eAAO,GAPT;AAQE,cAAMnB,OARR;AASE,oBAAY;AATd;AADF;AAHF,GADF;AAmBD;;AAEDZ,gBAAgBuC,SAAhB,GAA4B;AAC1BtC,iBAAeuC,oBAAUC,MAAV,CAAiBC,UADN;AAE1BxC,WAASsC,oBAAUG,MAFO;AAG1BxC,kBAAgBqC,oBAAUI,IAHA;AAI1BxC,kBAAgBoC,oBAAUI,IAJA;AAK1BvC,kBAAgBmC,oBAAUI,IALA;AAM1BtC,gBAAckC,oBAAUI,IANE;AAO1BrC,iBAAeiC,oBAAUK,IAPC;AAQ1BrC,YAAUgC,oBAAUK,IARM;AAS1BpC,gBAAc+B,oBAAUK,IATE;AAU1BnC,eAAa8B,oBAAUI;AAVG,CAA5B;;AAaA5C,gBAAgB8C,YAAhB,GAA+B;AAC7B5C,WAAS6C,SADoB;AAE7B5C,kBAAgB4C,SAFa;AAG7B3C,kBAAgB2C,SAHa;AAI7B1C,kBAAgB0C,SAJa;AAK7BzC,gBAAcyC,SALe;AAM7BxC,iBAAe,KANc;AAO7BC,YAAU,IAPmB;AAQ7BC,gBAAc,IARe;AAS7BC,eAAa;AAAA,WAAKsC,CAAL;AAAA;AATgB,CAA/B;;AAYA;;;;IAGqBC,c;;;AACnB,0BAAYC,KAAZ,EAAmB;AAAA;;AAAA,sJACXA,KADW;;AAAA,UAyFnBC,eAzFmB,GAyFD,UAACC,KAAD,EAAW;AAC3B,UAAMC,cAAc,MAAKC,iBAAL,EAApB;AACA,UAAIC,uBAAuBF,YAAYG,SAAZ,CACzB;AAAA,eAASC,MAAM1B,EAAN,KAAaqB,MAAMrB,EAA5B;AAAA,OADyB,CAA3B;AAGA,UAAIwB,uBAAuB,CAA3B,EAA8B;AAC5BA,+BAAuB,CAAvB;AACD;AACD,YAAKG,cAAL,GAAsB,IAAtB;AACA,YAAKC,QAAL,CAAc;AACZC,kBAAUL;AADE,OAAd;AAGA,UAAMM,UAAUR,YAAYE,oBAAZ,CAAhB;AACA,UAAIM,OAAJ,EAAa;AACX,cAAKX,KAAL,CAAWY,YAAX,CAAwBD,OAAxB,EAAiCE,IAAjC,CAAsC,UAACC,SAAD,EAAe;AACnD,gBAAKL,QAAL,CAAc,EAAEK,oBAAF,EAAd;AACD,SAFD;AAGA,YAAI,MAAKd,KAAL,CAAWe,IAAX,CAAgBC,eAApB,EAAqC;AACnC,gBAAKhB,KAAL,CAAWiB,2BAAX,CAAuC,MAAKjB,KAAL,CAAWe,IAAX,CAAgBC,eAAhB,CAAgCnC,EAAvE,EAA2E8B,OAA3E;AACD;AACF;AACF,KA9GkB;;AAAA,UAgHnBO,kBAhHmB,GAgHE,YAAoC;AAAA,UAAnCR,QAAmC,uEAAxB,MAAKS,KAAL,CAAWT,QAAa;;AACvD,UAAMU,iBAAiB,MAAKhB,iBAAL,EAAvB;AACA,aAAQM,WAAW,CAAC,CAAZ,IAAiBU,eAAeV,QAAf,CAAlB,IACJU,eAAeC,MAAf,KAA0B,CAA1B,IAA+BD,eAAe,CAAf,CAD3B,IAEL,IAFF;AAGD,KArHkB;;AAEjB,UAAKD,KAAL,GAAa;AACXT,gBAAU,CADC;AAEXY,iBAAW,KAFA;AAGXR,iBAAW,IAHA;AAIXS,gBAAU;AAJC,KAAb;AAMA,UAAKf,cAAL,GAAsB,KAAtB;AACA,UAAKgB,cAAL,GAAsB,IAAtB;;AAEA,UAAKC,mBAAL,GAA2B,UAACC,SAAD,EAAe;AACxC,UAAI,OAAO,MAAK1B,KAAL,CAAWyB,mBAAlB,KAA0C,UAA9C,EAA0D;AACxD;AACD;AACD,YAAKzB,KAAL,CAAWyB,mBAAX,CAA+BC,SAA/B;AACA,YAAKC,kBAAL,GAA0BC,WAAW,YAAM;AACzC,cAAK5B,KAAL,CAAW/C,cAAX,CAA0ByE,SAA1B;AACD,OAFyB,EAEvB,IAFuB,CAA1B;AAGD,KARD;AAXiB;AAoBlB;;;;iCAEY;AAAA,mBAGP,KAAK1B,KAHE;AAAA,UAET6B,kBAFS,UAETA,kBAFS;AAAA,UAEWC,qBAFX,UAEWA,qBAFX;;;AAKX,UAAID,kBAAJ,EAAwB;AACtB,aAAKpB,QAAL,CAAc;AACZK,qBAAWgB,sBAAsBC,GAAtB,CAA0B;AAAA,mBAAWC,QAAQlB,SAAnB;AAAA,WAA1B,EAAwD,CAAxD,CADC;AAEZS,oBAAUO,sBAAsBT,MAAtB,GAA+B,CAA/B,GAAmCS,sBAAsBT,MAAtB,GAA+B,CAAlE,GAAsE;AAFpE,SAAd;AAIA;AACD;;AAED,WAAKpB,eAAL,CAAqB,KAAKiB,kBAAL,EAArB;AACD;;;wCAEmB;AAClB,WAAKe,QAAL,GAAgB,IAAhB;AACA,WAAKC,UAAL;AACD;;;2CAEsB;AACrB,WAAKD,QAAL,GAAgB,KAAhB;AACA,UAAI,KAAKN,kBAAT,EAA6B;AAC3BQ,qBAAa,KAAKR,kBAAlB;AACA,aAAKA,kBAAL,GAA0B,IAA1B;AACD;AACF;;;kCAEa;AAAA,oBAUR,KAAK3B,KAVG;AAAA,iCAEVe,IAFU;AAAA,UAGRqB,eAHQ,gBAGRA,eAHQ;AAAA,UAIRC,SAJQ,gBAIRA,SAJQ;AAAA,UAKRC,MALQ,gBAKRA,MALQ;AAAA,UAOVC,YAPU,WAOVA,YAPU;AAAA,UAQVxF,aARU,WAQVA,aARU;AAAA,UASVyF,cATU,WASVA,cATU;;;AAYZ,UAAI,CAACA,cAAL,EAAqB;AACnB,eAAO,IAAP;AACD;;AAED,UAAMC,sBAAsB5E,eAAKC,SAAL,CAAesE,eAAf,EAAgCrF,aAAhC,CAA5B;AACA,aACE;AAAA;AAAA,UAAK,WAAWwB,iBAAOmE,UAAvB;AAEIH,uBACE1E,eAAKC,SAAL,CAAe,aAAf,EAA8Bf,aAA9B,CADF,GAEE,8BAAC,yBAAD,IAAiB,WAAWsF,SAA5B,EAAuC,QAAQC,MAA/C,GAJN;AAME;AAAA;AAAA,YAAM,WAAW/D,iBAAOoE,KAAxB;AAAA;AAAA,SANF;AAOE;AAAA;AAAA,YAAM,OAAOF,mBAAb;AACGA;AADH;AAPF,OADF;AAaD;;;6CAEwB;AACvB,aAAO,+BAAU,KAAKzC,KAAL,CAAWe,IAArB,IACJ,KAAKf,KAAL,CAAWe,IAAX,CAAgB6B,IAAhB,CAAqBC,IADjB,GAEJ,KAAK7C,KAAL,CAAWe,IAAX,CAAgB+B,EAAhB,CAAmBD,IAFtB;AAGD;;;wCAgCyC;AAAA,UAAxBE,SAAwB,uEAAZ,KAAK/C,KAAO;;AACxC,aAAO,+BAAU+C,UAAUhC,IAApB,IACLgC,UAAUhC,IAAV,CAAeiC,WADV,GAELD,UAAUhC,IAAV,CAAekC,SAFjB;AAGD;;;qCAEgB;AACf,aAAO,+BAAU,KAAKjD,KAAL,CAAWe,IAArB,IACJ,KAAKf,KAAL,CAAWe,IAAX,CAAgB6B,IAAhB,CAAqBM,WAArB,IAAoC,KAAKlD,KAAL,CAAWe,IAAX,CAAgB6B,IAAhB,CAAqBO,eADrD,GAEJ,KAAKnD,KAAL,CAAWe,IAAX,CAAgB+B,EAAhB,CAAmBI,WAAnB,IAAkC,KAAKlD,KAAL,CAAWe,IAAX,CAAgB+B,EAAhB,CAAmBK,eAFxD;AAGD;;;6BAEQ;AAAA,oBA2BH,KAAKnD,KA3BF;AAAA,UAGHgB,eAHG,WAELD,IAFK,CAGHC,eAHG;AAAA,UAKLuB,YALK,WAKLA,YALK;AAAA,UAMLxF,aANK,WAMLA,aANK;AAAA,UAOLqG,QAPK,WAOLA,QAPK;AAAA,UAQLC,WARK,WAQLA,WARK;AAAA,UASLC,qBATK,WASLA,qBATK;AAAA,UAULhC,SAVK,WAULA,SAVK;AAAA,UAWLiC,KAXK,WAWLA,KAXK;AAAA,UAYLC,6BAZK,WAYLA,6BAZK;AAAA,UAaLtG,cAbK,WAaLA,cAbK;AAAA,UAcLC,cAdK,WAcLA,cAdK;AAAA,UAeLsG,WAfK,WAeLA,WAfK;AAAA,UAgBLC,iBAhBK,WAgBLA,iBAhBK;AAAA,UAiBLC,iBAjBK,WAiBLA,iBAjBK;AAAA,UAkBLC,mBAlBK,WAkBLA,mBAlBK;AAAA,UAmBL/B,kBAnBK,WAmBLA,kBAnBK;AAAA,UAoBLzE,YApBK,WAoBLA,YApBK;AAAA,UAqBLyG,OArBK,WAqBLA,OArBK;AAAA,UAsBLxG,aAtBK,WAsBLA,aAtBK;AAAA,UAuBLC,QAvBK,WAuBLA,QAvBK;AAAA,UAwBLC,YAxBK,WAwBLA,YAxBK;AAAA,UAyBLC,WAzBK,WAyBLA,WAzBK;AAAA,UA0BLgF,cA1BK,WA0BLA,cA1BK;AAAA,mBA6ByB,KAAKrB,KA7B9B;AAAA,UA6BCL,SA7BD,UA6BCA,SA7BD;AAAA,UA6BYS,QA7BZ,UA6BYA,QA7BZ;;AA8BP,UAAM2B,cAAc,KAAKY,cAAL,EAApB;AACA,UAAM1C,iBAAiB,KAAKhB,iBAAL,EAAvB;AACA,UAAM2D,sBAAsB,KAAKC,sBAAL,EAA5B;AACA,UAAMC,cAAc,OAAOP,iBAAP,KAA6B,UAA7B,GAClBA,kBAAkB,KAAK1D,KAAL,CAAWe,IAA7B,CADkB,GAElBlB,SAFF;AAGA,UAAMqE,cAAc,OAAOP,iBAAP,KAA6B,UAA7B,GAClBA,kBAAkB,KAAK3D,KAAL,CAAWe,IAA7B,CADkB,GAElBlB,SAFF;;AAIA,aACE;AAAA;AAAA,UAAK,SAASgE,OAAd,EAAuB,WAAW,0BAAWtF,iBAAO4F,iBAAlB,EAAqC5F,iBAAO6F,OAA5C,CAAlC;AACE,sCAAC,qBAAD;AACE,wBAAc7F,iBAAO8F,OADvB;AAEE,qBACE;AAAA;AAAA,cAAK,WAAW,0BAAW9F,iBAAO+F,QAAlB,EAA4B/F,iBAAOgG,MAAnC,CAAhB;AACE,0CAAC,oBAAD;AACE,kCAAoB1C,kBADtB;AAEE,yBAAWf,SAFb;AAGE,wBAAUS,QAHZ;AADF,WAHJ;AAUE,mBAAShD,iBAAOiG,OAVlB;AAWE,qBACE;AAAA;AAAA;AACE,0CAAC,wBAAD;AACE,kCAAoB3C,kBADtB;AAEE,2BAAaoC,WAFf;AAGE,yBACApC,qBACI,0BAAWtD,iBAAOkG,wBAAlB,CADJ,GAEI,0BAAWlG,iBAAOiD,cAAlB,EAAkCoC,mBAAlC,CANN;AAQE,8BAAgBxC,cARlB;AASE,wBAAU,KAAKD,KAAL,CAAWT,QATvB;AAUE,+BAAiB,KAAKT,eAVxB;AAWE,wBAAUsC,YAXZ;AAYE,yBAAWjB,aAAa,KAAKH,KAAL,CAAWG,SAZrC;AAaE,4BAAcyC,mBAbhB;AAcE,qCAAuBT,qBAdzB;AAeE,wBAAUF,QAfZ;AAgBE,2BAAaC,WAhBf;AAiBE,2BAAaH,WAjBf;AAkBE,6BAAenG,aAlBjB;AAmBE,qBAAOwG,KAnBT;AAoBE,+BAAiBC,6BApBnB;AAqBE,wBAAU,KArBZ;AAsBE,2BAAaC,WAtBf;AAuBE;AAvBF,cADF;AA0BGjB,6BAAiB,KAAKkC,WAAL,EAAjB,GAAsC;AA1BzC,WAZJ;AAyCE,sBACE;AAAA;AAAA;AACE,0CAAC,eAAD;AACE,uBAAS1D,eADX;AAEE,8BAAgB,KAAKS,mBAFvB;AAGE,8BAAgBvE,cAHlB;AAIE,8BAAgBC,cAJlB;AAKE,4BAAcC,YALhB;AAME,6BAAeL,aANjB;AAOE,6BAAeM,aAPjB;AAQE,wBAAUC,QARZ;AASE,4BAAcC,YAThB;AAUE,2BAAaC;AAVf,cADF;AAaG0G;AAbH;AA1CJ;AADF,OADF;AA+DD;;;EA3OyCS,gB;;kBAAvB5E,c;;;AA8OrBA,eAAeV,SAAf,GAA2B;AACzB0B,QAAMzB,oBAAUsF,KAAV,CAAgB;AACpBC,eAAWvF,oBAAUC,MAAV,CAAiBC,UADR;AAEpB4C,qBAAiB9C,oBAAUC,MAFP;AAGpB8C,eAAW/C,oBAAUwF,MAAV,CAAiBtF,UAHR;AAIpBuF,qBAAiBzF,oBAAU0F,KAAV,CAAgBxF,UAJb;AAKpBwD,iBAAa1D,oBAAU0F,KAAV,CAAgBxF,UALT;AAMpByD,eAAW3D,oBAAU0F,KAAV,CAAgBxF,UANP;AAOpBoD,UAAMtD,oBAAUsF,KAAV,CAAgB;AACpB1B,mBAAa5D,oBAAUC,MADH;AAEpB4D,uBAAiB7D,oBAAUC,MAFP;AAGpBsD,YAAMvD,oBAAUC;AAHI,KAAhB,EAIHC,UAXiB;AAYpBsD,QAAIxD,oBAAUsF,KAAV,CAAgB;AAClB1B,mBAAa5D,oBAAUC,MADL;AAElB4D,uBAAiB7D,oBAAUC,MAFT;AAGlBsD,YAAMvD,oBAAUC;AAHE,KAAhB,CAZgB;AAiBpByB,qBAAiB1B,oBAAUG;AAjBP,GAAhB,EAkBHD,UAnBsB;AAoBzB4D,YAAU9D,oBAAUC,MAAV,CAAiBC,UApBF;AAqBzB6D,eAAa/D,oBAAUC,MAAV,CAAiBC,UArBL;AAsBzBzC,iBAAeuC,oBAAUC,MAAV,CAAiBC,UAtBP;AAuBzB+C,gBAAcjD,oBAAUK,IAvBC;AAwBzB2B,aAAWhC,oBAAUK,IAxBI;AAyBzB1C,kBAAgBqC,oBAAUI,IAzBD;AA0BzBxC,kBAAgBoC,oBAAUI,IA1BD;AA2BzBvC,kBAAgBmC,oBAAUI,IA3BD;AA4BzB+B,uBAAqBnC,oBAAUI,IA5BN;AA6BzBtC,gBAAckC,oBAAUI,IA7BC;AA8BzB4D,yBAAuBhE,oBAAUK,IA9BR;AA+BzB4D,SAAOjE,oBAAUC,MA/BQ;AAgCzBiE,iCAA+BlE,oBAAUK,IAhChB;AAiCzB8D,eAAanE,oBAAUG,MAjCE;AAkCzBiE,qBAAmBpE,oBAAUI,IAlCJ;AAmCzBiE,qBAAmBrE,oBAAUI,IAnCJ;AAoCzBkE,uBAAqBtE,oBAAUC,MApCN;AAqCzBsC,sBAAoBvC,oBAAUK,IArCL;AAsCzBkE,WAASvE,oBAAUI,IAtCM;AAuCzBkB,gBAActB,oBAAUI,IAvCC;AAwCzBoC,yBAAuBxC,oBAAU2F,OAAV,CAAkB3F,oBAAUG,MAA5B,CAxCE;AAyCzBpC,iBAAeiC,oBAAUK,IAzCA;AA0CzBrC,YAAUgC,oBAAUK,IA1CK;AA2CzBpC,gBAAc+B,oBAAUK,IA3CC;AA4CzBnC,eAAa8B,oBAAUI,IA5CE;AA6CzB8C,kBAAgBlD,oBAAUK,IA7CD;AA8CzBsB,+BAA6B3B,oBAAUI;AA9Cd,CAA3B;;AAiDAK,eAAeH,YAAf,GAA8B;AAC5B0B,aAAW,KADiB;AAE5BiB,gBAAc,KAFc;AAG5BtF,kBAAgB4C,SAHY;AAI5B3C,kBAAgB2C,SAJY;AAK5B1C,kBAAgB0C,SALY;AAM5B4B,uBAAqB5B,SANO;AAO5BzC,gBAAcyC,SAPc;AAQ5ByD,yBAAuBzD,SARK;AAS5B0D,SAAO,aATqB;AAU5BC,iCAA+B,IAVH;AAW5BC,eAAa5D,SAXe;AAY5B6D,qBAAmB7D,SAZS;AAa5B8D,qBAAmB9D,SAbS;AAc5B+D,uBAAqB/D,SAdO;AAe5BgC,sBAAoB,KAfQ;AAgB5BgC,WAAShE,SAhBmB;AAiB5Be,gBAAc;AAAA,WAAKd,CAAL;AAAA,GAjBc;AAkB5BgC,yBAAuB,EAlBK;AAmB5BzE,iBAAe,KAnBa;AAoB5BC,YAAU,IApBkB;AAqB5BC,gBAAc,KArBc;AAsB5BC,eAAa;AAAA,WAAKsC,CAAL;AAAA,GAtBe;AAuB5B0C,kBAAgB,KAvBY;AAwB5BvB,+BAA6B;AAAA,WAAKnB,CAAL;AAAA;AAxBD,CAA9B","file":"index.js","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport classnames from 'classnames';\nimport sessionStatus from 'ringcentral-integration/modules/Webphone/sessionStatus';\nimport { isInbound } from 'ringcentral-integration/lib/callLogHelpers';\nimport { isOnHold } from 'ringcentral-integration/modules/Webphone/webphoneHelper';\n\nimport CallAvatar from '../CallAvatar';\nimport ContactDisplay from '../ContactDisplay';\nimport CircleButton from '../CircleButton';\nimport EndIcon from '../../assets/images/End.svg';\nimport HoldIcon from '../../assets/images/Hold.svg';\nimport VoicemailIcon from '../../assets/images/Voicemail.svg';\nimport MergeIntoConferenceIcon from '../../assets/images/MergeIntoConferenceIcon.svg';\nimport MediaObject from '../MediaObject';\nimport DurationCounter from '../DurationCounter';\n\nimport styles from './styles.scss';\nimport i18n from '../ActiveCallItem/i18n';// Reuse the exsisting translations\n\nfunction WebphoneButtons({\n  currentLocale,\n  session,\n  webphoneReject,\n  webphoneHangup,\n  webphoneResume,\n  webphoneHold,\n  showMergeCall,\n  showHold,\n  disableMerge,\n  onMergeCall,\n}) {\n  if (!session) {\n    return null;\n  }\n  let hangupFunc = webphoneHangup;\n\n  let endIcon = EndIcon;\n  let rejectTitle = i18n.getString('hangup', currentLocale);\n  const holdTitle = i18n.getString('hold', currentLocale);\n  const unholdTitle = i18n.getString('unhold', currentLocale);\n\n  if (\n    isInbound(session) &&\n    session.callStatus === sessionStatus.connecting\n  ) {\n    hangupFunc = webphoneReject;\n    endIcon = VoicemailIcon;\n    rejectTitle = i18n.getString('toVoicemail', currentLocale);\n  }\n\n  let holdBtn;\n  let mergeBtn;\n\n  if (showHold) {\n    if (isOnHold(session)) {\n      holdBtn = (\n        <span title={unholdTitle} className={styles.webphoneButton}>\n          <CircleButton\n            className={classnames(styles.holdButton, styles.active)}\n            onClick={(e) => {\n              e.stopPropagation();\n              webphoneResume(session.id);\n            }}\n            iconWidth={260}\n            iconX={120}\n            icon={HoldIcon}\n            showBorder\n          />\n        </span>\n      );\n    } else {\n      holdBtn = (\n        <span title={holdTitle} className={styles.webphoneButton}>\n          <CircleButton\n            className={styles.holdButton}\n            onClick={(e) => {\n              e.stopPropagation();\n              webphoneHold(session.id);\n            }}\n            iconWidth={260}\n            iconX={120}\n            icon={HoldIcon}\n            showBorder\n          />\n        </span>\n      );\n    }\n  }\n\n  if (showMergeCall) {\n    const mergeTitle = i18n.getString('mergeToConference', currentLocale);\n\n    mergeBtn = (\n      <span title={mergeTitle} className={styles.webphoneButton}>\n        <CircleButton\n          className={\n            classnames({\n              [styles.mergeButton]: true,\n              [styles.disabled]: disableMerge\n            })\n          }\n          onClick={(e) => {\n            e.stopPropagation();\n            onMergeCall(session.id);\n          }}\n          iconWidth={260}\n          iconX={120}\n          icon={MergeIntoConferenceIcon}\n          showBorder\n          disabled={disableMerge}\n        />\n      </span>\n    );\n  }\n\n  return (\n    <div className={styles.webphoneButtons}>\n      {mergeBtn}\n      {holdBtn}\n      <span title={rejectTitle} className={styles.webphoneButton}>\n        <CircleButton\n          className={styles.rejectButton}\n          onClick={(e) => {\n            e.stopPropagation();\n            hangupFunc(session.id);\n          }}\n          iconWidth={260}\n          iconX={120}\n          icon={endIcon}\n          showBorder={false}\n        />\n      </span>\n    </div>\n  );\n}\n\nWebphoneButtons.propTypes = {\n  currentLocale: PropTypes.string.isRequired,\n  session: PropTypes.object,\n  webphoneReject: PropTypes.func,\n  webphoneHangup: PropTypes.func,\n  webphoneResume: PropTypes.func,\n  webphoneHold: PropTypes.func,\n  showMergeCall: PropTypes.bool,\n  showHold: PropTypes.bool,\n  disableMerge: PropTypes.bool,\n  onMergeCall: PropTypes.func,\n};\n\nWebphoneButtons.defaultProps = {\n  session: undefined,\n  webphoneReject: undefined,\n  webphoneHangup: undefined,\n  webphoneResume: undefined,\n  webphoneHold: undefined,\n  showMergeCall: false,\n  showHold: true,\n  disableMerge: true,\n  onMergeCall: i => i,\n};\n\n/**\n * TODO: Gradually replace <ActiveCallItem/> with this component\n */\nexport default class ActiveCallItem extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      selected: 0,\n      isLogging: false,\n      avatarUrl: null,\n      extraNum: 0\n    };\n    this._userSelection = false;\n    this.contactDisplay = null;\n\n    this.webphoneToVoicemail = (sessionId) => {\n      if (typeof this.props.webphoneToVoicemail !== 'function') {\n        return;\n      }\n      this.props.webphoneToVoicemail(sessionId);\n      this.toVoicemailTimeout = setTimeout(() => {\n        this.props.webphoneReject(sessionId);\n      }, 3000);\n    };\n  }\n\n  setContact() {\n    const {\n      isOnConferenceCall, conferenceCallParties\n    } = this.props;\n\n    if (isOnConferenceCall) {\n      this.setState({\n        avatarUrl: conferenceCallParties.map(profile => profile.avatarUrl)[0],\n        extraNum: conferenceCallParties.length > 0 ? conferenceCallParties.length - 1 : 0\n      });\n      return;\n    }\n\n    this.onSelectContact(this.getSelectedContact());\n  }\n\n  componentDidMount() {\n    this._mounted = true;\n    this.setContact();\n  }\n\n  componentWillUnmount() {\n    this._mounted = false;\n    if (this.toVoicemailTimeout) {\n      clearTimeout(this.toVoicemailTimeout);\n      this.toVoicemailTimeout = null;\n    }\n  }\n\n  getCallInfo() {\n    const {\n      call: {\n        telephonyStatus,\n        startTime,\n        offset,\n      },\n      disableLinks,\n      currentLocale,\n      showCallDetail,\n    } = this.props;\n\n    if (!showCallDetail) {\n      return null;\n    }\n\n    const telephonyStatusInfo = i18n.getString(telephonyStatus, currentLocale);\n    return (\n      <div className={styles.callDetail}>\n        {\n          disableLinks ?\n            i18n.getString('unavailable', currentLocale) :\n            <DurationCounter startTime={startTime} offset={offset} />\n        }\n        <span className={styles.split}>|</span>\n        <span title={telephonyStatusInfo}>\n          {telephonyStatusInfo}\n        </span>\n      </div>\n    );\n  }\n\n  getFallbackContactName() {\n    return isInbound(this.props.call) ?\n      (this.props.call.from.name) :\n      (this.props.call.to.name);\n  }\n\n  onSelectContact = (value) => {\n    const nameMatches = this.getContactMatches();\n    let selectedMatcherIndex = nameMatches.findIndex(\n      match => match.id === value.id\n    );\n    if (selectedMatcherIndex < 0) {\n      selectedMatcherIndex = 0;\n    }\n    this._userSelection = true;\n    this.setState({\n      selected: selectedMatcherIndex,\n    });\n    const contact = nameMatches[selectedMatcherIndex];\n    if (contact) {\n      this.props.getAvatarUrl(contact).then((avatarUrl) => {\n        this.setState({ avatarUrl });\n      });\n      if (this.props.call.webphoneSession) {\n        this.props.updateSessionMatchedContact(this.props.call.webphoneSession.id, contact);\n      }\n    }\n  }\n\n  getSelectedContact = (selected = this.state.selected) => {\n    const contactMatches = this.getContactMatches();\n    return (selected > -1 && contactMatches[selected]) ||\n      (contactMatches.length === 1 && contactMatches[0]) ||\n      null;\n  }\n\n  getContactMatches(nextProps = this.props) {\n    return isInbound(nextProps.call) ?\n      nextProps.call.fromMatches :\n      nextProps.call.toMatches;\n  }\n\n  getPhoneNumber() {\n    return isInbound(this.props.call) ?\n      (this.props.call.from.phoneNumber || this.props.call.from.extensionNumber) :\n      (this.props.call.to.phoneNumber || this.props.call.to.extensionNumber);\n  }\n\n  render() {\n    const {\n      call: {\n        webphoneSession,\n      },\n      disableLinks,\n      currentLocale,\n      areaCode,\n      countryCode,\n      enableContactFallback,\n      isLogging,\n      brand,\n      showContactDisplayPlaceholder,\n      webphoneHangup,\n      webphoneResume,\n      sourceIcons,\n      renderContactName,\n      renderExtraButton,\n      contactDisplayStyle,\n      isOnConferenceCall,\n      webphoneHold,\n      onClick,\n      showMergeCall,\n      showHold,\n      disableMerge,\n      onMergeCall,\n      showCallDetail,\n    } = this.props;\n\n    const { avatarUrl, extraNum } = this.state;\n    const phoneNumber = this.getPhoneNumber();\n    const contactMatches = this.getContactMatches();\n    const fallbackContactName = this.getFallbackContactName();\n    const contactName = typeof renderContactName === 'function' ?\n      renderContactName(this.props.call) :\n      undefined;\n    const extraButton = typeof renderExtraButton === 'function' ?\n      renderExtraButton(this.props.call) :\n      undefined;\n\n    return (\n      <div onClick={onClick} className={classnames(styles.callItemContainer, styles.pointer)}>\n        <MediaObject\n          containerCls={styles.wrapper}\n          mediaLeft={\n            <div className={classnames(styles.callIcon, styles.avatar)}>\n              <CallAvatar\n                isOnConferenceCall={isOnConferenceCall}\n                avatarUrl={avatarUrl}\n                extraNum={extraNum} />\n            </div>\n          }\n          bodyCls={styles.content}\n          mediaBody={\n            <div>\n              <ContactDisplay\n                isOnConferenceCall={isOnConferenceCall}\n                contactName={contactName}\n                className={\n                isOnConferenceCall\n                  ? classnames(styles.conferenceContactDisplay)\n                  : classnames(styles.contactDisplay, contactDisplayStyle)\n              }\n                contactMatches={contactMatches}\n                selected={this.state.selected}\n                onSelectContact={this.onSelectContact}\n                disabled={disableLinks}\n                isLogging={isLogging || this.state.isLogging}\n                fallBackName={fallbackContactName}\n                enableContactFallback={enableContactFallback}\n                areaCode={areaCode}\n                countryCode={countryCode}\n                phoneNumber={phoneNumber}\n                currentLocale={currentLocale}\n                brand={brand}\n                showPlaceholder={showContactDisplayPlaceholder}\n                showType={false}\n                sourceIcons={sourceIcons}\n                stopPropagation\n              />\n              {showCallDetail ? this.getCallInfo() : null}\n            </div>\n        }\n          mediaRight={\n            <div>\n              <WebphoneButtons\n                session={webphoneSession}\n                webphoneReject={this.webphoneToVoicemail}\n                webphoneHangup={webphoneHangup}\n                webphoneResume={webphoneResume}\n                webphoneHold={webphoneHold}\n                currentLocale={currentLocale}\n                showMergeCall={showMergeCall}\n                showHold={showHold}\n                disableMerge={disableMerge}\n                onMergeCall={onMergeCall}\n            />\n              {extraButton}\n            </div>\n        }\n      />\n      </div>\n    );\n  }\n}\n\nActiveCallItem.propTypes = {\n  call: PropTypes.shape({\n    direction: PropTypes.string.isRequired,\n    telephonyStatus: PropTypes.string,\n    startTime: PropTypes.number.isRequired,\n    activityMatches: PropTypes.array.isRequired,\n    fromMatches: PropTypes.array.isRequired,\n    toMatches: PropTypes.array.isRequired,\n    from: PropTypes.shape({\n      phoneNumber: PropTypes.string,\n      extensionNumber: PropTypes.string,\n      name: PropTypes.string,\n    }).isRequired,\n    to: PropTypes.shape({\n      phoneNumber: PropTypes.string,\n      extensionNumber: PropTypes.string,\n      name: PropTypes.string,\n    }),\n    webphoneSession: PropTypes.object,\n  }).isRequired,\n  areaCode: PropTypes.string.isRequired,\n  countryCode: PropTypes.string.isRequired,\n  currentLocale: PropTypes.string.isRequired,\n  disableLinks: PropTypes.bool,\n  isLogging: PropTypes.bool,\n  webphoneReject: PropTypes.func,\n  webphoneHangup: PropTypes.func,\n  webphoneResume: PropTypes.func,\n  webphoneToVoicemail: PropTypes.func,\n  webphoneHold: PropTypes.func,\n  enableContactFallback: PropTypes.bool,\n  brand: PropTypes.string,\n  showContactDisplayPlaceholder: PropTypes.bool,\n  sourceIcons: PropTypes.object,\n  renderContactName: PropTypes.func,\n  renderExtraButton: PropTypes.func,\n  contactDisplayStyle: PropTypes.string,\n  isOnConferenceCall: PropTypes.bool,\n  onClick: PropTypes.func,\n  getAvatarUrl: PropTypes.func,\n  conferenceCallParties: PropTypes.arrayOf(PropTypes.object),\n  showMergeCall: PropTypes.bool,\n  showHold: PropTypes.bool,\n  disableMerge: PropTypes.bool,\n  onMergeCall: PropTypes.func,\n  showCallDetail: PropTypes.bool,\n  updateSessionMatchedContact: PropTypes.func,\n};\n\nActiveCallItem.defaultProps = {\n  isLogging: false,\n  disableLinks: false,\n  webphoneReject: undefined,\n  webphoneHangup: undefined,\n  webphoneResume: undefined,\n  webphoneToVoicemail: undefined,\n  webphoneHold: undefined,\n  enableContactFallback: undefined,\n  brand: 'RingCentral',\n  showContactDisplayPlaceholder: true,\n  sourceIcons: undefined,\n  renderContactName: undefined,\n  renderExtraButton: undefined,\n  contactDisplayStyle: undefined,\n  isOnConferenceCall: false,\n  onClick: undefined,\n  getAvatarUrl: i => i,\n  conferenceCallParties: [],\n  showMergeCall: false,\n  showHold: true,\n  disableMerge: false,\n  onMergeCall: i => i,\n  showCallDetail: false,\n  updateSessionMatchedContact: i => i,\n};\n"]}