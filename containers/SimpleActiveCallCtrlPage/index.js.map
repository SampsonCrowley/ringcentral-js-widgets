{"version":3,"sources":["containers/SimpleActiveCallCtrlPage/index.js"],"names":["mapToProps","_","phone","activeCallControl","regionSettings","activeCalls","contactMatcher","alert","routerInteraction","mapToFunctions","ActiveCallControl","props","currentLocale","activeSessionsStatus","sessionId","activeSessionId","currentActiveSessionStatus","activeCall","String","calls","dataMapping","fallBackName","fallBackNumber","muteCtrl","ACTIONS_CTRL_MAP","transferCtrl","holdCtrl","callCtrlProps","phoneNumber","nameMatches","onMute","mute","onUnmute","unmute","onHold","hold","onUnhold","unHold","onHangup","hangUp","onTransfer","number","transfer","showBackButton","backButtonLabel","i18n","getString","onBackButtonClick","goBack","formatPhone","areaCode","countryCode","selectedMatcherIndex","onSelectMatcherName","searchContactList","searchContact","value","layout","callCtrlLayouts","normalCtrl","startTime","actions","isOnMute","isOnHold","uselessProps","recordStatus","onRecord","onStopRecord","onAdd","onMerge","onFlip","onPark","onKeyPadChange","Component","propTypes","PropTypes","string","object","func","array","defaultProps"],"mappings":"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","file":"index.js","sourcesContent":["/**\n * @file simplify active call control page\n * detail: https://jira.ringcentral.com/browse/RCINT-8256\n */\n\nimport { connect } from 'react-redux';\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport formatNumber from 'ringcentral-integration/lib/formatNumber';\n\nimport withPhone from '../../lib/withPhone';\n\nimport CallCtrlPanel from '../../components/CallCtrlPanel';\nimport callCtrlLayouts from '../../enums/callCtrlLayouts';\nimport { ACTIONS_CTRL_MAP } from '../../components/ActiveCallPad';\nimport i18n from './i18n';\nimport { pickEleByProps, pickFallBackInfo } from './utils';\n\nfunction mapToProps(_, { phone }) {\n  const {\n    activeCallControl, regionSettings, activeCalls, contactMatcher,\n    alert, routerInteraction,\n  } = phone;\n  return {\n    activeCallControl,\n    regionSettings,\n    activeCalls,\n    contactMatcher,\n    alert,\n    routerInteraction,\n  };\n}\n\nfunction mapToFunctions(_, { phone }) {\n  return {};\n}\n/* eslint-disable react/prefer-stateless-function */\nclass ActiveCallControl extends Component {\n  render() {\n    const {\n      currentLocale,\n      activeCallControl,\n      regionSettings,\n      activeCalls,\n      contactMatcher,\n      routerInteraction\n    } = this.props;\n\n    const { activeSessionsStatus, activeSessionId: sessionId } = activeCallControl;\n    const currentActiveSessionStatus = activeSessionsStatus[sessionId];\n    const activeCall = pickEleByProps(\n      { sessionId: String(sessionId) },\n      activeCalls.calls\n    )[0] || {};\n\n    const { fallBackName, fallBackNumber } = pickFallBackInfo(\n      activeCall,\n      contactMatcher.dataMapping,\n      currentLocale\n    );\n    const { muteCtrl, transferCtrl, holdCtrl } = ACTIONS_CTRL_MAP;\n    const callCtrlProps = {\n      fallBackName,\n      currentLocale,\n      phoneNumber: fallBackNumber,\n      nameMatches: [],\n      onMute: async () => activeCallControl.mute(sessionId),\n      onUnmute: async () => activeCallControl.unmute(sessionId),\n      onHold: async () => activeCallControl.hold(sessionId),\n      onUnhold: async () => activeCallControl.unHold(sessionId),\n      onHangup: async () => activeCallControl.hangUp(sessionId),\n      onTransfer: async number => activeCallControl.transfer(number, sessionId),\n      showBackButton: true,\n      backButtonLabel: i18n.getString('allCalls', currentLocale),\n      onBackButtonClick: async () => routerInteraction.goBack(),\n      formatPhone: phoneNumber => formatNumber({\n        phoneNumber,\n        areaCode: regionSettings.areaCode,\n        countryCode: regionSettings.countryCode,\n      }),\n      areaCode: regionSettings.areaCode,\n      countryCode: regionSettings.countryCode,\n      selectedMatcherIndex: 0,\n      onSelectMatcherName: () => null,\n      searchContactList: this.props.searchContactList,\n      searchContact: value => this.props.searchContact(value),\n      layout: callCtrlLayouts.normalCtrl,\n      startTime: activeCall.startTime,\n      actions: [muteCtrl, transferCtrl, holdCtrl],\n      isOnMute: currentActiveSessionStatus.isOnMute,\n      isOnHold: currentActiveSessionStatus.isOnHold,\n    };\n\n    const uselessProps = {\n      recordStatus: '',\n      onRecord: () => null,\n      onStopRecord: () => null,\n      onAdd: () => null,\n      onMerge: () => null,\n      onFlip: () => null,\n      onPark: () => null,\n      onKeyPadChange: () => null,\n    };\n\n    const props = {\n      ...callCtrlProps,\n      ...uselessProps\n    };\n\n    return <CallCtrlPanel {...props} />;\n  }\n}\n\nActiveCallControl.propTypes = {\n  currentLocale: PropTypes.string,\n  activeCallControl: PropTypes.object,\n  regionSettings: PropTypes.object,\n  activeCalls: PropTypes.object,\n  contactMatcher: PropTypes.object,\n  alert: PropTypes.object,\n  routerInteraction: PropTypes.object,\n  searchContact: PropTypes.func,\n  searchContactList: PropTypes.array,\n};\n\nActiveCallControl.defaultProps = {\n  currentLocale: 'en-US',\n  activeCallControl: {},\n  regionSettings: {},\n  activeCalls: {},\n  contactMatcher: {},\n  alert: {},\n  routerInteraction: {},\n  searchContact() {},\n  searchContactList: []\n};\n\nexport default withPhone(connect(mapToProps, mapToFunctions)(ActiveCallControl));\n"]}