{"version":3,"sources":["components/MessageItem/index.js"],"names":["ConversationIcon","group","type","currentLocale","direction","title","icon","messageTypes","voiceMail","i18n","getString","styles","fax","messageDirection","inbound","conversationIcon","propTypes","PropTypes","bool","string","defaultProps","undefined","MessageItem","props","preventEventPropogation","e","target","currentTarget","stopPropagation","onSelectContact","value","idx","selected","showContactDisplayPlaceholder","parseInt","_userSelection","setState","autoLog","logConversation","redirect","prefill","getSelectedContact","state","contactMatches","conversation","correspondentMatches","length","viewSelectedContact","onViewContact","contact","phoneNumber","getPhoneNumber","matchEntitiesIds","getMatchEntitiesIds","createSelectedContact","bind","clickToDial","onClickToDial","fromType","onClickToSms","onClickItem","contactDisplay","contains","toggleExtended","onClickWrapper","showConversationDetail","conversationId","onPlayVoicemail","unreadCounts","readMessage","onMarkMessage","markMessage","onUnmarkMessage","unmarkMessage","onPreviewFax","uri","previewFaxMessages","onDeleteMessage","deleteMessage","getInitialContactIndex","isLogging","isCreating","extended","preState","_mounted","nextProps","conversationMatches","lastMatchedCorrespondentEntity","index","findIndex","id","map","item","correspondents","extensionNumber","groupNumbers","correspondent","name","entityType","onCreateContact","enableContactFallback","getFallbackContactName","onLogConversation","correspondentEntity","mmsAttachment","contentType","indexOf","subject","voicemailAttachment","duration","pageCount","faxPageCount","creationTime","dateTimeFormatter","utcTimestamp","console","error","areaCode","brand","countryCode","faxAttachment","parentDisableLinks","disableLinks","disableClickToDial","createEntityTypes","sourceIcons","showGroupNumberName","renderExtraButton","isVoicemail","isFax","getGroupPhoneNumbers","fallbackName","detail","getDetail","player","slideMenuHeight","extraButton","root","wrapper","unread","infoWrapper","embellishInfoWrapper","ref","selectedValue","dropdownSelect","detailsWithTime","details","separatrix","extendIcon","slideMenu","playContainer","actionMenuList","Component","shape","isRequired","arrayOf","number","func","array","object"],"mappings":"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","file":"index.js","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport classnames from 'classnames';\nimport messageTypes from 'ringcentral-integration/enums/messageTypes';\nimport messageDirection from 'ringcentral-integration/enums/messageDirection';\nimport {\n  messageIsTextMessage,\n  messageIsFax\n} from 'ringcentral-integration/lib/messageHelper';\n\nimport formatDuration from '../../lib/formatDuration';\n\nimport ContactDisplay from '../ContactDisplay';\nimport ActionMenuList from '../ActionMenuList';\nimport VoicemailPlayer from '../VoicemailPlayer';\nimport SlideMenu from '../SlideMenu';\n\nimport VoicemailIcon from '../../assets/images/VoicemailIcon.svg';\nimport FaxInboundIcon from '../../assets/images/FaxInbound.svg';\nimport FaxOutboundIcon from '../../assets/images/FaxOutbound.svg';\n\n\nimport ComposeTextIcon from '../../assets/images/ComposeText.svg';\nimport GroupConversationIcon from '../../assets/images/GroupConversation.svg';\n\nimport styles from './styles.scss';\nimport i18n from './i18n';\n\nfunction ConversationIcon({\n  group,\n  type,\n  currentLocale,\n  direction,\n}) {\n  let title;\n  let icon;\n  switch (type) {\n    case messageTypes.voiceMail:\n      title = i18n.getString(messageTypes.voiceMail, currentLocale);\n      icon = <VoicemailIcon width={23} className={styles.icon} />;\n      break;\n    case messageTypes.fax:\n      title = i18n.getString(messageTypes.fax, currentLocale);\n      icon = direction === messageDirection.inbound ?\n        <FaxInboundIcon width={21} className={styles.icon} /> :\n        <FaxOutboundIcon width={21} className={styles.icon} />;\n      break;\n    default:\n      title = group ?\n        i18n.getString('groupConversation', currentLocale) :\n        i18n.getString('conversation', currentLocale);\n      icon = group ?\n        <GroupConversationIcon width={19} className={styles.icon} /> :\n        <ComposeTextIcon width={18} className={styles.icon} />;\n  }\n  return (\n    <div className={styles.conversationIcon}>\n      <span title={title}>\n        {icon}\n      </span>\n    </div>\n  );\n}\nConversationIcon.propTypes = {\n  group: PropTypes.bool,\n  type: PropTypes.string,\n  currentLocale: PropTypes.string,\n  direction: PropTypes.string,\n};\nConversationIcon.defaultProps = {\n  group: false,\n  type: undefined,\n  currentLocale: undefined,\n  direction: undefined,\n};\n\nexport default class MessageItem extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      selected: this.getInitialContactIndex(),\n      isLogging: false,\n      isCreating: false,\n      extended: false,\n    };\n\n    this.toggleExtended = () => {\n      this.setState(preState => ({\n        extended: !preState.extended,\n      }));\n    };\n    this._userSelection = false;\n    /* [RCINT-4301] onSelection would trigger some state changes that would push new\n     * properties before the state has been changed. Which would reset the selected value.\n     */\n  }\n  componentDidMount() {\n    this._mounted = true;\n  }\n  componentWillReceiveProps(nextProps) {\n    if (\n      !this._userSelection &&\n      (\n        nextProps.conversation.conversationMatches !==\n        this.props.conversation.conversationMatches ||\n        nextProps.conversation.correspondentMatches !==\n        this.props.conversation.correspondentMatches\n      )\n    ) {\n      this.setState({\n        selected: this.getInitialContactIndex(nextProps),\n      });\n    }\n  }\n  componentWillUnmount() {\n    this._mounted = false;\n  }\n\n  preventEventPropogation = (e) => {\n    if (e.target !== e.currentTarget) {\n      e.stopPropagation();\n    }\n  }\n\n  onSelectContact = (value, idx) => {\n    const selected = this.props.showContactDisplayPlaceholder\n      ? parseInt(idx, 10) - 1 : parseInt(idx, 10);\n    this._userSelection = true;\n    this.setState({\n      selected,\n    });\n    if (this.props.autoLog) {\n      this.logConversation({ redirect: false, selected, prefill: false });\n    }\n  }\n  getInitialContactIndex(nextProps = this.props) {\n    const {\n      correspondentMatches,\n      lastMatchedCorrespondentEntity,\n    } = nextProps.conversation;\n    if (lastMatchedCorrespondentEntity) {\n      const index = correspondentMatches.findIndex(contact => (\n        contact.id === lastMatchedCorrespondentEntity.id\n      ));\n      if (index > -1) return index;\n    }\n    return this.props.showContactDisplayPlaceholder ? -1 : 0;\n  }\n  getSelectedContact = (selected = this.state.selected) => {\n    const contactMatches = this.props.conversation.correspondentMatches;\n    return (selected > -1 && contactMatches[selected]) ||\n      (contactMatches.length === 1 && contactMatches[0]) ||\n      null;\n  }\n  getMatchEntitiesIds() {\n    const contactMatches = this.props.conversation.correspondentMatches || [];\n    return contactMatches.map(item => item.id);\n  }\n  getPhoneNumber() {\n    const { correspondents } = this.props.conversation;\n    return (correspondents.length === 1 && correspondents[0] &&\n      (correspondents[0].phoneNumber || correspondents[0].extensionNumber)) || undefined;\n  }\n  getGroupPhoneNumbers() {\n    const { correspondents } = this.props.conversation;\n    const groupNumbers = correspondents.length > 1 ?\n      correspondents.map(correspondent =>\n        correspondent.extensionNumber || correspondent.phoneNumber || undefined\n      )\n      : null;\n    return groupNumbers;\n  }\n  getFallbackContactName() {\n    const { correspondents } = this.props.conversation;\n    return (correspondents.length === 1 &&\n      (correspondents[0].name)) || undefined;\n  }\n  viewSelectedContact = () => {\n    if (typeof this.props.onViewContact === 'function') {\n      this.props.onViewContact({\n        contact: this.getSelectedContact(),\n        phoneNumber: this.getPhoneNumber(),\n        matchEntitiesIds: this.getMatchEntitiesIds()\n      });\n    }\n  }\n  async createSelectedContact(entityType) {\n    // console.log('click createSelectedContact!!', entityType);\n    if (typeof this.props.onCreateContact === 'function' &&\n      this._mounted &&\n      !this.state.isCreating) {\n      this.setState({\n        isCreating: true,\n      });\n      // console.log('start to create: isCreating...', this.state.isCreating);\n      const phoneNumber = this.getPhoneNumber();\n      await this.props.onCreateContact({\n        phoneNumber,\n        name: this.props.enableContactFallback ? this.getFallbackContactName() : '',\n        entityType,\n      });\n\n      if (this._mounted) {\n        this.setState({\n          isCreating: false,\n        });\n        // console.log('created: isCreating...', this.state.isCreating);\n      }\n    }\n  }\n  createSelectedContact = this.createSelectedContact.bind(this);\n\n  async logConversation({ redirect = true, selected, prefill = true } = {}) {\n    if (typeof this.props.onLogConversation === 'function' &&\n      this._mounted &&\n      !this.state.isLogging\n    ) {\n      this.setState({\n        isLogging: true,\n      });\n      await this.props.onLogConversation({\n        correspondentEntity: this.getSelectedContact(selected),\n        conversationId: this.props.conversation.conversationId,\n        redirect,\n        prefill,\n      });\n      if (this._mounted) {\n        this.setState({\n          isLogging: false,\n        });\n      }\n    }\n  }\n  logConversation = this.logConversation.bind(this)\n\n  clickToDial = () => {\n    if (this.props.onClickToDial) {\n      const contact = this.getSelectedContact() || {};\n      const phoneNumber = this.getPhoneNumber();\n\n      if (phoneNumber) {\n        this.props.onClickToDial({\n          ...contact,\n          phoneNumber,\n          fromType: this.props.conversation.type\n        });\n      }\n    }\n  }\n  onClickToSms = () => {\n    if (this.props.onClickToSms) {\n      const contact = this.getSelectedContact() || {};\n      const phoneNumber = this.getPhoneNumber();\n\n      if (phoneNumber) {\n        this.props.onClickToSms({\n          ...contact,\n          phoneNumber,\n        });\n      }\n    }\n  }\n  onClickItem = (e) => {\n    if (\n      this.contactDisplay &&\n      this.contactDisplay.contains(e.target)\n    ) {\n      return;\n    }\n\n    this.toggleExtended();\n  }\n  onClickWrapper = (e) => {\n    if (\n      this.contactDisplay &&\n      this.contactDisplay.contains(e.target)\n    ) {\n      return;\n    }\n    if (messageIsTextMessage(this.props.conversation)) {\n      this.props.showConversationDetail(this.props.conversation.conversationId);\n    }\n  }\n\n  onPlayVoicemail = () => {\n    if (\n      this.props.conversation.unreadCounts > 0\n    ) {\n      this.props.readMessage(this.props.conversation.conversationId);\n    }\n  }\n\n  onMarkMessage= () => {\n    if (\n      this.props.conversation.unreadCounts === 0\n    ) {\n      this.props.markMessage(this.props.conversation.conversationId);\n    }\n  }\n\n  onUnmarkMessage = () => {\n    if (\n      this.props.conversation.unreadCounts > 0\n    ) {\n      this.props.unmarkMessage(this.props.conversation.conversationId);\n    }\n  }\n  onPreviewFax = (uri) => {\n    this.props.previewFaxMessages(uri, this.props.conversation.conversationId);\n  }\n  getDetail() {\n    const {\n      conversation,\n      currentLocale,\n    } = this.props;\n    if (messageIsTextMessage(conversation)) {\n      if (conversation.mmsAttachment && conversation.mmsAttachment.contentType.indexOf('image') > -1) {\n        return i18n.getString('imageAttachment', currentLocale);\n      }\n      return conversation.subject;\n    }\n    if (conversation.voicemailAttachment) {\n      const { duration } = conversation.voicemailAttachment;\n      return `${i18n.getString('voiceMessage', currentLocale)} (${formatDuration(duration)})`;\n    }\n    if (messageIsFax(conversation)) {\n      const pageCount = parseInt(conversation.faxPageCount, 10);\n      if (conversation.direction === messageDirection.inbound) {\n        return `${i18n.getString('faxReceived', currentLocale)}(${pageCount} ${i18n.getString('pages', currentLocale)})`;\n      }\n      return `${i18n.getString('faxSent', currentLocale)}(${pageCount} ${i18n.getString('pages', currentLocale)})`;\n    }\n    return '';\n  }\n\n  onDeleteMessage = () => {\n    this.props.deleteMessage(this.props.conversation.conversationId);\n  }\n\n  dateTimeFormatter(creationTime) {\n    try {\n      return this.props.dateTimeFormatter({ utcTimestamp: creationTime });\n    } catch (e) {\n      console.error('Format date time error', creationTime);\n      return creationTime;\n    }\n  }\n\n  render() {\n    const {\n      areaCode,\n      brand,\n      countryCode,\n      currentLocale,\n      conversation: {\n        unreadCounts,\n        correspondents,\n        correspondentMatches,\n        creationTime,\n        isLogging,\n        conversationMatches,\n        type,\n        direction,\n        voicemailAttachment,\n        faxAttachment,\n      },\n      disableLinks: parentDisableLinks,\n      disableClickToDial,\n      onClickToDial,\n      onClickToSms,\n      onLogConversation,\n      onViewContact,\n      onCreateContact,\n      createEntityTypes,\n      enableContactFallback,\n      showContactDisplayPlaceholder,\n      sourceIcons,\n      showGroupNumberName,\n      renderExtraButton,\n    } = this.props;\n    let disableLinks = parentDisableLinks;\n    const isVoicemail = type === messageTypes.voiceMail;\n    const isFax = type === messageTypes.fax;\n    if (isVoicemail && !voicemailAttachment) {\n      disableLinks = true;\n    }\n    if (isFax && !faxAttachment) {\n      disableLinks = true;\n    }\n    const groupNumbers = this.getGroupPhoneNumbers();\n    const phoneNumber = this.getPhoneNumber();\n    const fallbackName = this.getFallbackContactName();\n    const detail = this.getDetail();\n    let player;\n    let slideMenuHeight = 60;\n    if (isVoicemail) {\n      player = (\n        <VoicemailPlayer\n          className={styles.player}\n          uri={voicemailAttachment.uri}\n          duration={voicemailAttachment.duration}\n          onPlay={this.onPlayVoicemail}\n          disabled={disableLinks}\n          currentLocale={currentLocale}\n        />\n      );\n      slideMenuHeight = 88;\n    }\n    const extraButton = renderExtraButton ?\n      renderExtraButton(\n        this.props.conversation,\n        {\n          logConversation: this.logConversation,\n          isLogging: isLogging || this.state.isLogging,\n        }\n      )\n      : null;\n    return (\n      <div className={styles.root} onClick={this.onClickItem}>\n        <div\n          className={classnames(\n            styles.wrapper,\n            unreadCounts && styles.unread\n          )}\n          onClick={this.onClickWrapper}\n        >\n          <ConversationIcon\n            group={correspondents.length > 1}\n            type={type}\n            currentLocale={currentLocale}\n            direction={direction}\n          />\n          <div className={classnames(\n              styles.infoWrapper,\n              !extraButton && styles.embellishInfoWrapper\n          )}>\n            <ContactDisplay\n              reference={(ref) => { this.contactDisplay = ref; }}\n              className={classnames(\n                styles.contactDisplay,\n                unreadCounts && styles.unread\n              )}\n              selectedClassName={styles.selectedValue}\n              selectClassName={styles.dropdownSelect}\n              brand={brand}\n              contactMatches={correspondentMatches}\n              selected={this.state.selected}\n              onSelectContact={this.onSelectContact}\n              disabled={disableLinks}\n              isLogging={isLogging || this.state.isLogging}\n              fallBackName={fallbackName}\n              areaCode={areaCode}\n              countryCode={countryCode}\n              phoneNumber={phoneNumber}\n              groupNumbers={groupNumbers}\n              showGroupNumberName={showGroupNumberName}\n              currentLocale={currentLocale}\n              enableContactFallback={enableContactFallback}\n              stopPropagation={false}\n              showType={false}\n              showPlaceholder={showContactDisplayPlaceholder}\n              sourceIcons={sourceIcons}\n            />\n            <div className={styles.detailsWithTime}>\n              <div className={styles.details} title={detail}>\n                {detail}\n              </div>\n              <div className={styles.separatrix}>|</div>\n              <div className={styles.creationTime}>\n                {this.dateTimeFormatter(creationTime)}\n              </div>\n            </div>\n          </div>\n          {extraButton}\n        </div>\n        <SlideMenu\n          extended={this.state.extended}\n          onToggle={this.toggleExtended}\n          extendIconClassName={styles.extendIcon}\n          className={styles.slideMenu}\n          minHeight={0}\n          maxHeight={slideMenuHeight}\n        >\n          <div className={styles.playContainer} onClick={this.preventEventPropogation}>\n            {player}\n          </div>\n          <ActionMenuList\n            className={styles.actionMenuList}\n            currentLocale={currentLocale}\n            onLog={\n              isVoicemail || isFax || extraButton ?\n                undefined : (onLogConversation && this.logConversation)\n            }\n            onViewEntity={onViewContact && this.viewSelectedContact}\n            onCreateEntity={onCreateContact && this.createSelectedContact}\n            createEntityTypes={createEntityTypes}\n            hasEntity={correspondents.length === 1 && !!correspondentMatches.length}\n            onClickToDial={!isFax ? (onClickToDial && this.clickToDial) : undefined}\n            onClickToSms={isVoicemail ? (onClickToSms && this.onClickToSms) : undefined}\n            phoneNumber={phoneNumber}\n            disableLinks={disableLinks}\n            disableClickToDial={disableClickToDial}\n            isLogging={isLogging || this.state.isLogging}\n            isLogged={conversationMatches.length > 0}\n            isCreating={this.state.isCreating}\n            addLogTitle={i18n.getString('addLog', currentLocale)}\n            editLogTitle={i18n.getString('editLog', currentLocale)}\n            callTitle={i18n.getString('call', currentLocale)}\n            textTitle={i18n.getString('text', currentLocale)}\n            createEntityTitle={i18n.getString('addEntity', currentLocale)}\n            viewEntityTitle={i18n.getString('viewDetails', currentLocale)}\n            stopPropagation={false}\n            onDelete={isVoicemail ? this.onDeleteMessage : undefined}\n            deleteTitle={i18n.getString('delete', currentLocale)}\n            marked={unreadCounts > 0}\n            onMark={(isVoicemail || (isFax && direction === messageDirection.inbound)) ?\n              this.onMarkMessage : undefined}\n            onUnmark={(isVoicemail || (isFax && direction === messageDirection.inbound)) ?\n              this.onUnmarkMessage : undefined}\n            onPreview={isFax ? this.onPreviewFax : undefined}\n            markTitle={i18n.getString('mark', currentLocale)}\n            unmarkTitle={i18n.getString('unmark', currentLocale)}\n            faxAttachment={faxAttachment}\n            previewTitle={i18n.getString('preview', currentLocale)}\n            downloadTitle={i18n.getString('download', currentLocale)}\n          />\n        </SlideMenu>\n      </div>\n    );\n  }\n}\n\nMessageItem.propTypes = {\n  conversation: PropTypes.shape({\n    conversationId: PropTypes.string.isRequired,\n    isLogging: PropTypes.bool,\n    correspondents: PropTypes.arrayOf(PropTypes.shape({\n      name: PropTypes.string,\n      phoneNumber: PropTypes.string,\n      extensionNumber: PropTypes.string,\n    })),\n    correspondentMatches: PropTypes.arrayOf(PropTypes.shape({\n      name: PropTypes.string,\n      entityType: PropTypes.string,\n    })),\n    conversationMatches: PropTypes.arrayOf(PropTypes.shape({\n      id: PropTypes.string,\n    })),\n    unreadCounts: PropTypes.number.isRequired,\n    type: PropTypes.string.isRequired,\n    uri: PropTypes.string,\n  }).isRequired,\n  areaCode: PropTypes.string.isRequired,\n  brand: PropTypes.string.isRequired,\n  countryCode: PropTypes.string.isRequired,\n  currentLocale: PropTypes.string.isRequired,\n  onLogConversation: PropTypes.func,\n  onViewContact: PropTypes.func,\n  onCreateContact: PropTypes.func,\n  createEntityTypes: PropTypes.array,\n  onClickToDial: PropTypes.func,\n  onClickToSms: PropTypes.func,\n  disableLinks: PropTypes.bool,\n  disableClickToDial: PropTypes.bool,\n  dateTimeFormatter: PropTypes.func.isRequired,\n  showConversationDetail: PropTypes.func.isRequired,\n  readMessage: PropTypes.func.isRequired,\n  markMessage: PropTypes.func.isRequired,\n  unmarkMessage: PropTypes.func.isRequired,\n  autoLog: PropTypes.bool,\n  enableContactFallback: PropTypes.bool,\n  showContactDisplayPlaceholder: PropTypes.bool,\n  sourceIcons: PropTypes.object,\n  showGroupNumberName: PropTypes.bool,\n  deleteMessage: PropTypes.func,\n  previewFaxMessages: PropTypes.func,\n  renderExtraButton: PropTypes.func,\n};\n\nMessageItem.defaultProps = {\n  onLogConversation: undefined,\n  onClickToDial: undefined,\n  onViewContact: undefined,\n  onCreateContact: undefined,\n  createEntityTypes: undefined,\n  disableClickToDial: false,\n  onClickToSms: undefined,\n  disableLinks: false,\n  autoLog: false,\n  enableContactFallback: undefined,\n  showContactDisplayPlaceholder: true,\n  sourceIcons: undefined,\n  showGroupNumberName: false,\n  deleteMessage() {},\n  previewFaxMessages: undefined,\n  renderExtraButton: undefined,\n};\n"]}