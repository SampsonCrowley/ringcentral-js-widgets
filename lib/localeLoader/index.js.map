{"version":3,"sources":["lib/localeLoader/index.js"],"names":["module","exports","localeLoader","content","callback","async","querys","loaderUtils","getOptions","supportedLocales","fs","readdir","context","f","files","filter","chunk"],"mappings":";;;;;;;;;;AAAA;;;;AACA;;;;AACA;;;;AACA;;AACA;;;;AAEAA,OAAOC,OAAP,GAAiB,SAASC,YAAT,CAAsBC,OAAtB,EAA+B;AAAA;;AAC9C,MAAMC,WAAW,KAAKC,KAAL,EAAjB;AACA,MAAMC,SAASC,sBAAYC,UAAZ,CAAuB,IAAvB,KAAgC,EAA/C;AACA,MAAMC,mBAAmBH,OAAOG,gBAAP,IAA2B,EAApD;AACA,MAAI,gCAAaN,OAAb,CAAJ,EAA2B;AACzB,6EAAC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBACsBO,kBAAGC,OAAH,CAAW,MAAKC,OAAhB,CADtB;;AAAA;AAAA,4BACuD;AAAA,uBAAK,gCAAaC,CAAb,CAAL;AAAA,eADvD;;AAAA,4BAEG,gCAAaJ,gBAAb,CAFH;AACOK,mBADP,iBACgDC,MADhD,cAC6EA,MAD7E;;AAGCX,uBAAS,IAAT,EAAe,qCAAsB;AACnCU,4BADmC;AAEnCE,uBAAO,CAAC,4BAASb,OAAT;AAF2B,eAAtB,CAAf;;AAHD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAD;AAQD,GATD,MASO;AACLC,aAAS,IAAT,EAAeD,OAAf;AACD;AACF,CAhBD","file":"index.js","sourcesContent":["import fs from 'fs-extra';\nimport loaderUtils from 'loader-utils';\nimport generateLoaderContent from '../generateLoaderContent';\nimport { isLocaleFile, localeFilter } from '../isLocaleFile';\nimport { isLoaderFile, noChunks } from '../isLoaderFile';\n\nmodule.exports = function localeLoader(content) {\n  const callback = this.async();\n  const querys = loaderUtils.getOptions(this) || {};\n  const supportedLocales = querys.supportedLocales || [];\n  if (isLoaderFile(content)) {\n    (async () => {\n      const files = (await fs.readdir(this.context)).filter(f => isLocaleFile(f)).filter(\n        localeFilter(supportedLocales));\n      callback(null, generateLoaderContent({\n        files,\n        chunk: !noChunks(content),\n      }));\n    })();\n  } else {\n    callback(null, content);\n  }\n};\n\n"]}