{"version":3,"sources":["components/NavigationBar/index.js"],"names":["NavigationBar","props","goTo","bind","mounted","state","currentVirtualPath","nextProps","setState","tab","path","virtualPath","setTimeout","className","button","childNavigationView","currentPath","tabWidth","tabHeight","tabs","fullSizeInk","direction","NavigationButton","ChildNavigationView","isVertical","directionClass","styles","vertical","undefined","_tabWidth","_tabHeight","length","dropdownMenuTab","find","childTabs","isActive","dropdownMenu","root","map","index","view","View","icon","activeIcon","Icon","ActiveIcon","some","childTab","slice","Component","tabPropTypes","PropTypes","oneOfType","func","node","label","string","noticeCounts","number","propTypes","isRequired","element","arrayOf","shape","bool","defaultProps"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport classnames from 'classnames';\nimport styles from './styles.scss';\n\nexport default class NavigationBar extends Component {\n  constructor(props) {\n    super(props);\n    this.goTo = this.goTo.bind(this);\n    this.mounted = false;\n    this.state = {\n      currentVirtualPath: this.props.currentVirtualPath,\n    };\n  }\n\n  componentDidMount() {\n    this.mounted = true;\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.currentVirtualPath && this.mounted) {\n      this.setState({\n        currentVirtualPath: nextProps.currentVirtualPath,\n      });\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n  }\n\n  goTo(tab) {\n    this.props.goTo(tab.path, tab.virtualPath);\n    // seems like the goTo is asynchronous\n    // so here set timeout for resolving menu looks flash issue\n    setTimeout(() => {\n      if (this.mounted) {\n        this.setState({\n          currentVirtualPath: tab.virtualPath,\n        });\n      }\n    }, 10);\n  }\n\n  render() {\n    const {\n      className,\n      button,\n      childNavigationView,\n      currentPath,\n      tabWidth,\n      tabHeight,\n      tabs,\n      fullSizeInk,\n      direction,\n    } = this.props;\n\n    const NavigationButton = button;\n    const ChildNavigationView = childNavigationView;\n    const isVertical = direction === 'vertical';\n    const directionClass = isVertical ? styles.vertical : undefined;\n\n    const currentVirtualPath = this.state.currentVirtualPath;\n    let _tabWidth = 0;\n    const _tabHeight = isVertical ? (tabHeight || '50px') : '100%';\n    if (tabWidth) {\n      _tabWidth = tabWidth;\n    } else {\n      // Align equally fully\n      _tabWidth = tabs.length > 0 ?\n        `${(1 / tabs.length) * 100}%` :\n        0;\n    }\n    const dropdownMenuTab = tabs.find(tab =>\n      (\n        tab.childTabs &&\n        (tab.isActive && tab.isActive(currentPath, currentVirtualPath))\n      )\n    );\n    const dropdownMenu = dropdownMenuTab && dropdownMenuTab.childTabs;\n    return (\n      <nav className={classnames(styles.root, className, directionClass)}>\n        {\n          tabs.map((tab, index) => {\n            if (typeof tab.view === 'function') {\n              const View = tab.view;\n              return <View key={index} />;\n            }\n            let { icon, activeIcon } = tab;\n            if (typeof icon === 'function') {\n              const Icon = icon;\n              icon = (tab.childTabs ? <Icon currentPath={currentPath} /> : <Icon />);\n            }\n            if (typeof activeIcon === 'function') {\n              const ActiveIcon = activeIcon;\n              activeIcon = (tab.childTabs ?\n                <ActiveIcon currentPath={currentPath} /> : <ActiveIcon />);\n            }\n            return (\n              <NavigationButton\n                {...tab}\n                fullSizeInk={fullSizeInk}\n                key={index}\n                onClick={() => {\n                  this.goTo(tab);\n                }}\n                active={\n                  (tab.isActive && tab.isActive(currentPath, currentVirtualPath)) ||\n                  (tab.path && tab.path === currentPath) ||\n                  (tab.virtualPath && tab.virtualPath === currentVirtualPath) ||\n                  (tab.childTabs && tab.childTabs.some(childTab =>\n                    childTab.path === currentPath ||\n                    childTab.path === currentPath.slice(0, 9)\n                  ))\n                }\n                width={_tabWidth}\n                height={_tabHeight}\n                icon={icon}\n                activeIcon={activeIcon}\n              />\n            );\n          })\n        }\n        {\n          (ChildNavigationView && dropdownMenu && dropdownMenu.length) ? (\n            <ChildNavigationView\n              tabs={dropdownMenu}\n              goTo={this.goTo}\n              currentPath={currentPath}\n              currentVirtualPath={currentVirtualPath}\n            />\n          ) : null\n        }\n      </nav>\n    );\n  }\n}\n\nconst tabPropTypes = {\n  icon: PropTypes.oneOfType([\n    PropTypes.func,\n    PropTypes.node\n  ]),\n  activeIcon: PropTypes.oneOfType([\n    PropTypes.func,\n    PropTypes.node\n  ]),\n  label: PropTypes.string,\n  path: PropTypes.string,\n  virtualPath: PropTypes.string,\n  isActive: PropTypes.func,\n  noticeCounts: PropTypes.number,\n};\n\nNavigationBar.propTypes = {\n  className: PropTypes.string,\n  button: PropTypes.oneOfType([\n    PropTypes.func.isRequired,\n    PropTypes.element.isRequired\n  ]).isRequired,\n  childNavigationView: PropTypes.oneOfType([\n    PropTypes.func.isRequired,\n    PropTypes.element.isRequired\n  ]),\n  tabs: PropTypes.arrayOf(PropTypes.shape({\n    ...tabPropTypes,\n    childTabs: PropTypes.arrayOf(PropTypes.shape({\n      ...tabPropTypes,\n    })),\n  })),\n  goTo: PropTypes.func.isRequired,\n  currentPath: PropTypes.string.isRequired,\n  currentVirtualPath: PropTypes.string,\n  tabWidth: PropTypes.string,\n  tabHeight: PropTypes.string,\n  fullSizeInk: PropTypes.bool,\n  direction: PropTypes.string,\n};\n\nNavigationBar.defaultProps = {\n  className: undefined,\n  childNavigationView: undefined,\n  currentVirtualPath: undefined,\n  tabWidth: undefined,\n  tabHeight: undefined,\n  tabs: [],\n  fullSizeInk: true,\n  direction: 'horizonal'\n};\n"],"file":"index.js"}