{"version":3,"sources":["modules/SettingsPageUI/index.js"],"names":["DEFAULT_REGION_SETTINGS_URL","DEFAULT_CALLING_SETTINGS_URL","DEFAULT_AUDIO_SETTINGS_URL","DEFAULT_FEEDBACK_SETTINGS_URL","DEFAULT_MSTEAMS_SETTINGS_URL","SettingsPageUI","name","deps","dep","optional","phone","accountInfo","auth","brand","extensionInfo","locale","localeSettings","regionSettings","callingSettings","version","rolesAndPermissions","presence","showRegion","showCalling","showAudio","showFeedback","showUserGuide","showPresenceSettings","showMsteamsSettings","showQuickAccess","params","loginNumber","loggedIn","loginStatus","ready","extensionNumber","phoneNumber","mainCompanyNumber","join","countryCode","areaCode","showSpinner","callingEnabled","id","showReginSetting","currentLocale","brandId","ringoutEnabled","outboundSMS","permissions","OutboundSMS","InternalSMS","isCallQueueMember","dndStatus","userStatus","openPresenceSettings","hasEditPresencePermission","supportedLocales","savedLocale","hasUserGuidePermission","regionSettingsUrl","callingSettingsUrl","audioSettingsUrl","feedbackSettingsUrl","msteamsSettingsUrl","routerInteraction","userGuide","quickAccess","onLogoutButtonClick","logout","onRegionSettingsLinkClick","push","onCallingSettingsLinkClick","onAudioSettingsLinkClick","onFeedbackSettingsLinkClick","onMsteamsSettingsLinkClick","onUserGuideClick","start","onQuickAccessLinkClick","enter","setAvailable","setBusy","setDoNotDisturb","setInvisible","toggleAcceptCallQueueCalls","saveLocale","RcUIModule"],"mappings":"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","sourcesContent":["import {\n  Module\n} from 'ringcentral-integration/lib/di';\nimport formatNumber from 'ringcentral-integration/lib/formatNumber';\nimport loginStatus from 'ringcentral-integration/modules/Auth/loginStatus';\nimport RcUIModule from '../../lib/RcUIModule';\n\nconst DEFAULT_REGION_SETTINGS_URL = '/settings/region';\nconst DEFAULT_CALLING_SETTINGS_URL = '/settings/calling';\nconst DEFAULT_AUDIO_SETTINGS_URL = '/settings/audio';\nconst DEFAULT_FEEDBACK_SETTINGS_URL = '/settings/feedback';\nconst DEFAULT_MSTEAMS_SETTINGS_URL = '/settings/msteams';\n\n@Module({\n  name: 'SettingsPageUI',\n  deps: [\n    'Auth',\n    'Brand',\n    'Locale',\n    {\n      dep: 'Version',\n      optional: true,\n    },\n    'Presence',\n    'AccountInfo',\n    'ExtensionInfo',\n    'RegionSettings',\n    'RolesAndPermissions',\n    'RouterInteraction',\n    {\n      dep: 'CallingSettings',\n      optional: true,\n    },\n    {\n      dep: 'LocaleSettings',\n      optional: true,\n    },\n    {\n      dep: 'QuickAccess',\n      optional: true,\n    },\n    {\n      dep: 'UserGuide',\n      optional: true,\n    },\n    {\n      dep: 'SettingsPageUIOptions',\n      optional: true,\n    }\n  ]\n})\nexport default class SettingsPageUI extends RcUIModule {\n  getUIProps({\n    phone: {\n      accountInfo,\n      auth,\n      brand,\n      extensionInfo,\n      locale,\n      localeSettings,\n      regionSettings,\n      callingSettings,\n      version,\n      rolesAndPermissions,\n      presence,\n    },\n    showRegion = true,\n    showCalling = true,\n    showAudio = true,\n    showFeedback = true,\n    showUserGuide = true,\n    showPresenceSettings = true,\n    showMsteamsSettings = false,\n    showQuickAccess = false,\n    params,\n  }) {\n    let loginNumber = '';\n    const loggedIn = auth.loginStatus === loginStatus.loggedIn;\n    if (\n      loggedIn &&\n      accountInfo.ready &&\n      extensionInfo.ready\n    ) {\n      // If no extensionNumber, extensionNumber field needs to be omitted\n      const extensionNumber = extensionInfo.extensionNumber &&\n        extensionInfo.extensionNumber !== '0' ? extensionInfo.extensionNumber : null;\n      const phoneNumber = [accountInfo.mainCompanyNumber, extensionNumber].join('*');\n      loginNumber = formatNumber({\n        phoneNumber,\n        countryCode: regionSettings.countryCode,\n        areaCode: regionSettings.areaCode,\n      });\n    }\n    return {\n      version,\n      loginNumber,\n      showFeedback,\n      showQuickAccess,\n      showMsteamsSettings,\n      showSpinner: !(\n        accountInfo.ready &&\n        auth.ready &&\n        loggedIn &&\n        extensionInfo.ready &&\n        locale.ready &&\n        regionSettings.ready &&\n        (!callingSettings || callingSettings.ready) &&\n        rolesAndPermissions.ready &&\n        (!presence || presence.ready) &&\n        (!localeSettings || localeSettings.ready)\n      ),\n      showCalling: showCalling && callingSettings && rolesAndPermissions.callingEnabled,\n      showAudio: showAudio && rolesAndPermissions.callingEnabled,\n      showRegion:\n        loggedIn &&\n        brand.id === '1210' &&\n        regionSettings.showReginSetting &&\n        rolesAndPermissions.callingEnabled &&\n        showRegion,\n      currentLocale: locale.currentLocale,\n      brandId: brand.id,\n      ringoutEnabled: rolesAndPermissions.ringoutEnabled,\n      outboundSMS: !!rolesAndPermissions.permissions.OutboundSMS ||\n      !!rolesAndPermissions.permissions.InternalSMS,\n      isCallQueueMember: extensionInfo.isCallQueueMember,\n      dndStatus: presence && presence.dndStatus,\n      userStatus: presence && presence.userStatus,\n      openPresenceSettings: !!(presence && params && params.showPresenceSettings),\n      showPresenceSettings:\n        showPresenceSettings && rolesAndPermissions.hasEditPresencePermission,\n      supportedLocales: localeSettings && localeSettings.supportedLocales,\n      savedLocale: localeSettings && localeSettings.savedLocale,\n      showUserGuide: showUserGuide && rolesAndPermissions.hasUserGuidePermission,\n    };\n  }\n\n  getUIFunctions({\n    regionSettingsUrl = DEFAULT_REGION_SETTINGS_URL,\n    callingSettingsUrl = DEFAULT_CALLING_SETTINGS_URL,\n    audioSettingsUrl = DEFAULT_AUDIO_SETTINGS_URL,\n    feedbackSettingsUrl = DEFAULT_FEEDBACK_SETTINGS_URL,\n    msteamsSettingsUrl = DEFAULT_MSTEAMS_SETTINGS_URL,\n    phone: {\n      auth,\n      presence,\n      routerInteraction,\n      localeSettings,\n      userGuide,\n      quickAccess,\n    },\n  }) {\n    return {\n      async onLogoutButtonClick() {\n        await auth.logout();\n      },\n      onRegionSettingsLinkClick() {\n        routerInteraction.push(regionSettingsUrl);\n      },\n      onCallingSettingsLinkClick() {\n        routerInteraction.push(callingSettingsUrl);\n      },\n      onAudioSettingsLinkClick() {\n        routerInteraction.push(audioSettingsUrl);\n      },\n      onFeedbackSettingsLinkClick() {\n        routerInteraction.push(feedbackSettingsUrl);\n      },\n      onMsteamsSettingsLinkClick() {\n        routerInteraction.push(msteamsSettingsUrl);\n      },\n      onUserGuideClick() {\n        userGuide.start();\n      },\n      onQuickAccessLinkClick() {\n        quickAccess.enter();\n      },\n\n      setAvailable: (...args) => (presence && presence.setAvailable(...args)),\n      setBusy: (...args) => (presence && presence.setBusy(...args)),\n      setDoNotDisturb: (...args) => (presence && presence.setDoNotDisturb(...args)),\n      setInvisible: (...args) => (presence && presence.setInvisible(...args)),\n      toggleAcceptCallQueueCalls: (...args) => (\n        presence && presence.toggleAcceptCallQueueCalls(...args)\n      ),\n      saveLocale: localeSettings && (locale => localeSettings.saveLocale(locale)),\n    };\n  }\n}\n"],"file":"index.js"}