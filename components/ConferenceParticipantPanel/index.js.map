{"version":3,"sources":["components/ConferenceParticipantPanel/index.js"],"names":["ParticipantsContainer","props","state","showModal","detail","formatPrticipants","onRemoveBtnClick","onCancel","participants","formatPhone","map","participant","partyNumber","setState","nextProps","find","id","currentLocale","removeFunc","onBackButtonClick","backHeader","styles","header","i18n","getString","root","participantsListContainer","participantsCount","length","participantsList","avatarUrl","toUserName","calleeType","calleeTypes","contacts","then","Component","propTypes","PropTypes","string","isRequired","func","arrayOf","object","defaultProps","i"],"mappings":"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","file":"index.js","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport calleeTypes from 'ringcentral-integration/enums/calleeTypes';\n\nimport BackButton from '../BackButton';\nimport BackHeader from '../BackHeader';\nimport ConfirmRemoveModal from './ConfirmRemoveModal';\nimport i18n from './i18n';\nimport ParticipantItem from './ParticipantItem';\nimport styles from './styles.scss';\n\nclass ParticipantsContainer extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      showModal: false,\n      detail: null,\n    };\n    this.formatPrticipants(props);\n    this.onRemoveBtnClick = this::this.onRemoveBtnClick;\n    this.onCancel = this::this.onCancel;\n  }\n\n  formatPrticipants(props = this.props) {\n    const { participants, formatPhone } = props;\n\n    participants.map((participant) => {\n      participant.partyNumber = formatPhone(participant.partyNumber);\n      return participant;\n    });\n  }\n\n  onRemoveBtnClick(participant) {\n    this.setState(() => ({\n      detail: participant,\n      showModal: true,\n    }));\n  }\n\n  onCancel() {\n    this.setState({\n      showModal: false,\n      detail: null,\n    });\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.formatPrticipants(nextProps);\n    if (this.state.showModal\n      && !nextProps.participants.find(\n        participant => participant.id === this.state.detail.id\n      )) {\n      this.onCancel();\n    }\n  }\n\n  render() {\n    const {\n      participants,\n      currentLocale,\n      removeFunc,\n      onBackButtonClick,\n    } = this.props;\n\n    const { detail, showModal } = this.state;\n\n    const backHeader = (<BackHeader\n      className={styles.header}\n      onBackClick={onBackButtonClick}\n      backButton={<BackButton label={i18n.getString('conferenceCall', currentLocale)} />}\n    />);\n\n    return (\n      <div className={styles.root}>\n        {backHeader}\n        <div className={styles.participantsListContainer}>\n          <div className={styles.participantsCount}>\n            {\n              participants.length > 1\n              ? `${participants.length} ${i18n.getString('participants', currentLocale)}`\n              : `${participants.length} ${i18n.getString('participant', currentLocale)}`\n            }\n          </div>\n          <div className={styles.participantsList}>\n            {\n            participants.map((participant) => {\n              const {\n                avatarUrl,\n                toUserName,\n                partyNumber,\n                calleeType,\n                id,\n              } = participant;\n              let detail;\n\n              if (calleeType === calleeTypes.contacts) {\n                detail = toUserName;\n              } else {\n                detail = partyNumber;\n              }\n              return (\n                <ParticipantItem\n                  key={id}\n                  avatarUrl={avatarUrl}\n                  detail={detail}\n                  currentLocale={currentLocale}\n                  onRemove={() => this.onRemoveBtnClick(participant)}\n                />\n              );\n            })\n          }\n          </div>\n        </div>\n        <ConfirmRemoveModal\n          show={showModal}\n          detail={detail}\n          onCancel={this.onCancel}\n          currentLocale={currentLocale}\n          onRemove={\n            () => removeFunc(detail && detail.id).then(this.onCancel)\n          } />\n      </div>\n    );\n  }\n}\n\n\nParticipantsContainer.propTypes = {\n  currentLocale: PropTypes.string.isRequired,\n  removeFunc: PropTypes.func,\n  participants: PropTypes.arrayOf(PropTypes.object).isRequired,\n  onBackButtonClick: PropTypes.func,\n  formatPhone: PropTypes.func,\n};\n\nParticipantsContainer.defaultProps = {\n  removeFunc: i => i,\n  onBackButtonClick: i => i,\n  formatPhone: i => i,\n};\n\nexport default ParticipantsContainer;\n"]}