{"version":3,"sources":["modules/OAuth/index.js"],"names":["OAuth","name","deps","dep","optional","redirectUri","options","oAuthReady","window","oAuthCallback","callbackUri","_handleCallbackUri","store","dispatch","type","actionTypes","setupOAuth","destroyOAuth","oAuthUri","OAuthBase","background","proxify"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;AACA;;AACA;;AACA;;AAEA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAQqBA,K,WANpB,gBAAO;AACNC,EAAAA,IAAI,EAAE,OADA;AAENC,EAAAA,IAAI,EAAE,CACJ;AAAEC,IAAAA,GAAG,EAAE,cAAP;AAAuBC,IAAAA,QAAQ,EAAE;AAAjC,GADI;AAFA,CAAP,C;;;;;AAOC,uBAGG;AAAA,gCAFDC,WAEC;AAAA,QAFDA,WAEC,iCAFa,iBAEb;AAAA,QADEC,OACF;;AAAA;;AAAA;AAECD,MAAAA,WAAW,EAAXA;AAFD,OAGIC,OAHJ;AAKF;;;;;;;;;;;;;;AAQC,oBACE,CAAC,KAAKC,UADR,EAEE;AACAC,kBAAAA,MAAM,CAACC,aAAP,GAAuB,UAAAC,WAAW;AAAA,2BAAI,KAAI,CAACC,kBAAL,CAAwBD,WAAxB,CAAJ;AAAA,mBAAlC;;AACA,uBAAKE,KAAL,CAAWC,QAAX,CAAoB;AAClBC,oBAAAA,IAAI,EAAE,KAAKC,WAAL,CAAiBC;AADL,mBAApB;AAGD;;;;;;;;;;;;;;;;;;;;;;;;;;AAKD,oBACE,KAAKT,UADP,EAEE;AACAC,kBAAAA,MAAM,CAACC,aAAP,GAAuB,IAAvB;AACA,uBAAKG,KAAL,CAAWC,QAAX,CAAoB;AAClBC,oBAAAA,IAAI,EAAE,KAAKC,WAAL,CAAiBE;AADL,mBAApB;AAGD;;;;;;;;;;;;;;;;;;oCAIa;AACd,UAAI,KAAKV,UAAT,EAAqB;AACnB,mCAAU,KAAKW,QAAf,EAAyB,UAAzB,EAAqC,GAArC,EAA0C,GAA1C;AACD;AACF;;;wBAjCU;AACT,aAAO,OAAP;AACD;;;;EAbgCC,sB,gEAehCC,sB,uJAYAA,sB,0JAYAC,mB","sourcesContent":["import background from 'ringcentral-integration/lib/background';\nimport { Module } from 'ringcentral-integration/lib/di';\nimport popWindow from 'ringcentral-integration/lib/popWindow';\nimport proxify from 'ringcentral-integration/lib/proxy/proxify';\n\nimport OAuthBase from '../../lib/OAuthBase';\n\n@Module({\n  name: 'OAuth',\n  deps: [\n    { dep: 'OAuthOptions', optional: true }\n  ],\n})\nexport default class OAuth extends OAuthBase {\n  constructor({\n    redirectUri = './redirect.html',\n    ...options\n  }) {\n    super({\n      redirectUri,\n      ...options,\n    });\n  }\n\n  get name() {\n    return 'OAuth';\n  }\n\n  @background\n  async setupOAuth() {\n    if (\n      !this.oAuthReady\n    ) {\n      window.oAuthCallback = callbackUri => this._handleCallbackUri(callbackUri);\n      this.store.dispatch({\n        type: this.actionTypes.setupOAuth,\n      });\n    }\n  }\n\n  @background\n  async destroyOAuth() {\n    if (\n      this.oAuthReady\n    ) {\n      window.oAuthCallback = null;\n      this.store.dispatch({\n        type: this.actionTypes.destroyOAuth,\n      });\n    }\n  }\n\n  @proxify\n  openOAuthPage() {\n    if (this.oAuthReady) {\n      popWindow(this.oAuthUri, 'rc-oauth', 600, 600);\n    }\n  }\n}\n"],"file":"index.js"}