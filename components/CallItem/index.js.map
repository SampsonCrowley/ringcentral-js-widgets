{"version":3,"sources":["components/CallItem/index.js"],"names":["callIconMap","callDirections","inbound","dynamicsFont","outbound","missed","CallIcon","direction","active","ringing","inboundTitle","outboundTitle","missedTitle","type","icon","messageTypes","fax","messageDirection","title","styles","activeCall","callIcon","propTypes","PropTypes","string","isRequired","bool","defaultProps","CallItem","props","onSelectContact","value","idx","selected","showContactDisplayPlaceholder","parseInt","_userSelection","setState","autoLog","logCall","redirect","toggleExtended","e","contactDisplay","contains","target","onSizeChanged","renderIndex","state","extended","getSelectedContact","contactMatches","getContactMatches","length","bind","viewSelectedContact","onViewContact","contact","createSelectedContact","entityType","onCreateContact","_mounted","isCreating","phoneNumber","getPhoneNumber","name","enableContactFallback","getFallbackContactName","clickToSms","countryCode","areaCode","onClickToSms","formatted","clickToDial","onClickToDial","externalViewEntity","call","getInitialContactIndex","isLogging","loading","_loadingTimeout","setTimeout","nextProps","activityMatches","fromMatches","toMatches","clearTimeout","activity","index","findIndex","isLoggedContact","toNumberEntity","id","from","extensionNumber","to","onLogCall","root","telephonyStatus","result","startTime","duration","offset","toName","brand","currentLocale","disableLinks","disableClickToDial","outboundSmsPermission","internalSmsPermission","createEntityTypes","dateTimeFormatter","sourceIcons","phoneTypeRenderer","phoneSourceNameRenderer","renderContactName","renderExtraButton","contactDisplayStyle","externalHasEntity","readTextPermission","withAnimation","fallbackContactName","parsedInfo","isExtension","hasPlus","number","disableClickToSms","durationEl","i18n","getString","dateEl","utcTimestamp","statusEl","contactName","undefined","extraButton","menuExtended","wrapper","infoWrapper","ref","dropdownSelect","details","Component","shape","array","webphoneSession","object","func"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport classnames from 'classnames';\nimport 'core-js/fn/array/find';\nimport callDirections from 'ringcentral-integration/enums/callDirections';\nimport messageTypes from 'ringcentral-integration/enums/messageTypes';\nimport messageDirection from 'ringcentral-integration/enums/messageDirection';\nimport {\n  isInbound,\n  isRinging,\n  isMissed,\n} from 'ringcentral-integration/lib/callLogHelpers';\nimport parseNumber from 'ringcentral-integration/lib/parseNumber';\nimport formatNumber from 'ringcentral-integration/lib/formatNumber';\nimport dynamicsFont from '../../assets/DynamicsFont/DynamicsFont.scss';\nimport DurationCounter from '../DurationCounter';\nimport ContactDisplay from '../ContactDisplay';\nimport formatDuration from '../../lib/formatDuration';\nimport ActionMenu from '../ActionMenu';\nimport FaxInboundIcon from '../../assets/images/FaxInbound.svg';\nimport FaxOutboundIcon from '../../assets/images/FaxOutbound.svg';\nimport styles from './styles.scss';\n\nimport i18n from './i18n';\n\nconst callIconMap = {\n  [callDirections.inbound]: dynamicsFont.inbound,\n  [callDirections.outbound]: dynamicsFont.outbound,\n  missed: dynamicsFont.missed,\n};\n\nfunction CallIcon({\n  direction,\n  missed,\n  active,\n  ringing,\n  inboundTitle,\n  outboundTitle,\n  missedTitle,\n  type,\n}) {\n  let icon = null;\n  switch (type) {\n    case messageTypes.fax: {\n      icon =\n        direction === messageDirection.inbound ? (\n          <span title={inboundTitle}>\n            <FaxInboundIcon width={21} />\n          </span>\n        ) : (\n          <span title={outboundTitle}>\n            <FaxOutboundIcon width={21} />\n          </span>\n        );\n      break;\n    }\n    default: {\n      let title = null;\n      if (missed) {\n        title = missedTitle;\n      } else if (direction === callDirections.inbound) {\n        title = inboundTitle;\n      } else {\n        title = outboundTitle;\n      }\n      icon = (\n        <span\n          className={classnames(\n            missed ? callIconMap.missed : callIconMap[direction],\n            active && styles.activeCall,\n            ringing && styles.ringing,\n            missed && styles.missed,\n          )}\n          title={title}\n        />\n      );\n    }\n  }\n  return <div className={styles.callIcon}>{icon}</div>;\n}\nCallIcon.propTypes = {\n  direction: PropTypes.string.isRequired,\n  missed: PropTypes.bool,\n  active: PropTypes.bool,\n  ringing: PropTypes.bool,\n  inboundTitle: PropTypes.string,\n  outboundTitle: PropTypes.string,\n  missedTitle: PropTypes.string,\n  type: PropTypes.string,\n};\nCallIcon.defaultProps = {\n  missed: false,\n  active: false,\n  ringing: false,\n  inboundTitle: '',\n  outboundTitle: '',\n  missedTitle: '',\n  type: '',\n};\n\nexport default class CallItem extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      selected: this.getInitialContactIndex(),\n      isLogging: false,\n      isCreating: false,\n      loading: true,\n      extended: false,\n    };\n    this._userSelection = false;\n  }\n  componentDidMount() {\n    this._mounted = true;\n    this._loadingTimeout = setTimeout(() => {\n      // clear timeout is probably not necessary\n      if (this._mounted) {\n        this.setState({\n          loading: false,\n        });\n      }\n    }, 10);\n  }\n  componentWillReceiveProps(nextProps) {\n    if (\n      !this._userSelection &&\n      (nextProps.call.activityMatches !== this.props.call.activityMatches ||\n        nextProps.call.fromMatches !== this.props.call.fromMatches ||\n        nextProps.call.toMatches !== this.props.call.toMatches)\n    ) {\n      this.setState({\n        selected: this.getInitialContactIndex(nextProps),\n      });\n    }\n    if (\n      this.props.extended !== nextProps.extended &&\n      this.state.extended !== nextProps.extended\n    ) {\n      this.setState({\n        extended: nextProps.extended,\n      });\n    }\n  }\n\n  componentWillUnmount() {\n    this._mounted = false;\n    if (this._loadingTimeout) {\n      clearTimeout(this._loadingTimeout);\n      this._loadingTimeout = null;\n    }\n  }\n  onSelectContact = (value, idx) => {\n    const selected = this.props.showContactDisplayPlaceholder\n      ? parseInt(idx, 10) - 1\n      : parseInt(idx, 10);\n    this._userSelection = true;\n    this.setState({\n      selected,\n    });\n    if (this.props.autoLog) {\n      this.logCall({ redirect: false, selected });\n    }\n  };\n\n  toggleExtended = (e) => {\n    if (this.contactDisplay && this.contactDisplay.contains(e.target)) {\n      return;\n    }\n    const {\n      onSizeChanged,\n      renderIndex,\n    } = this.props;\n    if (onSizeChanged) {\n      onSizeChanged(renderIndex);\n    } else {\n      this.setState(state => ({\n        extended: !state.extended,\n      }));\n    }\n  };\n\n  getInitialContactIndex(nextProps = this.props) {\n    const contactMatches = this.getContactMatches(nextProps);\n    const activityMatches = nextProps.call.activityMatches;\n    // console.log('getInitialContactIndex:', nextProps.call.toNumberEntity);\n    for (const activity of activityMatches) {\n      const index = contactMatches.findIndex(contact =>\n        // TODO find a better name or mechanism...\n        this.props.isLoggedContact(nextProps.call, activity, contact),\n      );\n      if (index > -1) return index;\n    }\n    if (nextProps.call.toNumberEntity) {\n      const index = contactMatches.findIndex(\n        contact => contact.id === nextProps.call.toNumberEntity,\n      );\n      return index;\n    }\n    return this.props.showContactDisplayPlaceholder ? -1 : 0;\n  }\n  getSelectedContact = (selected = this.state.selected) => {\n    const contactMatches = this.getContactMatches();\n    return (\n      (selected > -1 && contactMatches[selected]) ||\n      (contactMatches.length === 1 && contactMatches[0]) ||\n      null\n    );\n  };\n  getPhoneNumber() {\n    return isInbound(this.props.call)\n      ? this.props.call.from.phoneNumber || this.props.call.from.extensionNumber\n      : this.props.call.to.phoneNumber || this.props.call.to.extensionNumber;\n  }\n  getContactMatches(nextProps = this.props) {\n    return isInbound(nextProps.call)\n      ? nextProps.call.fromMatches\n      : nextProps.call.toMatches;\n  }\n  getFallbackContactName() {\n    return isInbound(this.props.call)\n      ? this.props.call.from.name\n      : this.props.call.to.name;\n  }\n  async logCall({ redirect = true, selected }) {\n    if (\n      typeof this.props.onLogCall === 'function' &&\n      this._mounted &&\n      !this.state.isLogging\n    ) {\n      this.setState({\n        isLogging: true,\n      });\n      await this.props.onLogCall({\n        contact: this.getSelectedContact(selected),\n        call: this.props.call,\n        redirect,\n      });\n      if (this._mounted) {\n        this.setState({\n          isLogging: false,\n        });\n      }\n    }\n  }\n  logCall = this.logCall.bind(this);\n\n  viewSelectedContact = () => {\n    if (typeof this.props.onViewContact === 'function') {\n      this.props.onViewContact({\n        contact: this.getSelectedContact(),\n      });\n    }\n  };\n\n  createSelectedContact = async (entityType) => {\n    // console.log('click createSelectedContact!!', entityType);\n    if (\n      typeof this.props.onCreateContact === 'function' &&\n      this._mounted &&\n      !this.state.isCreating\n    ) {\n      this.setState({\n        isCreating: true,\n      });\n      // console.log('start to create: isCreating...', this.state.isCreating);\n      const phoneNumber = this.getPhoneNumber();\n      await this.props.onCreateContact({\n        phoneNumber,\n        name: this.props.enableContactFallback\n          ? this.getFallbackContactName()\n          : '',\n        entityType,\n      });\n\n      if (this._mounted) {\n        this.setState({\n          isCreating: false,\n        });\n        // console.log('created: isCreating...', this.state.isCreating);\n      }\n    }\n  };\n  clickToSms = ({ countryCode, areaCode }) => {\n    if (this.props.onClickToSms) {\n      const phoneNumber = this.getPhoneNumber();\n      const contact = this.getSelectedContact();\n      if (contact) {\n        this.props.onClickToSms({\n          ...contact,\n          phoneNumber,\n        });\n      } else {\n        const formatted = formatNumber({\n          phoneNumber,\n          countryCode,\n          areaCode,\n        });\n        this.props.onClickToSms(\n          {\n            name: this.props.enableContactFallback\n              ? this.getFallbackContactName()\n              : formatted,\n            phoneNumber,\n          },\n          true,\n        );\n      }\n    }\n  };\n  clickToDial = () => {\n    if (this.props.onClickToDial) {\n      const contact = this.getSelectedContact() || {};\n      const phoneNumber = this.getPhoneNumber();\n\n      if (phoneNumber) {\n        this.props.onClickToDial({\n          ...contact,\n          phoneNumber,\n        });\n      }\n    }\n  };\n  externalViewEntity = () => this.props.externalViewEntity(this.props.call);\n  render() {\n    if (this.state.loading) {\n      return <div className={styles.root} />;\n    }\n    const {\n      call: {\n        direction,\n        telephonyStatus,\n        result,\n        startTime,\n        duration,\n        activityMatches,\n        offset,\n        type,\n        toName,\n      },\n      brand,\n      currentLocale,\n      areaCode,\n      countryCode,\n      disableLinks,\n      disableClickToDial,\n      outboundSmsPermission,\n      internalSmsPermission,\n      active,\n      onViewContact,\n      onCreateContact,\n      createEntityTypes,\n      onLogCall,\n      onClickToDial,\n      onClickToSms,\n      dateTimeFormatter,\n      isLogging,\n      enableContactFallback,\n      showContactDisplayPlaceholder,\n      sourceIcons,\n      phoneTypeRenderer,\n      phoneSourceNameRenderer,\n      renderContactName,\n      renderExtraButton,\n      contactDisplayStyle,\n      externalViewEntity,\n      externalHasEntity,\n      readTextPermission,\n      withAnimation,\n    } = this.props;\n    const phoneNumber = this.getPhoneNumber();\n    const contactMatches = this.getContactMatches();\n    const fallbackContactName = this.getFallbackContactName();\n    const ringing = isRinging(this.props.call);\n    const missed = isInbound(this.props.call) && isMissed(this.props.call);\n    const parsedInfo = parseNumber({\n      phoneNumber,\n      countryCode,\n      areaCode,\n    });\n    const isExtension =\n      !parsedInfo.hasPlus && parsedInfo.number && parsedInfo.number.length <= 6;\n    const disableClickToSms = !(\n      onClickToSms &&\n      (isExtension ? internalSmsPermission : outboundSmsPermission)\n    );\n\n    let durationEl = null;\n    if (typeof duration === 'undefined') {\n      durationEl = disableLinks ? (\n        i18n.getString('unavailable', currentLocale)\n      ) : (\n        <DurationCounter startTime={startTime} offset={offset} />\n      );\n    } else {\n      durationEl = formatDuration(duration);\n    }\n    let dateEl = '';\n    if (!active) {\n      dateEl = dateTimeFormatter({ utcTimestamp: startTime });\n    }\n    let statusEl = '';\n    if (active) {\n      statusEl = i18n.getString(result || telephonyStatus, currentLocale);\n    }\n    const contactName =\n      typeof renderContactName === 'function'\n        ? renderContactName(this.props.call)\n        : undefined;\n    const extraButton =\n      typeof renderExtraButton === 'function'\n        ? renderExtraButton(this.props.call)\n        : undefined;\n    const menuExtended = this.props.extended || this.state.extended;\n\n    return (\n      <div className={styles.root} onClick={this.toggleExtended}>\n        <div className={styles.wrapper}>\n          <CallIcon\n            direction={direction}\n            ringing={ringing}\n            active={active}\n            missed={missed}\n            inboundTitle={i18n.getString('inboundCall', currentLocale)}\n            outboundTitle={i18n.getString('outboundCall', currentLocale)}\n            missedTitle={i18n.getString('missedCall', currentLocale)}\n            type={type}\n          />\n          <div className={styles.infoWrapper}>\n            <ContactDisplay\n              isOnConferenceCall={\n                direction === callDirections.outbound && toName === 'Conference'\n              }\n              contactName={contactName}\n              reference={(ref) => {\n                this.contactDisplay = ref;\n              }}\n              className={classnames(\n                styles.contactDisplay,\n                contactDisplayStyle,\n                missed && styles.missed,\n                active && styles.active,\n              )}\n              selectClassName={styles.dropdownSelect}\n              brand={brand}\n              sourceIcons={sourceIcons}\n              phoneTypeRenderer={phoneTypeRenderer}\n              phoneSourceNameRenderer={phoneSourceNameRenderer}\n              contactMatches={contactMatches}\n              selected={this.state.selected}\n              onSelectContact={this.onSelectContact}\n              disabled={disableLinks}\n              isLogging={isLogging || this.state.isLogging}\n              fallBackName={fallbackContactName}\n              enableContactFallback={enableContactFallback}\n              areaCode={areaCode}\n              countryCode={countryCode}\n              phoneNumber={phoneNumber}\n              currentLocale={currentLocale}\n              stopPropagation={false}\n              showType={false}\n              showPlaceholder={showContactDisplayPlaceholder}\n            />\n            <div className={styles.details}>\n              {durationEl}\n              {` | ${dateEl}${statusEl}`}\n            </div>\n          </div>\n          {extraButton}\n        </div>\n        <ActionMenu\n          extended={menuExtended}\n          onToggle={this.toggleExtended}\n          currentLocale={currentLocale}\n          onLog={onLogCall && this.logCall}\n          onViewEntity={onViewContact && this.viewSelectedContact}\n          onCreateEntity={onCreateContact && this.createSelectedContact}\n          createEntityTypes={createEntityTypes}\n          hasEntity={!!contactMatches.length}\n          onClickToDial={onClickToDial && this.clickToDial}\n          onClickToSms={\n            readTextPermission\n              ? () => this.clickToSms({ countryCode, areaCode })\n              : undefined\n          }\n          phoneNumber={phoneNumber}\n          disableLinks={disableLinks}\n          disableClickToDial={disableClickToDial}\n          isLogging={isLogging || this.state.isLogging}\n          isLogged={activityMatches.length > 0}\n          isCreating={this.state.isCreating}\n          addLogTitle={i18n.getString('addLog', currentLocale)}\n          editLogTitle={i18n.getString('editLog', currentLocale)}\n          textTitle={i18n.getString('text', currentLocale)}\n          callTitle={i18n.getString('call', currentLocale)}\n          createEntityTitle={i18n.getString('addEntity', currentLocale)}\n          viewEntityTitle={i18n.getString('viewDetails', currentLocale)}\n          externalViewEntity={externalViewEntity && this.externalViewEntity}\n          externalHasEntity={\n            externalHasEntity && externalHasEntity(this.props.call)\n          }\n          disableClickToSms={disableClickToSms}\n          withAnimation={withAnimation}\n        />\n      </div>\n    );\n  }\n}\n\nCallItem.propTypes = {\n  renderIndex: PropTypes.number,\n  extended: PropTypes.bool,\n  call: PropTypes.shape({\n    direction: PropTypes.string.isRequired,\n    telephonyStatus: PropTypes.string,\n    startTime: PropTypes.number.isRequired,\n    activityMatches: PropTypes.array.isRequired,\n    fromMatches: PropTypes.array.isRequired,\n    toMatches: PropTypes.array.isRequired,\n    from: PropTypes.shape({\n      phoneNumber: PropTypes.string,\n      extensionNumber: PropTypes.string,\n      name: PropTypes.string,\n    }).isRequired,\n    to: PropTypes.shape({\n      phoneNumber: PropTypes.string,\n      extensionNumber: PropTypes.string,\n      name: PropTypes.string,\n    }),\n    webphoneSession: PropTypes.object,\n  }).isRequired,\n  areaCode: PropTypes.string.isRequired,\n  brand: PropTypes.string.isRequired,\n  countryCode: PropTypes.string.isRequired,\n  currentLocale: PropTypes.string.isRequired,\n  onLogCall: PropTypes.func,\n  onViewContact: PropTypes.func,\n  onCreateContact: PropTypes.func,\n  createEntityTypes: PropTypes.array,\n  onClickToDial: PropTypes.func,\n  onClickToSms: PropTypes.func,\n  isLoggedContact: PropTypes.func,\n  disableLinks: PropTypes.bool,\n  disableClickToDial: PropTypes.bool,\n  outboundSmsPermission: PropTypes.bool,\n  internalSmsPermission: PropTypes.bool,\n  active: PropTypes.bool.isRequired,\n  dateTimeFormatter: PropTypes.func.isRequired,\n  isLogging: PropTypes.bool,\n  enableContactFallback: PropTypes.bool,\n  autoLog: PropTypes.bool,\n  showContactDisplayPlaceholder: PropTypes.bool,\n  sourceIcons: PropTypes.object,\n  phoneTypeRenderer: PropTypes.func,\n  phoneSourceNameRenderer: PropTypes.func,\n  renderContactName: PropTypes.func,\n  renderExtraButton: PropTypes.func,\n  contactDisplayStyle: PropTypes.string,\n  externalViewEntity: PropTypes.func,\n  externalHasEntity: PropTypes.func,\n  readTextPermission: PropTypes.bool,\n  onSizeChanged: PropTypes.func,\n  withAnimation: PropTypes.bool,\n};\n\nCallItem.defaultProps = {\n  renderIndex: undefined,\n  extended: false,\n  onLogCall: undefined,\n  onClickToDial: undefined,\n  onClickToSms: undefined,\n  onViewContact: undefined,\n  onCreateContact: undefined,\n  createEntityTypes: undefined,\n  isLoggedContact: () => false,\n  isLogging: false,\n  disableClickToDial: false,\n  outboundSmsPermission: false,\n  internalSmsPermission: false,\n  disableLinks: false,\n  enableContactFallback: undefined,\n  showContactDisplayPlaceholder: true,\n  autoLog: false,\n  sourceIcons: undefined,\n  phoneTypeRenderer: undefined,\n  phoneSourceNameRenderer: undefined,\n  renderContactName: undefined,\n  renderExtraButton: undefined,\n  contactDisplayStyle: undefined,\n  externalViewEntity: undefined,\n  externalHasEntity: undefined,\n  readTextPermission: true,\n  onSizeChanged: undefined,\n  withAnimation: true,\n};\n"],"file":"index.js"}