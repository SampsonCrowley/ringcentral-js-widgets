{"version":3,"sources":["components/ConferenceParticipantPanel/index.js"],"names":["ParticipantsContainer","props","state","showModal","detail","formatPrticipants","onRemoveBtnClick","onCancel","onCancelNoAfter","participants","formatPhone","map","participant","partyNumber","setState","afterOnRemoveBtnClick","afterOnCancel","nextProps","find","id","currentLocale","removeFunc","onBackButtonClick","backHeader","styles","header","i18n","getString","root","participantsListContainer","participantsCount","length","participantsList","avatarUrl","toUserName","calleeType","calleeTypes","contacts","then","Component","propTypes","PropTypes","string","isRequired","func","arrayOf","object","defaultProps","i"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport calleeTypes from 'ringcentral-integration/enums/calleeTypes';\n\nimport BackButton from '../BackButton';\nimport BackHeader from '../BackHeader';\nimport ConfirmRemoveModal from './ConfirmRemoveModal';\nimport i18n from './i18n';\nimport ParticipantItem from './ParticipantItem';\nimport styles from './styles.scss';\n\nclass ParticipantsContainer extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      showModal: false,\n      detail: null,\n    };\n    this.formatPrticipants(props);\n    this.onRemoveBtnClick = this::this.onRemoveBtnClick;\n    this.onCancel = this::this.onCancel;\n    this.onCancelNoAfter = this::this.onCancelNoAfter;\n  }\n\n  formatPrticipants(props = this.props) {\n    const { participants, formatPhone } = props;\n\n    participants.map((participant) => {\n      participant.partyNumber = formatPhone(participant.partyNumber);\n      return participant;\n    });\n  }\n\n  onRemoveBtnClick(participant) {\n    this.setState(() => ({\n      detail: participant,\n      showModal: true,\n    }));\n    this.props.afterOnRemoveBtnClick();\n  }\n\n  onCancel() {\n    this.onCancelNoAfter();\n    this.props.afterOnCancel();\n  }\n  // onCancel without track\n  onCancelNoAfter() {\n    this.setState({\n      showModal: false,\n      detail: null,\n    });\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.formatPrticipants(nextProps);\n    if (this.state.showModal\n      && !nextProps.participants.find(\n        participant => participant.id === this.state.detail.id\n      )) {\n      this.onCancelNoAfter();\n    }\n  }\n\n  render() {\n    const {\n      participants,\n      currentLocale,\n      removeFunc,\n      onBackButtonClick,\n    } = this.props;\n\n    const { detail, showModal } = this.state;\n\n    const backHeader = (<BackHeader\n      className={styles.header}\n      onBackClick={onBackButtonClick}\n      backButton={<BackButton label={i18n.getString('conferenceCall', currentLocale)} />}\n    />);\n\n    return (\n      <div className={styles.root}>\n        {backHeader}\n        <div className={styles.participantsListContainer}>\n          <div className={styles.participantsCount}>\n            {\n              participants.length === 1\n              ? `${participants.length} ${i18n.getString('participant', currentLocale)}`\n              : `${participants.length} ${i18n.getString('participants', currentLocale)}`\n            }\n          </div>\n          <div className={styles.participantsList}>\n            {\n            participants.map((participant) => {\n              const {\n                avatarUrl,\n                toUserName,\n                partyNumber,\n                calleeType,\n                id,\n              } = participant;\n              let detail;\n\n              if (calleeType === calleeTypes.contacts) {\n                detail = toUserName;\n              } else {\n                detail = partyNumber;\n              }\n              return (\n                <ParticipantItem\n                  key={id}\n                  avatarUrl={avatarUrl}\n                  detail={detail}\n                  currentLocale={currentLocale}\n                  onRemove={() => this.onRemoveBtnClick(participant)}\n                />\n              );\n            })\n          }\n          </div>\n        </div>\n        <ConfirmRemoveModal\n          show={showModal}\n          detail={detail}\n          onCancel={this.onCancel}\n          currentLocale={currentLocale}\n          onRemove={\n            () => removeFunc(detail && detail.id).then(this.onCancelNoAfter)\n          } />\n      </div>\n    );\n  }\n}\n\n\nParticipantsContainer.propTypes = {\n  currentLocale: PropTypes.string.isRequired,\n  removeFunc: PropTypes.func,\n  participants: PropTypes.arrayOf(PropTypes.object).isRequired,\n  onBackButtonClick: PropTypes.func,\n  formatPhone: PropTypes.func,\n  afterOnCancel: PropTypes.func,\n  afterOnRemoveBtnClick: PropTypes.func,\n};\n\nParticipantsContainer.defaultProps = {\n  removeFunc: i => i,\n  onBackButtonClick: i => i,\n  formatPhone: i => i,\n  afterOnCancel: i => i,\n  afterOnRemoveBtnClick: i => i,\n};\n\nexport default ParticipantsContainer;\n"],"file":"index.js"}