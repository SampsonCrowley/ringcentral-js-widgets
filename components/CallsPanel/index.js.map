{"version":3,"sources":["components/CallsPanel/index.js"],"names":["HEADER_HEIGHT","CallsPanel","props","_onResize","_mounted","_calculateContentSize","state","contentHeight","contentWidth","_listWrapper","React","createRef","window","addEventListener","removeEventListener","current","getBoundingClientRect","react","setState","bottom","top","right","left","brand","currentLocale","calls","areaCode","countryCode","onViewContact","onCreateContact","onLogCall","onClickToDial","onClickToSms","isLoggedContact","disableLinks","disableClickToDial","outboundSmsPermission","internalSmsPermission","dateTimeFormatter","showSpinner","title","active","loggingMap","webphoneAnswer","webphoneReject","webphoneHangup","webphoneResume","enableContactFallback","autoLog","showContactDisplayPlaceholder","sourceIcons","phoneTypeRenderer","phoneSourceNameRenderer","useNewList","callsListView","content","styles","root","PureComponent","propTypes","PropTypes","string","isRequired","arrayOf","any","func","bool","object","defaultProps","undefined"],"mappings":"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","file":"index.js","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport debounce from 'ringcentral-integration/lib/debounce';\nimport 'core-js/fn/array/find';\nimport Header from '../Header';\nimport Panel from '../Panel';\nimport SpinnerOverlay from '../SpinnerOverlay';\nimport CallList from '../CallList';\nimport CallListV2 from '../CallListV2';\n\nimport styles from './styles.scss';\n\nconst HEADER_HEIGHT = 38;\n\nexport default class CallsPanel extends React.PureComponent {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      contentHeight: 0,\n      contentWidth: 0,\n    };\n\n    this._mounted = false;\n    this._listWrapper = React.createRef();\n  }\n\n  componentDidMount() {\n    this._mounted = true;\n    this._calculateContentSize();\n    window.addEventListener('resize', this._onResize);\n  }\n\n  componentWillUnmount() {\n    this._mounted = false;\n    window.removeEventListener('resize', this._onResize);\n  }\n\n  _onResize = debounce(() => {\n    if (this._mounted) {\n      this._calculateContentSize();\n    }\n  }, 300);\n\n  _calculateContentSize() {\n    if (this._listWrapper\n      && this._listWrapper.current\n      && this._listWrapper.current.getBoundingClientRect\n    ) {\n      const react = this._listWrapper.current.getBoundingClientRect();\n\n      this.setState({\n        contentHeight: react.bottom - react.top - HEADER_HEIGHT,\n        contentWidth: react.right - react.left,\n      });\n\n      return;\n    }\n\n    this.setState({\n      contentHeight: 0,\n      contentWidth: 0,\n    });\n  }\n\n  render() {\n    const {\n      brand,\n      currentLocale,\n      calls,\n      areaCode,\n      countryCode,\n      onViewContact,\n      onCreateContact,\n      onLogCall,\n      onClickToDial,\n      onClickToSms,\n      isLoggedContact,\n      disableLinks,\n      disableClickToDial,\n      outboundSmsPermission,\n      internalSmsPermission,\n      dateTimeFormatter,\n      showSpinner,\n      title,\n      active,\n      loggingMap,\n      webphoneAnswer,\n      webphoneReject,\n      webphoneHangup,\n      webphoneResume,\n      enableContactFallback,\n      autoLog,\n      showContactDisplayPlaceholder,\n      sourceIcons,\n      phoneTypeRenderer,\n      phoneSourceNameRenderer,\n      useNewList,\n    } = this.props;\n\n    const callsListView = useNewList ?\n      (\n        <CallListV2\n          brand={brand}\n          currentLocale={currentLocale}\n          calls={calls}\n          areaCode={areaCode}\n          countryCode={countryCode}\n          onViewContact={onViewContact}\n          onCreateContact={onCreateContact}\n          onLogCall={onLogCall}\n          onClickToDial={onClickToDial}\n          onClickToSms={onClickToSms}\n          isLoggedContact={isLoggedContact}\n          disableLinks={disableLinks}\n          disableClickToDial={disableClickToDial}\n          outboundSmsPermission={outboundSmsPermission}\n          internalSmsPermission={internalSmsPermission}\n          dateTimeFormatter={dateTimeFormatter}\n          active={active}\n          loggingMap={loggingMap}\n          webphoneAnswer={webphoneAnswer}\n          webphoneReject={webphoneReject}\n          webphoneHangup={webphoneHangup}\n          webphoneResume={webphoneResume}\n          enableContactFallback={enableContactFallback}\n          autoLog={autoLog}\n          showContactDisplayPlaceholder={showContactDisplayPlaceholder}\n          sourceIcons={sourceIcons}\n          phoneTypeRenderer={phoneTypeRenderer}\n          phoneSourceNameRenderer={phoneSourceNameRenderer}\n          width={this.state.contentWidth}\n          height={this.state.contentHeight}\n          useNewList={useNewList}\n        />\n      ) :\n      (\n        <CallList\n          brand={brand}\n          currentLocale={currentLocale}\n          calls={calls}\n          areaCode={areaCode}\n          countryCode={countryCode}\n          onViewContact={onViewContact}\n          onCreateContact={onCreateContact}\n          onLogCall={onLogCall}\n          onClickToDial={onClickToDial}\n          onClickToSms={onClickToSms}\n          isLoggedContact={isLoggedContact}\n          disableLinks={disableLinks}\n          disableClickToDial={disableClickToDial}\n          outboundSmsPermission={outboundSmsPermission}\n          internalSmsPermission={internalSmsPermission}\n          dateTimeFormatter={dateTimeFormatter}\n          active={active}\n          loggingMap={loggingMap}\n          webphoneAnswer={webphoneAnswer}\n          webphoneReject={webphoneReject}\n          webphoneHangup={webphoneHangup}\n          webphoneResume={webphoneResume}\n          enableContactFallback={enableContactFallback}\n          autoLog={autoLog}\n          showContactDisplayPlaceholder={showContactDisplayPlaceholder}\n          sourceIcons={sourceIcons}\n          phoneTypeRenderer={phoneTypeRenderer}\n          phoneSourceNameRenderer={phoneSourceNameRenderer}\n        />\n      );\n\n    const content = showSpinner ? <SpinnerOverlay /> : callsListView;\n\n    return (\n      <div className={styles.root} ref={this._listWrapper}>\n        <Header>\n          {title}\n        </Header>\n        <Panel className={styles.content} >\n          {content}\n        </Panel>\n      </div>\n    );\n  }\n}\n\nCallsPanel.propTypes = {\n  brand: PropTypes.string.isRequired,\n  currentLocale: PropTypes.string.isRequired,\n  calls: PropTypes.arrayOf(PropTypes.any).isRequired,\n  areaCode: PropTypes.string.isRequired,\n  countryCode: PropTypes.string.isRequired,\n  onViewContact: PropTypes.func,\n  onCreateContact: PropTypes.func,\n  onClickToDial: PropTypes.func,\n  onClickToSms: PropTypes.func,\n  onLogCall: PropTypes.func,\n  isLoggedContact: PropTypes.func,\n  disableLinks: PropTypes.bool.isRequired,\n  disableClickToDial: PropTypes.bool,\n  outboundSmsPermission: PropTypes.bool,\n  internalSmsPermission: PropTypes.bool,\n  dateTimeFormatter: PropTypes.func.isRequired,\n  showSpinner: PropTypes.bool,\n  title: PropTypes.string,\n  active: PropTypes.bool,\n  loggingMap: PropTypes.object,\n  webphoneAnswer: PropTypes.func,\n  webphoneReject: PropTypes.func,\n  webphoneHangup: PropTypes.func,\n  webphoneResume: PropTypes.func,\n  enableContactFallback: PropTypes.bool,\n  autoLog: PropTypes.bool,\n  showContactDisplayPlaceholder: PropTypes.bool,\n  sourceIcons: PropTypes.object,\n  phoneTypeRenderer: PropTypes.func,\n  phoneSourceNameRenderer: PropTypes.func,\n  useNewList: PropTypes.bool,\n};\n\nCallsPanel.defaultProps = {\n  onViewContact: undefined,\n  onCreateContact: undefined,\n  onLogCall: undefined,\n  onClickToDial: undefined,\n  onClickToSms: undefined,\n  disableClickToDial: false,\n  outboundSmsPermission: false,\n  internalSmsPermission: false,\n  showSpinner: false,\n  title: '',\n  active: false,\n  isLoggedContact: undefined,\n  loggingMap: {},\n  webphoneAnswer: undefined,\n  webphoneReject: undefined,\n  webphoneHangup: undefined,\n  webphoneResume: undefined,\n  enableContactFallback: undefined,\n  autoLog: false,\n  showContactDisplayPlaceholder: true,\n  sourceIcons: undefined,\n  phoneTypeRenderer: undefined,\n  phoneSourceNameRenderer: undefined,\n  useNewList: false,\n};\n"]}