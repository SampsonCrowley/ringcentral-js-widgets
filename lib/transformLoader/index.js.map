{"version":3,"sources":["lib/transformLoader/index.js"],"names":["transformLoader","noChunk","through","obj","file","enc","done","content","contents","toString","folderPath","path","dirname","fs","readdir","isLocaleFile","files","filter","loader","Buffer","from","push","transform"],"mappings":";;;;;;;;;;;;;;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;AACA;;;;;;;;;;AAEe,SAASA,eAAT,GAEP;AAAA,iFAAJ,EAAI;AAAA,0BADNC,OACM;AAAA,MADNA,OACM,6BADI,KACJ;;AACN,SAAOC,iBAAQC,GAAR;AAAA;AAAA;AAAA;AAAA;AAAA,4BAAY,iBAAyBC,IAAzB,EAA+BC,GAA/B,EAAoCC,IAApC;AAAA;AAAA;AAAA;AAAA;AAAA;AACXC,cAAAA,OADW,GACDH,IAAI,CAACI,QAAL,CAAcC,QAAd,CAAuBJ,GAAvB,CADC;;AAAA,mBAEb,2BAAaE,OAAb,CAFa;AAAA;AAAA;AAAA;;AAGTG,cAAAA,UAHS,GAGIC,cAAKC,OAAL,CAAaR,IAAI,CAACO,IAAlB,CAHJ;AAAA;AAAA,qBAIME,iBAAGC,OAAH,CAAWJ,UAAX,CAJN;;AAAA;AAAA,4BAIqCK,qBAJrC;AAITC,cAAAA,KAJS,iBAI8BC,MAJ9B;AAKTC,cAAAA,MALS,GAKA,oCAAsB;AACnCF,gBAAAA,KAAK,EAALA,KADmC;AAEnCf,gBAAAA,OAAO,EAAEA,OAAO,IAAI,4BAASM,OAAT;AAFe,eAAtB,CALA;AASfH,cAAAA,IAAI,CAACI,QAAL,GAAgBW,MAAM,CAACC,IAAP,CAAYF,MAAZ,EAAoB,MAApB,CAAhB;;AATe;AAWjB,mBAAKG,IAAL,CAAUjB,IAAV;AACAE,cAAAA,IAAI;;AAZa;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAZ;;AAAA,aAA2BgB,SAA3B;AAAA;AAAA;;AAAA,WAA2BA,SAA3B;AAAA,MAAP;AAcD","sourcesContent":["import through from 'through2';\nimport fs from 'fs-extra';\nimport path from 'path';\nimport generateLoaderContent from '../generateLoaderContent';\nimport isLocaleFile from '../isLocaleFile';\nimport isLoaderFile, { noChunks } from '../isLoaderFile';\n\nexport default function transformLoader({\n  noChunk = false\n} = {}) {\n  return through.obj(async function transform(file, enc, done) {\n    const content = file.contents.toString(enc);\n    if (isLoaderFile(content)) {\n      const folderPath = path.dirname(file.path);\n      const files = (await fs.readdir(folderPath)).filter(isLocaleFile);\n      const loader = generateLoaderContent({\n        files,\n        noChunk: noChunk || noChunks(content),\n      });\n      file.contents = Buffer.from(loader, 'utf8');\n    }\n    this.push(file);\n    done();\n  });\n}\n"],"file":"index.js"}