{"version":3,"sources":["modules/TabManager/index.js"],"names":["TabManager","options","actionTypes","_tabbie","Tabbie","prefix","_reducer","store","initSuccess","checkIsMain","type","active","dispatch","enabled","on","mainTabId","mainTabIdChanged","event","args","send","state","status","moduleStatuses","ready","RcModule"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAOqBA,U;AALrB;;;;OAIC,iB;;;;;AAEC,4BAEG;AAAA;;AAAA,QADEC,OACF;;AAAA;;AACD,sGACKA,OADL;AAEEC,MAAAA,WAAW,EAAXA;AAFF;AAIA,UAAKC,OAAL,GAAe,IAAIC,eAAJ,CAAW;AACxBC,MAAAA,MAAM,EAAE,MAAKA;AADW,KAAX,CAAf;AAGA,UAAKC,QAAL,GAAgB,mCAAqB,MAAKJ,WAA1B,CAAhB;AARC;AASF;;;;;;;;;;;;;;+BAEC,KAAKK,K;+BACG,KAAKL,WAAL,CAAiBM,W;;uBACT,KAAKL,OAAL,CAAaM,WAAb,E;;;;;AADdC,kBAAAA,I;AACAC,kBAAAA,M;;;6BAFSC,Q;;AAIX,oBAAI,KAAKT,OAAL,CAAaU,OAAjB,EAA0B;AACxB,uBAAKV,OAAL,CAAaW,EAAb,CAAgB,kBAAhB;AAAA;AAAA;AAAA;AAAA;AAAA,4CAAoC,iBAAOC,SAAP;AAAA;AAAA;AAAA;AAAA;AAAA,4CAClC,MAAI,CAACR,KAD6B;AAAA,4CAE1B,MAAI,CAACL,WAAL,CAAiBc,gBAFS;AAAA,4CAGhCD,SAHgC;AAAA;AAAA,qCAIlB,MAAI,CAACZ,OAAL,CAAaM,WAAb,EAJkB;;AAAA;AAAA;AAAA;AAEhCC,gCAAAA,IAFgC;AAGhCK,gCAAAA,SAHgC;AAIhCJ,gCAAAA,MAJgC;AAAA;;AAAA,0CACvBC,QADuB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAApC;;AAAA;AAAA;AAAA;AAAA;;AAOA,uBAAKT,OAAL,CAAaW,EAAb,CAAgB,OAAhB,EAAyB,UAACG,KAAD,EAAoB;AAAA,sDAATC,IAAS;AAATA,sBAAAA,IAAS;AAAA;;AAC3C,oBAAA,MAAI,CAACX,KAAL,CAAWK,QAAX,CAAoB;AAClBF,sBAAAA,IAAI,EAAE,MAAI,CAACR,WAAL,CAAiBe,KADL;AAElBA,sBAAAA,KAAK,EAALA,KAFkB;AAGlBC,sBAAAA,IAAI,EAAJA;AAHkB,qBAApB;AAKD,mBAND;AAOD;;;;;;;;;;;;;;;;;;yBAGED,K,EAAgB;AAAA;;AAAA,yCAANC,IAAM;AAANA,QAAAA,IAAM;AAAA;;AACnB,4BAAKf,OAAL,EAAagB,IAAb,uBAAkBF,KAAlB,SAA4BC,IAA5B;AACD;;;;;;;;;;;kDAeQ,KAAKf,OAAL,CAAaM,WAAb,E;;;;;;;;;;;;;;;;;;wBAbI;AACX,aAAO,KAAKW,KAAL,CAAWC,MAAlB;AACD;;;wBAEW;AACV,aAAO,KAAKD,KAAL,CAAWC,MAAX,KAAsBC,wBAAeC,KAA5C;AACD;;;wBAEY;AACX,aAAO,KAAKH,KAAL,CAAWT,MAAlB;AACD;;;wBAMW;AACV,aAAO,KAAKS,KAAL,CAAWH,KAAlB;AACD;;;;EA1DqCO,kB","sourcesContent":["import RcModule from '../../lib/RcModule';\nimport { Module } from '../../lib/di';\nimport Tabbie from '../../lib/Tabbie';\nimport moduleStatuses from '../../enums/moduleStatuses';\nimport actionTypes from './actionTypes';\nimport getTabManagerReducer from './getTabManagerReducer';\n\n/**\n * @class\n * @description To handle data between different tabs\n */\n@Module()\nexport default class TabManager extends RcModule {\n  constructor({\n    ...options\n  }) {\n    super({\n      ...options,\n      actionTypes,\n    });\n    this._tabbie = new Tabbie({\n      prefix: this.prefix,\n    });\n    this._reducer = getTabManagerReducer(this.actionTypes);\n  }\n  async initialize() {\n    this.store.dispatch({\n      type: this.actionTypes.initSuccess,\n      active: await this._tabbie.checkIsMain(),\n    });\n    if (this._tabbie.enabled) {\n      this._tabbie.on('mainTabIdChanged', async (mainTabId) => {\n        this.store.dispatch({\n          type: this.actionTypes.mainTabIdChanged,\n          mainTabId,\n          active: await this._tabbie.checkIsMain(),\n        });\n      });\n      this._tabbie.on('event', (event, ...args) => {\n        this.store.dispatch({\n          type: this.actionTypes.event,\n          event,\n          args,\n        });\n      });\n    }\n  }\n\n  send(event, ...args) {\n    this._tabbie.send(event, ...args);\n  }\n\n  get status() {\n    return this.state.status;\n  }\n\n  get ready() {\n    return this.state.status === moduleStatuses.ready;\n  }\n\n  get active() {\n    return this.state.active;\n  }\n\n  async ensureActive() {\n    return this._tabbie.checkIsMain();\n  }\n\n  get event() {\n    return this.state.event;\n  }\n}\n"],"file":"index.js"}