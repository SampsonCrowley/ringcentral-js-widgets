{"version":3,"sources":["lib/IframeMessageTransport/index.js"],"names":["IframeMessageTransport","targetIframe","targetWindow","_onMessage","msg","data","_distributeMessage","_targetIframe","_targetWindow","window","addEventListener","removeEventListener","target","contentWindow","postMessage","MessageTransportCore"],"mappings":";;;;;;;;;;;;;;;;;AAAA;;;;;;;;;;;;;;;;;;;;;;IAEqBA,sB;;;;;AACnB,wCAGG;AAAA;;AAAA,QAFDC,YAEC,QAFDA,YAEC;AAAA,QADDC,YACC,QADDA,YACC;;AAAA;;AACD;;AADC,UAMHC,UANG,GAMU,UAACC,GAAD,EAAS;AACpB,UAAIA,GAAG,IAAIA,GAAG,CAACC,IAAf,EAAqB;AACnB,cAAKC,kBAAL,CAAwBF,GAAG,CAACC,IAA5B;AACD;AACF,KAVE;;AAED,UAAKE,aAAL,GAAqBN,YAArB;AACA,UAAKO,aAAL,GAAqBN,YAArB;AACAO,IAAAA,MAAM,CAACC,gBAAP,CAAwB,SAAxB,EAAmC,MAAKP,UAAxC;AAJC;AAKF;;;;8BAOS;AACRM,MAAAA,MAAM,CAACE,mBAAP,CAA2B,SAA3B,EAAsC,KAAKR,UAA3C;AACD;;;gCACWC,G,EAAK;AACf,UAAMQ,MAAM,GAAG,KAAKJ,aAAL,IAAsB,KAAKD,aAAL,IAAsB,KAAKA,aAAL,CAAmBM,aAA9E;;AACA,UAAID,MAAJ,EAAY;AACVA,QAAAA,MAAM,CAACE,WAAP,CAAmBV,GAAnB,EAAwB,GAAxB;AACD;AACF;;;;EAxBiDW,iC","sourcesContent":["import MessageTransportCore from '../MessageTransportCore';\n\nexport default class IframeMessageTransport extends MessageTransportCore {\n  constructor({\n    targetIframe,\n    targetWindow,\n  }) {\n    super();\n    this._targetIframe = targetIframe;\n    this._targetWindow = targetWindow;\n    window.addEventListener('message', this._onMessage);\n  }\n  _onMessage = (msg) => {\n    if (msg && msg.data) {\n      this._distributeMessage(msg.data);\n    }\n  }\n\n  dispose() {\n    window.removeEventListener('message', this._onMessage);\n  }\n  postMessage(msg) {\n    const target = this._targetWindow || this._targetIframe && this._targetIframe.contentWindow;\n    if (target) {\n      target.postMessage(msg, '*');\n    }\n  }\n}\n"],"file":"index.js"}